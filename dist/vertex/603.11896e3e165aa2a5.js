"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[603],{1603:(Z,_,s)=>{s.r(_),s.d(_,{ShgModule:()=>Q});var u=s(6895),c=s(9158),i=s(4006),v=s(5226),h=s.n(v),e=s(4650),S=s(8386),p=s(9061),x=s(3321),b=s(7185),C=s(9234),f=s(150);function y(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"option",34),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=a.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function E(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"span",41),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" Gardian : ",t.guardian_name||"-"," (",t.guardian_relation,") ")}}function I(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275elementEnd()),2&r){const t=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.name,"")}}const g=function(r,a,t){return{"badge-soft-primary":r,"badge-soft-warning":a,"badge-soft-danger":t}};function G(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"a",37),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(2,g,"Approved"===(null==t||null==t.kyc[0]?null:t.kyc[0].status),"Requested"===(null==t||null==t.kyc[0]?null:t.kyc[0].status),"Rejected"===(null==t||null==t.kyc[0]?null:t.kyc[0].status))),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" KYC ",null==t||null==t.kyc[0]?null:t.kyc[0].status," ")}}function F(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"a",37),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(2,g,"Approved"===t.franchise_status,"Requested"===t.franchise_status,"Rejected"===t.franchise_status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" Franchise ",t.franchise_status," ")}}function w(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",43),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(),m=e.\u0275\u0275reference(71);return e.\u0275\u0275resetView(o.advisorModalFn(l,m))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(2,g,"Approved"===t.shg_status,"Requested"===t.shg_status,"Rejected"===t.shg_status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" SHG ",t.shg_status," ")}}function A(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ul",44)(1,"li",45),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(),m=e.\u0275\u0275reference(73);return e.\u0275\u0275resetView(o.sendNotification(m,l))}),e.\u0275\u0275elementStart(2,"a",46),e.\u0275\u0275element(3,"i",47),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"li",48)(5,"a",49),e.\u0275\u0275element(6,"i",50),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate1("routerLink","/members/view/",t._id,"")}}const k=function(r,a,t,n){return{"badge-soft-primary":r,"badge-soft-warning":a,"badge-soft-danger":t,"badge-soft-secondary":n}};function T(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275element(5,"br"),e.\u0275\u0275template(6,E,3,2,"span",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275element(11,"br"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td")(14,"span"),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275template(17,I,3,1,"span",36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td"),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td"),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"td"),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"date"),e.\u0275\u0275element(27,"br"),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"td")(31,"a",37),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(33,G,2,6,"a",38),e.\u0275\u0275template(34,F,2,6,"a",38),e.\u0275\u0275template(35,w,2,6,"a",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"td"),e.\u0275\u0275template(37,A,7,1,"ul",40),e.\u0275\u0275elementEnd()()),2&r){const t=a.$implicit,n=a.index,l=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((l.page-1)*l.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.guardian_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.user_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null==t.referred_by[0]?null:t.referred_by[0].name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",(null==t.referred_by[0]?null:t.referred_by[0].user_id)||"-"," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((null==t.district_info[0]?null:t.district_info[0].name)||"-"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.shg_area_info),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.account_number||"-"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.gender||"-"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.date_of_birth?l.getAge(t.date_of_birth):"-"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" Joining : ",e.\u0275\u0275pipeBind1(26,19,t.created_date)," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" SHG Approved : ",e.\u0275\u0275pipeBind1(29,21,t.shg_approved_date)," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction4(23,k,"Active"===t.status,"Pending"===t.status,"Blocked"===t.status||"Deleted"===t.status,"Inactive"===t.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" Account ",t.status," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",1==t.kyc.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.franchise_status),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.shg_status),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Deleted"!==t.status)}}function q(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"label",67),e.\u0275\u0275element(1,"input",68),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&r){const t=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t," ")}}function H(r,a){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Status is required."),e.\u0275\u0275elementEnd())}function R(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"div",69),e.\u0275\u0275template(1,H,2,0,"small",70),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.approveSHGRequestFormGroup.get("shg_status"))||null==n.errors?null:n.errors.required)}}function N(r,a){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Loan Amount is required."),e.\u0275\u0275elementEnd())}function M(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"div",69),e.\u0275\u0275template(1,N,2,0,"small",70),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.approveSHGRequestFormGroup.get("shg_loanAmount"))||null==n.errors?null:n.errors.required)}}function V(r,a){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"SHG Areas is required."),e.\u0275\u0275elementEnd())}function D(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"div",69),e.\u0275\u0275template(1,V,2,0,"small",70),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.approveSHGRequestFormGroup.get("shgAreas"))||null==n.errors?null:n.errors.required)}}function P(r,a){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"SHG Penalty is required."),e.\u0275\u0275elementEnd())}function j(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"div",69),e.\u0275\u0275template(1,P,2,0,"small",70),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.approveSHGRequestFormGroup.get("shgPenalty"))||null==n.errors?null:n.errors.required)}}function $(r,a){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"SHG Duration is required."),e.\u0275\u0275elementEnd())}function L(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"div",69),e.\u0275\u0275template(1,$,2,0,"small",70),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.approveSHGRequestFormGroup.get("shgDuration"))||null==n.errors?null:n.errors.required)}}function z(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",51)(1,"h5",52),e.\u0275\u0275text(2,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",53),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",54)(5,"div",2)(6,"div",55)(7,"form",7)(8,"div",56)(9,"label",57),e.\u0275\u0275text(10,"Change Status:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div"),e.\u0275\u0275template(12,q,3,2,"label",58),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,R,2,1,"div",59),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",56)(15,"label",57),e.\u0275\u0275text(16,"Loan Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"input",60),e.\u0275\u0275template(18,M,2,1,"div",59),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",56)(20,"label",57),e.\u0275\u0275text(21,"SHG Areas:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(22,"ng-select",61),e.\u0275\u0275template(23,D,2,1,"div",59),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",56)(25,"label",57),e.\u0275\u0275text(26,"SHG Penalty:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"input",62),e.\u0275\u0275template(28,j,2,1,"div",59),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"div",56)(30,"label",57),e.\u0275\u0275text(31,"SHG Duration:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(32,"input",63),e.\u0275\u0275template(33,L,2,1,"div",59),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(34,"div",64)(35,"button",65),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Close click"))}),e.\u0275\u0275text(36,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"button",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.changeShgStatus())}),e.\u0275\u0275text(38,"Submit"),e.\u0275\u0275elementEnd()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,l,o,m,d;e.\u0275\u0275advance(7),e.\u0275\u0275property("formGroup",t.approveSHGRequestFormGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.kycStatusList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(n=t.approveSHGRequestFormGroup.get("shg_status"))?null:n.invalid)&&((null==(n=t.approveSHGRequestFormGroup.get("shg_status"))?null:n.dirty)||(null==(n=t.approveSHGRequestFormGroup.get("shg_status"))?null:n.touched))),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(l=t.approveSHGRequestFormGroup.get("shg_loanAmount"))?null:l.invalid)&&((null==(l=t.approveSHGRequestFormGroup.get("shg_loanAmount"))?null:l.dirty)||(null==(l=t.approveSHGRequestFormGroup.get("shg_loanAmount"))?null:l.touched))),e.\u0275\u0275advance(4),e.\u0275\u0275property("items",t.allAreas)("multiple",!0)("searchable",!0)("maxSelectedItems",3)("closeOnSelect",!1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(o=t.approveSHGRequestFormGroup.get("shgAreas"))?null:o.invalid)&&((null==(o=t.approveSHGRequestFormGroup.get("shgAreas"))?null:o.dirty)||(null==(o=t.approveSHGRequestFormGroup.get("shgAreas"))?null:o.touched))),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(m=t.approveSHGRequestFormGroup.get("shgPenalty"))?null:m.invalid)&&((null==(m=t.approveSHGRequestFormGroup.get("shgPenalty"))?null:m.dirty)||(null==(m=t.approveSHGRequestFormGroup.get("shgPenalty"))?null:m.touched))),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(d=t.approveSHGRequestFormGroup.get("shgDuration"))?null:d.invalid)&&((null==(d=t.approveSHGRequestFormGroup.get("shgDuration"))?null:d.dirty)||(null==(d=t.approveSHGRequestFormGroup.get("shgDuration"))?null:d.touched)))}}function U(r,a){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Title is required."),e.\u0275\u0275elementEnd())}function O(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"div",69),e.\u0275\u0275template(1,U,2,0,"small",70),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.notificationFormGroup.get("title"))||null==n.errors?null:n.errors.required)}}function B(r,a){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Message is required."),e.\u0275\u0275elementEnd())}function Y(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"div",69),e.\u0275\u0275template(1,B,2,0,"small",70),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.notificationFormGroup.get("message"))||null==n.errors?null:n.errors.required)}}function J(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",51)(1,"h5",52),e.\u0275\u0275text(2,"Send Notification"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",53),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",7)(5,"div",54)(6,"div",2)(7,"div",55)(8,"div",56)(9,"label",71),e.\u0275\u0275text(10,"Title:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",72),e.\u0275\u0275template(12,O,2,1,"div",59),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",56)(14,"label",73),e.\u0275\u0275text(15,"Message:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"textarea",74),e.\u0275\u0275template(17,Y,2,1,"div",59),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(18,"div",64)(19,"button",65),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Close click"))}),e.\u0275\u0275text(20,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"button",75),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.sendMessage())}),e.\u0275\u0275text(22,"Send Message"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,l;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.notificationFormGroup),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",(null==(n=t.notificationFormGroup.get("title"))?null:n.invalid)&&((null==(n=t.notificationFormGroup.get("title"))?null:n.dirty)||(null==(n=t.notificationFormGroup.get("title"))?null:n.touched))),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(l=t.notificationFormGroup.get("message"))?null:l.invalid)&&((null==(l=t.notificationFormGroup.get("message"))?null:l.dirty)||(null==(l=t.notificationFormGroup.get("message"))?null:l.touched))),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.notificationFormGroup.invalid)}}const K=[{path:"",component:(()=>{class r{constructor(t,n,l,o){this.userService=t,this.modalService=n,this.masterService=l,this.toast=o,this.currStatus="Pending",this.currUserId="",this.currKYCStatus="",this.statusList=["Pending","Active","Inactive","Blocked"],this.kycStatusList=["Approved","Rejected"],this.userList=[],this.allAreas=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"SHG List"},{label:"User",active:!0}],this.notificationFormGroup=new i.cw({title:new i.NI("",i.kI.required),message:new i.NI("",i.kI.required)}),this.searchFormGroup=new i.cw({name:new i.NI(""),user_id:new i.NI(""),account_number:new i.NI(""),status:new i.NI("")}),this.approveSHGRequestFormGroup=new i.cw({shg_status:new i.NI("Requested",i.kI.required),shg_loanAmount:new i.NI("",i.kI.required),shg_areas:new i.NI("",i.kI.required),shgPenalty:new i.NI("",i.kI.required),shgDuration:new i.NI("",i.kI.required)}),this.getAllUsers()}search(){this.page=1,this.getAllUsers()}getAreas(t){t&&t?._id?this.masterService.areas(t._id).subscribe({next:n=>{n&&n.data&&(this.allAreas=n.data||[])},error:n=>{console.error("Error loading areas:",n)}}):this.allAreas=[]}reset(){this.page=1,this.searchFormGroup.reset(),this.getAllUsers()}pageChange(t){this.page=t,this.getAllUsers()}getAllUsers(){const t=this.searchFormGroup.value,n=[];Object.keys(t).forEach(o=>{null!==t[o]&&""!==t[o]&&n.push(`${o}=${encodeURIComponent(t[o])}`)});const l=n.join("&");this.userService.getSHGCoordinators(this.page,this.pageSize,l).subscribe(o=>{o&&o.data?(this.userList=o?.data?.users?.data||[],console.log("User List:",this.userList),this.total=o?.data?.users?.metadata[0]?.total||0):this.userList=[]},o=>{console.error("Error fetching user list:",o),this.userList=[]})}isTimePassed(t){return!!t&&(new Date).getTime()-new Date(t).getTime()>36e5}openModal(t){this.modalService.open(t)}getAge(t){const n=new Date,l=new Date(t);let o=n.getFullYear()-l.getFullYear();const m=n.getMonth()-l.getMonth();return(m<0||0===m&&n.getDate()<l.getDate())&&o--,o}sendNotification(t,n){this.currUserId=n._id,this.openModal(t)}sendMessage(){if(this.notificationFormGroup.invalid)return void this.toast.error("Please fill all required fields");const{title:t,message:n}=this.notificationFormGroup.value;this.userService.sendNotification(this.currUserId,t,n).subscribe(l=>{l&&"success"===l.status?(this.toast.success("Notification sent successfully"),this.modalService.dismissAll(),this.notificationFormGroup.reset()):this.toast.error("Failed to send notification")},l=>{console.error("Error sending notification:",l),this.toast.error("Failed to send notification")})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}advisorModalFn(t,n){"Requested"===t.shg_status&&(this.currUserId=t._id,this.currStatus=t.advisor_status,console.log("Current User ID:",t),this.getAreas({_id:t.district}),this.approveSHGRequestFormGroup.patchValue(t),this.openModal(n))}changeShgStatus(){if(this.approveSHGRequestFormGroup.invalid)return void this.toast.error("Please fill all required fields correctly.");const t=this.approveSHGRequestFormGroup.value;t._id=this.currUserId,t.shg_status=t.shg_status||"Requested",t.shg_loanAmount=t.shg_loanAmount||0,t.shgPenalty=t.shgPenalty||0,t.shgDuration=t.shgDuration||0,t.shg_approved_date=new Date,t.shg_areas=t.shg_areas||[],h().fire({title:"Are you sure?",text:`You want to ${t.shg_status} this SHG?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:`Yes, ${t.shg_status} it!`}).then(n=>{n.isConfirmed&&this.userService.updateProfile(t).subscribe(l=>{this.modalService.dismissAll(),h().fire({title:"Success",text:`SHG status changed to ${t.shg_status} successfully!`,icon:"success",confirmButtonText:"OK"}),this.toast.success(`SHG status changed to ${t.shg_status} Successfully`),this.getAllUsers()},l=>{console.error("Error changing SHG status:",l),this.modalService.dismissAll(),this.toast.error("Failed to change SHG status")})})}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(S.i),e.\u0275\u0275directiveInject(p.FF),e.\u0275\u0275directiveInject(x.R),e.\u0275\u0275directiveInject(b._W))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-shg"]],decls:74,vars:12,consts:[[1,"container-fluid"],["title","SHG",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-3"],["type","search","id","searchInput","formControlName","name","placeholder","Search for Name...",1,"form-control"],["type","search","id","searchInput","formControlName","account_number","placeholder","Search for Account Number...",1,"form-control"],[1,"col-lg-2"],["type","search","id","searchInput","formControlName","user_id","placeholder","Search for User id...",1,"form-control"],["formControlName","status",1,"form-control","select2"],["value",""],["value","All"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-lg-1"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[3,"width"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["role","document"],["changeAdvisorStatusModal",""],["messageModal",""],[3,"ngValue"],["class","text-muted",4,"ngIf"],["class","badge badge-soft-primary","style","margin-right: 4px;",4,"ngFor","ngForOf"],["href","javascript: void(0);",1,"badge","font-size-11","m-1",3,"ngClass"],["href","javascript: void(0);","class","badge font-size-11 m-1",3,"ngClass",4,"ngIf"],["href","javascript: void(0);","class","badge font-size-11 m-1",3,"ngClass","click",4,"ngIf"],["class","list-inline font-size-20 contact-links mb-0",4,"ngIf"],[1,"text-muted"],[1,"badge","badge-soft-primary",2,"margin-right","4px"],["href","javascript: void(0);",1,"badge","font-size-11","m-1",3,"ngClass","click"],[1,"list-inline","font-size-20","contact-links","mb-0"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"list-inline-item","px-2",3,"click"],["href","javascript:void(0);","tooltip","Message"],[1,"bx","bx-message-square-dots"],[1,"list-inline-item","px-2"],["tooltip","Profile",3,"routerLink"],[1,"bx","bx-user-circle"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-md-12"],[1,"mb-3"],[1,"col-form-label"],["class","me-3",4,"ngFor","ngForOf"],["class","text-danger mt-1",4,"ngIf"],["type","number","formControlName","shg_loanAmount","placeholder","Enter Loan Amount",1,"form-control"],["formControlName","shg_areas","placeholder","Search for areas...","bindLabel","name","bindValue","_id",1,"custom-ng-select",3,"items","multiple","searchable","maxSelectedItems","closeOnSelect"],["type","number","formControlName","shgPenalty","placeholder","Enter SHG Penalty",1,"form-control"],["type","number","formControlName","shgDuration","placeholder","Enter SHG Duration",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","button",1,"btn","btn-primary","waves-effect","waves-light",3,"click"],[1,"me-3"],["type","radio","name","shg_status","formControlName","shg_status",3,"value"],[1,"text-danger","mt-1"],[4,"ngIf"],["for","recipient-name",1,"col-form-label"],["type","text","id","recipient-name","formControlName","title","placeholder","Enter Title",1,"form-control"],["for","message-text",1,"col-form-label"],["id","message-text","formControlName","message","placeholder","Enter Message",1,"form-control"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light",3,"disabled","click"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",8),e.\u0275\u0275element(12,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",11),e.\u0275\u0275element(14,"input",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",11)(16,"select",13)(17,"option",14),e.\u0275\u0275text(18,"Select Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"option",15),e.\u0275\u0275text(20,"All"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,y,2,2,"option",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",17)(23,"button",18),e.\u0275\u0275listener("click",function(){return n.search()}),e.\u0275\u0275element(24,"i",19),e.\u0275\u0275text(25," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",17)(27,"button",20),e.\u0275\u0275listener("click",function(){return n.reset()}),e.\u0275\u0275element(28,"i",21),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(29,"div",2)(30,"div",22)(31,"table",23)(32,"thead")(33,"tr")(34,"th"),e.\u0275\u0275text(35,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"th"),e.\u0275\u0275text(37,"Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"th"),e.\u0275\u0275text(39,"UserId"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"th"),e.\u0275\u0275text(41,"Refer Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"th"),e.\u0275\u0275text(43,"District"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"th"),e.\u0275\u0275text(45,"Areas"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"th"),e.\u0275\u0275text(47,"Account Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"th"),e.\u0275\u0275text(49,"Gender"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"th"),e.\u0275\u0275text(51,"Age"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"th"),e.\u0275\u0275text(53,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(54,"th",24),e.\u0275\u0275text(55,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"th",24),e.\u0275\u0275text(57,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(58,"tbody"),e.\u0275\u0275template(59,T,38,28,"tr",25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(60,"div",26)(61,"div",27)(62,"div",28),e.\u0275\u0275text(63,"Showing "),e.\u0275\u0275elementStart(64,"b"),e.\u0275\u0275text(65),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(66),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(67,"div",27)(68,"div",29)(69,"ngb-pagination",30),e.\u0275\u0275listener("pageChange",function(o){return n.page=o})("pageChange",function(o){return n.pageChange(o)}),e.\u0275\u0275elementEnd()()()()()()()()()()(),e.\u0275\u0275template(70,z,39,12,"ng-template",31,32,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(72,J,23,4,"ng-template",31,33,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.searchFormGroup),e.\u0275\u0275advance(14),e.\u0275\u0275property("ngForOf",n.statusList),e.\u0275\u0275advance(33),e.\u0275\u0275property("width",10),e.\u0275\u0275advance(2),e.\u0275\u0275property("width",10),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.userList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((n.page-1)*n.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",n.findPageShowing()," of ",n.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",n.total)("page",n.page)("pageSize",n.pageSize))},dependencies:[u.NgClass,u.NgForOf,u.NgIf,C.V,i._Y,i.YN,i.Kr,i.Fj,i.wV,i.EJ,i._,i.JJ,i.JL,i.sg,i.u,p.N9,f.w9,c.yS,u.DatePipe]}),r})()}];let W=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[c.Bz.forChild(K),c.Bz]}),r})();var X=s(9668);let Q=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[u.CommonModule,X.v,i.UX,p.jF,f.A0,i.u5,W]}),r})()}}]);
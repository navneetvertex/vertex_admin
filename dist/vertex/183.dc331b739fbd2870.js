"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[183],{97183:(S,c,l)=>{l.r(c),l.d(c,{MessagesModule:()=>F});var d=l(36895),g=l(59158),i=l(24006),e=l(94650),u=l(97185),f=l(84029),h=l(63728);function v(o,s){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13)(1,"image-cropper",14),e.\u0275\u0275listener("loadImageFailed",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.loadImageFailed())})("imageCropped",function(a){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.imageCropped(a))}),e.\u0275\u0275elementEnd()()}if(2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!1)("imageQuality",50)("canvasRotation",t.canvasRotation)("transform",t.transform)}}let C=(()=>{class o{constructor(t,n){this.toast=t,this.activeModal=n,this.transform={},this.imageChangedEvent=null,this.croppedImage="",this.canvasRotation=0,this.rotation=0,this.scale=1,this.croppedImageEvent=new e.EventEmitter}ngOnInit(){this.imageChangedEvent=this.data.file}cropImage(){this.croppedImage?this.activeModal.close({image:this.croppedImage,from:this.data.from}):this.toast.error("Please select an image to crop","Error",{timeOut:3e3,progressBar:!0,closeButton:!0})}dataURLtoBlob(t){const n=atob(t.split(",")[1]),a=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(n.length),m=new Uint8Array(r);for(let p=0;p<n.length;p++)m[p]=n.charCodeAt(p);return new Blob([r],{type:a})}imageCropped(t){this.croppedImage=t.base64}rotateLeft(){this.canvasRotation--,this.flipAfterRotate()}rotateRight(){this.canvasRotation++,this.flipAfterRotate()}flipAfterRotate(){this.transform={...this.transform,flipH:this.transform.flipV,flipV:this.transform.flipH}}flipHorizontal(){this.transform={...this.transform,flipH:!this.transform.flipH}}flipVertical(){this.transform={...this.transform,flipV:!this.transform.flipV}}updateRotation(){this.transform={...this.transform,rotate:this.rotation}}zoomOut(){this.scale-=.1,this.transform={...this.transform,scale:this.scale}}zoomIn(){this.scale+=.1,this.transform={...this.transform,scale:this.scale}}loadImageFailed(){console.error("Image load failed"),this.toast.error("Image load failed","Error",{timeOut:3e3,progressBar:!0,closeButton:!0})}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(u._W),e.\u0275\u0275directiveInject(f.Kz))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-image-cropper"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(o,7),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.imageCropper=a.first)}},inputs:{data:"data"},outputs:{croppedImageEvent:"croppedImageEvent"},decls:23,vars:2,consts:[[1,"card-body"],[1,"row"],[1,"col-12"],[1,"card"],[1,"col-lg-8"],["class","img-container",4,"ngIf"],[1,"text-center","mt-2"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"btn","btn-secondary","btn-sm","ms-1",3,"click"],[1,"col-lg-4"],[1,"text-center"],[3,"src"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"img-container"],["format","jpeg",3,"imageChangedEvent","maintainAspectRatio","imageQuality","canvasRotation","transform","loadImageFailed","imageCropped"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",0)(5,"div",1)(6,"div",4),e.\u0275\u0275template(7,v,2,5,"div",5),e.\u0275\u0275elementStart(8,"div",6)(9,"button",7),e.\u0275\u0275listener("click",function(){return n.rotateLeft()}),e.\u0275\u0275text(10,"Rotate left"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"button",8),e.\u0275\u0275listener("click",function(){return n.rotateRight()}),e.\u0275\u0275text(12,"Rotate right"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"button",8),e.\u0275\u0275listener("click",function(){return n.flipHorizontal()}),e.\u0275\u0275text(14,"Flip horizontal"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",8),e.\u0275\u0275listener("click",function(){return n.flipVertical()}),e.\u0275\u0275text(16,"Flip vertical"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275element(19,"img",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",6)(21,"button",12),e.\u0275\u0275listener("click",function(){return n.cropImage()}),e.\u0275\u0275text(22,"Crop Image"),e.\u0275\u0275elementEnd()()()()()()()()()),2&t&&(e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",n.imageChangedEvent),e.\u0275\u0275advance(12),e.\u0275\u0275property("src",n.croppedImage,e.\u0275\u0275sanitizeUrl))},dependencies:[d.NgIf,h.ap]}),o})();var I=l(29234);function b(o,s){1&o&&(e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275text(1," Title is required. "),e.\u0275\u0275elementEnd())}function M(o,s){1&o&&(e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275text(1," Message is required. "),e.\u0275\u0275elementEnd())}const y=[{path:"",component:(()=>{class o{constructor(t,n){this.modalService=t,this.toast=n}ngOnInit(){this.breadCrumbItems=[{label:"Messages"},{label:"Create",active:!0}],this.addMessageFormGroup=new i.cw({title:new i.NI("",i.kI.required),message:new i.NI("",i.kI.required),attachment:new i.NI("")})}onFileSelected(t,n){const a=t.target;if(a.files&&a.files.length>0){const r=this.modalService.open(C,{centered:!0,size:"xl"});r.componentInstance.data={file:t,from:n},r.result.then(m=>{console.log("Modal closed with:",m),m&&m.image&&this.addMessageFormGroup.patchValue({attachment:m.image})}).catch(m=>{console.log("Modal dismissed:",m)})}}onSubmit(){this.addMessageFormGroup.valid?(this.toast.success("Notification is successfully sent to all users."),this.addMessageFormGroup.reset()):(this.addMessageFormGroup.markAllAsTouched(),this.toast.error("Please fix the error."))}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(f.FF),e.\u0275\u0275directiveInject(u._W))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-messages"]],decls:27,vars:6,consts:[[1,"container-fluid"],["title","Message",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-12",3,"formGroup"],[1,"mb-3","col-lg-12"],["for","messageTitle",1,"form-label"],["type","text","id","messageTitle","formControlName","title","placeholder","Enter title",1,"form-control"],["class","text-danger",4,"ngIf"],["for","messageBody",1,"form-label"],["id","messageBody","formControlName","message","rows","4","placeholder","Enter message body",1,"form-control"],[1,"mb-3","col-lg-6"],["type","file",1,"form-control",3,"change"],[1,"col-lg-6"],[2,"max-width","100px","max-height","100px",3,"src"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"text-danger"]],template:function(t,n){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",2)(7,"form",6)(8,"div",7)(9,"label",8),e.\u0275\u0275text(10,"Title"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",9),e.\u0275\u0275template(12,b,2,0,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",7)(14,"label",11),e.\u0275\u0275text(15,"Message"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"textarea",12),e.\u0275\u0275template(17,M,2,0,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",2)(19,"div",13)(20,"label"),e.\u0275\u0275text(21,"Attachment Image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"input",14),e.\u0275\u0275listener("change",function(r){return n.onFileSelected(r,"profile")}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",15),e.\u0275\u0275element(24,"img",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"button",17),e.\u0275\u0275listener("click",function(){return n.onSubmit()}),e.\u0275\u0275text(26,"Submit"),e.\u0275\u0275elementEnd()()()()()()()()),2&t){let a,r,m;e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.addMessageFormGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(a=n.addMessageFormGroup.get("title"))?null:a.touched)&&(null==(a=n.addMessageFormGroup.get("title"))?null:a.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(r=n.addMessageFormGroup.get("message"))?null:r.touched)&&(null==(r=n.addMessageFormGroup.get("message"))?null:r.invalid)),e.\u0275\u0275advance(7),e.\u0275\u0275property("src",null==(m=n.addMessageFormGroup.get("attachment"))?null:m.value,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",n.addMessageFormGroup.invalid)}},dependencies:[d.NgIf,I.V,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u]}),o})()}];let _=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[g.Bz.forChild(y),g.Bz]}),o})();var E=l(19668);let F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[d.CommonModule,E.v,i.UX,_]}),o})()}}]);
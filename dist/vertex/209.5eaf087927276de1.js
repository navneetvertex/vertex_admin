"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[209],{5209:(Be,S,m)=>{m.r(S),m.d(S,{LoanModule:()=>ze});var s=m(6895),y=m(9158),o=m(4006),E=m(5226),C=m.n(E),e=m(4650),u=m(2340),L=m(529);let f=(()=>{class n{constructor(t){this.http=t}getLoanList(t=0,a=10,r){return this.http.get(`${u.N.api_url}loans?${r}&page=${t}&limit=${a}`)}updateLoanStatus(t,a){return this.http.put(`${u.N.api_url}loans/${t}`,a)}getUserTransaction(t=0,a=10,r){return this.http.get(`${u.N.api_url}loans/user-transanction?${r}&page=${t}&limit=${a}`)}getAdminTransaction(t=0,a=10,r){return this.http.get(`${u.N.api_url}loans/admin-transanction?${r}&page=${t}&limit=${a}`)}getAllUserActiveLoans(t){return this.http.get(`${u.N.api_url}loans/getAllUserActiveLoans/${t}`)}getTotalPaymentAmount(t){return this.http.get(`${u.N.api_url}loans/getTotalPaymentAmount/${t}`)}recordPayment(t){return this.http.post(`${u.N.api_url}loans/record-payment`,t)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(L.eN))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _=m(9061),g=m(9234);function T(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=l.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function F(n,l){1&n&&(e.\u0275\u0275elementStart(0,"div",31),e.\u0275\u0275element(1,"img",32),e.\u0275\u0275elementStart(2,"p",33),e.\u0275\u0275text(3,"No Loan found in the current filter."),e.\u0275\u0275elementEnd()())}const b=function(n,l,t,a){return{"badge-soft-primary":n,"badge-soft-warning":l,"badge-soft-danger":t,"badge-soft-secondary":a}};function w(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"a",46),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction4(2,b,"Approved"===t.status||"Completed"===t.status,"Requested"===t.status,"Rejected"===t.status||"Defaulted"===t.status,"Pending"===t.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.status," ")}}function q(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",47),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2),d=e.\u0275\u0275reference(45);return e.\u0275\u0275resetView(i.openLoanModal(d,r))}),e.\u0275\u0275elementStart(1,"a",48),e.\u0275\u0275element(2,"i",49),e.\u0275\u0275elementEnd()()}}function N(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",50)(1,"a",51),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2),d=e.\u0275\u0275reference(47);return e.\u0275\u0275resetView(i.viewLoan(d,r))}),e.\u0275\u0275element(2,"i",52),e.\u0275\u0275elementEnd()()}}function G(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td"),e.\u0275\u0275template(18,w,2,7,"a",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td")(20,"ul",43),e.\u0275\u0275template(21,q,3,0,"li",44),e.\u0275\u0275template(22,N,3,0,"li",45),e.\u0275\u0275elementEnd()()()),2&n){const t=l.$implicit,a=l.index,r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((r.page-1)*r.pageSize+a+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.loan_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.user.name," (",t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.requested_loan_amount,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.duration," month(s)"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.interval),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.loan_type),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.purpose),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.status),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","Pending"===t.status),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Pending"!==t.status&&"Rejected"!==t.status)}}function R(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",34)(1,"table",35)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"Loan Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Loan Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Duration"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"EMI Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Loan Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"th"),e.\u0275\u0275text(19,"Purpose"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"th"),e.\u0275\u0275text(21,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"th"),e.\u0275\u0275text(23,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"tbody"),e.\u0275\u0275template(25,G,23,12,"tr",36),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",37)(27,"div",38)(28,"div",39),e.\u0275\u0275text(29,"Showing "),e.\u0275\u0275elementStart(30,"b"),e.\u0275\u0275text(31),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",38)(34,"div",40)(35,"ngb-pagination",41),e.\u0275\u0275listener("pageChange",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.page=r)})("pageChange",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.pageChange(r))}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(25),e.\u0275\u0275property("ngForOf",t.loanList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}function P(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Status is required."),e.\u0275\u0275elementEnd())}function k(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",87),e.\u0275\u0275template(1,P,2,0,"small",88),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("status"))||null==a.errors?null:a.errors.required)}}function A(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Approved Loan Amount is required."),e.\u0275\u0275elementEnd())}function V(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number."),e.\u0275\u0275elementEnd())}function j(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",87),e.\u0275\u0275template(1,A,2,0,"small",88),e.\u0275\u0275template(2,V,2,0,"small",88),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);let a,r;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("requested_loan_amount"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(r=t.statusFormGroup.get("requested_loan_amount"))||null==r.errors?null:r.errors.pattern)}}function M(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Approved Loan Amount is required."),e.\u0275\u0275elementEnd())}function $(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number."),e.\u0275\u0275elementEnd())}function D(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",87),e.\u0275\u0275template(1,M,2,0,"small",88),e.\u0275\u0275template(2,$,2,0,"small",88),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);let a,r;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("approved_loan_amount"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(r=t.statusFormGroup.get("approved_loan_amount"))||null==r.errors?null:r.errors.pattern)}}function z(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Interest Rate is required."),e.\u0275\u0275elementEnd())}function B(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number (e.g. 5, 7.25)."),e.\u0275\u0275elementEnd())}function O(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",87),e.\u0275\u0275template(1,z,2,0,"small",88),e.\u0275\u0275template(2,B,2,0,"small",88),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);let a,r;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("interest_rate"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(r=t.statusFormGroup.get("interest_rate"))||null==r.errors?null:r.errors.pattern)}}function U(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Start Date is required."),e.\u0275\u0275elementEnd())}function J(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",87),e.\u0275\u0275template(1,U,2,0,"small",88),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("start_date"))||null==a.errors?null:a.errors.required)}}function Y(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Penalty is required."),e.\u0275\u0275elementEnd())}function K(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number (e.g. 2, 3.5)."),e.\u0275\u0275elementEnd())}function H(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",87),e.\u0275\u0275template(1,Y,2,0,"small",88),e.\u0275\u0275template(2,K,2,0,"small",88),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);let a,r;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("penalty"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(r=t.statusFormGroup.get("penalty"))||null==r.errors?null:r.errors.pattern)}}function Q(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Indirect referral amount is required."),e.\u0275\u0275elementEnd())}function W(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function X(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",87),e.\u0275\u0275template(1,Q,2,0,"small",88),e.\u0275\u0275template(2,W,2,0,"small",88),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);let a,r;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("franchise_refer_per"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(r=t.statusFormGroup.get("franchise_refer_per"))||null==r.errors?null:r.errors.min)}}function Z(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Indirect referral amount is required."),e.\u0275\u0275elementEnd())}function ee(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function te(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",87),e.\u0275\u0275template(1,Z,2,0,"small",88),e.\u0275\u0275template(2,ee,2,0,"small",88),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);let a,r;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("indirect_refer_per"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(r=t.statusFormGroup.get("indirect_refer_per"))||null==r.errors?null:r.errors.min)}}function ne(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Direct referral % is required."),e.\u0275\u0275elementEnd())}function ae(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function re(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",87),e.\u0275\u0275template(1,ne,2,0,"small",88),e.\u0275\u0275template(2,ae,2,0,"small",88),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);let a,r;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("direct_refer_per"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(r=t.statusFormGroup.get("direct_refer_per"))||null==r.errors?null:r.errors.min)}}function oe(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",53)(1,"h5",54),e.\u0275\u0275text(2,"Approve/Reject Loan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",55),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",7)(5,"div",56)(6,"div",2)(7,"div",57)(8,"div",58)(9,"label"),e.\u0275\u0275text(10,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",59)(12,"div",60),e.\u0275\u0275element(13,"input",61),e.\u0275\u0275elementStart(14,"label",62),e.\u0275\u0275text(15,"Approved"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",60),e.\u0275\u0275element(17,"input",63),e.\u0275\u0275elementStart(18,"label",64),e.\u0275\u0275text(19,"Rejected"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(20,k,2,1,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",2)(22,"div",66)(23,"label",67),e.\u0275\u0275text(24,"Requested Loan Amount (\u20b9)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(25,"input",68),e.\u0275\u0275template(26,j,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",66)(28,"label",69),e.\u0275\u0275text(29,"Approved Loan Amount (\u20b9)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(30,"input",70),e.\u0275\u0275template(31,D,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",66)(33,"label",71),e.\u0275\u0275text(34,"Interest Rate (%)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(35,"input",72),e.\u0275\u0275template(36,O,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"div",66)(38,"label",73),e.\u0275\u0275text(39,"Start Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(40,"input",74),e.\u0275\u0275template(41,J,2,1,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"div",66)(43,"label",75),e.\u0275\u0275text(44,"Penalty (\u20b9)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(45,"input",76),e.\u0275\u0275template(46,H,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",77)(48,"label",78),e.\u0275\u0275text(49,"Franchise Referral %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(50,"input",79),e.\u0275\u0275template(51,X,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"div",77)(53,"label",80),e.\u0275\u0275text(54,"Indirect Referral %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(55,"input",81),e.\u0275\u0275template(56,te,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"div",77)(58,"label",82),e.\u0275\u0275text(59,"Direct Referral %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(60,"input",83),e.\u0275\u0275template(61,re,3,2,"div",65),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(62,"div",84)(63,"button",85),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.close("Close click"))}),e.\u0275\u0275text(64,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(65,"button",86),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.submit())}),e.\u0275\u0275text(66,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext();let a,r,i,d,p,c,v,x,h;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.statusFormGroup),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngIf",(null==(a=t.statusFormGroup.get("status"))?null:a.touched)&&(null==(a=t.statusFormGroup.get("status"))?null:a.invalid)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==(r=t.statusFormGroup.get("requested_loan_amount"))?null:r.touched)&&(null==(r=t.statusFormGroup.get("requested_loan_amount"))?null:r.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(i=t.statusFormGroup.get("approved_loan_amount"))?null:i.touched)&&(null==(i=t.statusFormGroup.get("approved_loan_amount"))?null:i.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(d=t.statusFormGroup.get("interest_rate"))?null:d.touched)&&(null==(d=t.statusFormGroup.get("interest_rate"))?null:d.invalid)),e.\u0275\u0275advance(4),e.\u0275\u0275property("min",t.minDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(p=t.statusFormGroup.get("start_date"))?null:p.touched)&&(null==(p=t.statusFormGroup.get("start_date"))?null:p.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(c=t.statusFormGroup.get("penalty"))?null:c.touched)&&(null==(c=t.statusFormGroup.get("penalty"))?null:c.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(v=t.statusFormGroup.get("franchise_refer_per"))?null:v.touched)&&(null==(v=t.statusFormGroup.get("franchise_refer_per"))?null:v.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(x=t.statusFormGroup.get("indirect_refer_per"))?null:x.touched)&&(null==(x=t.statusFormGroup.get("indirect_refer_per"))?null:x.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(h=t.statusFormGroup.get("direct_refer_per"))?null:h.touched)&&(null==(h=t.statusFormGroup.get("direct_refer_per"))?null:h.invalid)),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.statusFormGroup.invalid)}}function le(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"a",46),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction4(2,b,"Approved"===t.selectedLoan.status||"Completed"===t.selectedLoan.status,"Requested"===t.selectedLoan.status,"Rejected"===t.selectedLoan.status||"Defaulted"===t.selectedLoan.status,"Pending"===t.selectedLoan.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.selectedLoan.status," ")}}function ie(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",53)(1,"h5",54),e.\u0275\u0275text(2,"Loan Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",55),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",56)(5,"div",34)(6,"table",89)(7,"tbody")(8,"tr")(9,"th")(10,"strong"),e.\u0275\u0275text(11,"User Name"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"tr")(15,"th")(16,"strong"),e.\u0275\u0275text(17,"User ID"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"td"),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"tr")(21,"th")(22,"strong"),e.\u0275\u0275text(23,"Requested Loan Amount"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"td"),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"tr")(27,"th")(28,"strong"),e.\u0275\u0275text(29,"Approved Loan Amount"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"td"),e.\u0275\u0275text(31),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"tr")(33,"th")(34,"strong"),e.\u0275\u0275text(35,"Interest Rate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"td"),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"tr")(39,"th")(40,"strong"),e.\u0275\u0275text(41,"Duration"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"td"),e.\u0275\u0275text(43),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"tr")(45,"th")(46,"strong"),e.\u0275\u0275text(47,"EMI Type"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(48,"td"),e.\u0275\u0275text(49),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(50,"tr")(51,"th")(52,"strong"),e.\u0275\u0275text(53,"Loan Type"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(54,"td"),e.\u0275\u0275text(55),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(56,"tr")(57,"th")(58,"strong"),e.\u0275\u0275text(59,"Purpose"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(60,"td"),e.\u0275\u0275text(61),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(62,"tr")(63,"th")(64,"strong"),e.\u0275\u0275text(65,"Status"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(66,"td"),e.\u0275\u0275template(67,le,2,7,"a",42),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(68,"div",84)(69,"button",85),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.close("Close click"))}),e.\u0275\u0275text(70,"Close"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(13),e.\u0275\u0275textInterpolate(t.selectedLoan.user.name),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.selectedLoan.user.user_id),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1("\u20b9",t.selectedLoan.requested_loan_amount,""),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1("\u20b9",t.selectedLoan.approved_loan_amount,""),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1("",t.selectedLoan.interest_rate," %"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1("",t.selectedLoan.duration," days"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.selectedLoan.interval),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.selectedLoan.loan_type),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.selectedLoan.purpose),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.selectedLoan.status)}}let me=(()=>{class n{constructor(t,a,r){this.loanService=t,this.modalService=a,this.route=r,this.loanList=[],this.total=0,this.loanType="",this.page=1,this.pageSize=10,this.queryParams="",this.status=["Pending","Approved","Rejected","Completed","Defaulted"],this.route.paramMap.subscribe(i=>{this.loanType=i.get("type")||"",console.log("Plan from route:",this.loanType)})}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"Requested Loan",active:!0}];const t=new Date,a=new Date;a.setDate(t.getDate()+1),this.minDate=a.toISOString().split("T")[0],this.statusFormGroup=new o.cw({_id:new o.NI(null,o.kI.required),status:new o.NI("",o.kI.required),interest_rate:new o.NI(null,[o.kI.required,o.kI.min(0),o.kI.max(100)]),requested_loan_amount:new o.NI({value:"",disabled:!0}),approved_loan_amount:new o.NI(null,[o.kI.required,o.kI.min(0)]),start_date:new o.NI(null,o.kI.required),penalty:new o.NI(null,[o.kI.min(0),o.kI.max(100)]),franchise_refer_per:new o.NI(null,[o.kI.required,o.kI.min(0),o.kI.max(100)]),direct_refer_per:new o.NI(null,[o.kI.required,o.kI.min(0),o.kI.max(100)]),indirect_refer_per:new o.NI(null,[o.kI.required,o.kI.min(0),o.kI.max(100)])}),this.searchFormGroup=new o.cw({name:new o.NI(""),loan_type:new o.NI(this.loanType),status:new o.NI("Pending"),interval:new o.NI("")}),this.getLoanList()}refresh(){this.page=1,this.searchFormGroup.reset(),this.searchFormGroup.patchValue({status:"Pending",loan_type:"",name:"",interval:""}),this.getLoanList()}openLoanModal(t,a){this.modalService.open(t,{size:"lg",backdrop:"static"}),this.statusFormGroup.reset(),this.statusFormGroup.patchValue({_id:a._id,requested_loan_amount:a.requested_loan_amount})}submit(){if(this.statusFormGroup.invalid)return;const t={...this.statusFormGroup.value};this.loanService.updateLoanStatus(t._id,t).subscribe({next:a=>{console.log("Loan status updated successfully:",a),C().fire({title:"Success",text:`Loan status updated to ${t.status}`,icon:"success",confirmButtonText:"OK"}),this.statusFormGroup.reset(),this.selectedLoan=null,this.modalService.dismissAll(),this.getLoanList()},error:a=>{console.error("Error updating loan status:",a)}})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getLoanList()}search(){const t=this.searchFormGroup.value,a=[];Object.keys(t).forEach(r=>{null!==t[r]&&""!==t[r]&&a.push(`${r}=${encodeURIComponent(t[r])}`)}),this.queryParams=a.join("&")}getLoanList(){this.loanService.getLoanList(this.page,this.pageSize,this.queryParams).subscribe({next:t=>{console.log("Loan list fetched successfully:",t),this.loanList=t.data.loans,this.total=t.data.total},error:t=>{console.error("Error fetching loan list:",t)}})}viewLoan(t,a){this.selectedLoan=a,this.modalService.open(t,{backdrop:"static"})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(f),e.\u0275\u0275directiveInject(_.FF),e.\u0275\u0275directiveInject(y.gz))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-loan-requested"]],decls:48,vars:5,consts:[[1,"container-fluid"],["title","Requested Loan",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-4"],["type","search","id","searchInput","placeholder","Search for Name / User Id / Email id...","formControlName","name",1,"form-control"],[1,"col-lg-2"],["formControlName","loan_type",1,"form-control"],["value",""],["value","Personal"],["value","Garanteed"],["formControlName","interval",1,"form-control"],["value","Daily"],["value","Monthly"],["formControlName","status",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-lg-1"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],["role","document"],["loanModal",""],["loanViewModal",""],[3,"ngValue"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["href","javascript: void(0);","class","badge font-size-11 m-1",3,"ngClass",4,"ngIf"],[1,"list-inline","font-size-20","contact-links","mb-0"],["data-bs-toggle","modal","data-bs-target","#myModal","class","list-inline-item px-2",3,"click",4,"ngIf"],["class","list-inline-item px-2",4,"ngIf"],["href","javascript: void(0);",1,"badge","font-size-11","m-1",3,"ngClass"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"list-inline-item","px-2",3,"click"],["href","javascript:void(0);","tooltip","Message"],[1,"bx","bx-check-double"],[1,"list-inline-item","px-2"],["tooltip","Profile",3,"click"],[1,"bx","bx-detail"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-md-12"],[1,"form-group","mb-3"],[1,"d-flex","align-items-center","gap-3"],[1,"form-check","form-check-inline"],["type","radio","id","status_approved","value","Approved","formControlName","status",1,"form-check-input"],["for","status_approved",1,"form-check-label"],["type","radio","id","status_rejected","value","Rejected","formControlName","status",1,"form-check-input"],["for","status_rejected",1,"form-check-label"],["class","text-danger",4,"ngIf"],[1,"form-group","mb-3","col-lg-6"],["for","requested_loan_amount"],["type","number","id","requested_loan_amount","formControlName","requested_loan_amount","placeholder","Enter approved amount",1,"form-control"],["for","approved_loan_amount"],["type","number","id","approved_loan_amount","formControlName","approved_loan_amount","placeholder","Enter approved amount",1,"form-control"],["for","interest_rate"],["type","number","id","interest_rate","formControlName","interest_rate","placeholder","Enter interest rate",1,"form-control"],["for","start_date"],["type","date","id","start_date","formControlName","start_date",1,"form-control",3,"min"],["for","penalty"],["type","number","id","penalty","formControlName","penalty","placeholder","Enter penalty percentage",1,"form-control"],[1,"col-md-6","mb-3"],["for","franchiseReferral",1,"form-label"],["type","number","id","franchiseReferral","formControlName","franchise_refer_per","placeholder","Enter indirect referral",1,"form-control"],["for","indirectReferral",1,"form-label"],["type","number","id","indirectReferral","formControlName","indirect_refer_per","placeholder","Enter indirect referral",1,"form-control"],["for","directReferral",1,"form-label"],["type","number","id","directReferral","formControlName","direct_refer_per","placeholder","Enter direct referral",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light",3,"disabled","click"],[1,"text-danger"],[4,"ngIf"],[1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",10)(12,"select",11),e.\u0275\u0275text(13," > "),e.\u0275\u0275elementStart(14,"option",12),e.\u0275\u0275text(15,"Select Loan Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"option",13),e.\u0275\u0275text(17,"Personal"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"option",14),e.\u0275\u0275text(19,"Garanteed"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"div",10)(21,"select",15),e.\u0275\u0275text(22," > "),e.\u0275\u0275elementStart(23,"option",12),e.\u0275\u0275text(24,"Select EMI Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"option",16),e.\u0275\u0275text(26,"Daily"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"option",17),e.\u0275\u0275text(28,"Monthly"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(29,"div",10)(30,"select",18)(31,"option",12),e.\u0275\u0275text(32,"Select Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(33,T,2,2,"option",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",20)(35,"button",21),e.\u0275\u0275listener("click",function(){return a.getLoanList()}),e.\u0275\u0275element(36,"i",22),e.\u0275\u0275text(37," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",20)(39,"button",23),e.\u0275\u0275listener("click",function(){return a.refresh()}),e.\u0275\u0275element(40,"i",24),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(41,"div",2),e.\u0275\u0275template(42,F,4,0,"div",25),e.\u0275\u0275template(43,R,36,7,"div",26),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(44,oe,67,12,"ng-template",27,28,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(46,ie,71,10,"ng-template",27,29,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",a.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",a.searchFormGroup),e.\u0275\u0275advance(26),e.\u0275\u0275property("ngForOf",a.status),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",!a.loanList||0===a.loanList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==a.loanList.length))},dependencies:[s.NgClass,s.NgForOf,s.NgIf,g.V,_.N9,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o._,o.JJ,o.JL,o.sg,o.u]}),n})();function se(n,l){1&n&&(e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275element(1,"img",31),e.\u0275\u0275elementStart(2,"p",32),e.\u0275\u0275text(3,"No Transanction found in the current filter."),e.\u0275\u0275elementEnd()())}const de=function(n,l,t,a){return{"badge-soft-primary":n,"badge-soft-info":l,"badge-soft-warning":t,"badge-soft-dark":a}};function pe(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"a",43),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction4(4,de,"credit"===t.transaction_type,"interest"===t.transaction_type,"debit"===t.transaction_type,"ccredit"===t.transaction_type)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,t.transaction_type)," ")}}function ce(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementStart(5,"b"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" Principal Amount : \u20b9",t.principal_component," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" Interest Amount : \u20b9",t.interest_component," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Amount : \u20b9",t.amount," ")}}function ue(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" \u20b9",t.amount," ")}}function _e(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,"")}}function fe(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,"")}}function ge(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275template(10,pe,3,9,"a",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275template(12,ce,7,3,"div",42),e.\u0275\u0275template(13,ue,2,1,"div",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275template(15,_e,2,1,"span",42),e.\u0275\u0275template(16,fe,2,1,"span",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"date"),e.\u0275\u0275elementEnd()()),2&n){const t=l.$implicit,a=l.index,r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((r.page-1)*r.pageSize+a+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.user.name," (",t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.loan.loan_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.transaction_id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.transaction_type),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","interest"===t.transaction_type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","credit"===t.transaction_type),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","debit"===t.transaction_type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","ccredit"===t.transaction_type),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.payment_method),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(21,12,t.transaction_date,"medium"))}}function ve(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",33)(1,"table",34)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Loan ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Transanction Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Transanction Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Credit Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Debit Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"th"),e.\u0275\u0275text(19,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"th"),e.\u0275\u0275text(21,"Date"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(22,"tbody"),e.\u0275\u0275template(23,ge,22,15,"tr",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",36)(25,"div",37)(26,"div",38),e.\u0275\u0275text(27,"Showing "),e.\u0275\u0275elementStart(28,"b"),e.\u0275\u0275text(29),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",37)(32,"div",39)(33,"ngb-pagination",40),e.\u0275\u0275listener("pageChange",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.page=r)})("pageChange",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.pageChange(r))}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(23),e.\u0275\u0275property("ngForOf",t.transanctionList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}let xe=(()=>{class n{constructor(t){this.loanService=t,this.transanctionList=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"User Loan Transanction",active:!0}],this.searchFormGroup=new o.cw({name:new o.NI(""),loan_id:new o.NI(""),transaction_id:new o.NI(""),transaction_type:new o.NI(""),payment_method:new o.NI(""),transaction_date:new o.NI("")}),this.getTransanctionList()}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getTransanctionList()}getTransanctionList(){const t=this.searchFormGroup.value,a=[];Object.keys(t).forEach(i=>{null!==t[i]&&""!==t[i]&&a.push(`${i}=${encodeURIComponent(t[i])}`)});const r=a.join("&");this.loanService.getUserTransaction(this.page,this.pageSize,r).subscribe(i=>{this.transanctionList=i.data.userTransaction,this.total=i.data.total})}refresh(){this.page=1,this.searchFormGroup.reset(),this.getTransanctionList()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(f))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-loan-transanction"]],decls:49,vars:4,consts:[[1,"container-fluid"],["title","Transanction History",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-2"],["type","search","id","searchInput","placeholder","Search for Name / User Id / Email id...","formControlName","name",1,"form-control"],["type","search","id","searchInput","placeholder","Search for Loan Number","formControlName","loan_id",1,"form-control"],["type","search","id","searchInput","placeholder","Search for Transanction Id..","formControlName","transaction_id",1,"form-control"],[1,"col-lg-1"],["formControlName","transaction_type",1,"form-control"],["value",""],["value","credit"],["value","debit"],["value","interest"],["formControlName","payment_method",1,"form-control"],["value","EMI"],["value","Bank Transfer"],["value","Cash"],["value","Cheque"],["type","date","id","searchInput","formControlName","transaction_date",1,"form-control"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["href","javascript: void(0);","class","badge font-size-11 m-1",3,"ngClass",4,"ngIf"],[4,"ngIf"],["href","javascript: void(0);",1,"badge","font-size-11","m-1",3,"ngClass"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",8),e.\u0275\u0275element(12,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",8),e.\u0275\u0275element(14,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",12)(16,"select",13)(17,"option",14),e.\u0275\u0275text(18,"Transanction Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"option",15),e.\u0275\u0275text(20,"Credit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"option",16),e.\u0275\u0275text(22,"Debit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"option",17),e.\u0275\u0275text(24,"Interest"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(25,"div",12)(26,"select",18)(27,"option",14),e.\u0275\u0275text(28,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"option",19),e.\u0275\u0275text(30,"EMI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"option",20),e.\u0275\u0275text(32,"Bank Transfer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"option",21),e.\u0275\u0275text(34,"Cash"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"option",22),e.\u0275\u0275text(36,"Cheque"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"div",8),e.\u0275\u0275element(38,"input",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",12)(40,"button",24),e.\u0275\u0275listener("click",function(){return a.getTransanctionList()}),e.\u0275\u0275element(41,"i",25),e.\u0275\u0275text(42," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"div",12)(44,"button",26),e.\u0275\u0275listener("click",function(){return a.refresh()}),e.\u0275\u0275element(45,"i",27),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(46,"div",2),e.\u0275\u0275template(47,se,4,0,"div",28),e.\u0275\u0275template(48,ve,34,7,"div",29),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",a.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",a.searchFormGroup),e.\u0275\u0275advance(40),e.\u0275\u0275property("ngIf",!a.transanctionList||0===a.transanctionList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==a.transanctionList.length))},dependencies:[s.NgClass,s.NgForOf,s.NgIf,g.V,_.N9,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.sg,o.u,s.TitleCasePipe,s.DatePipe]}),n})();function he(n,l){1&n&&(e.\u0275\u0275elementStart(0,"div",29),e.\u0275\u0275element(1,"img",30),e.\u0275\u0275elementStart(2,"p",31),e.\u0275\u0275text(3,"No Transanction found in the current filter."),e.\u0275\u0275elementEnd()())}function ye(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()()),2&n){const t=l.$implicit,a=l.index,r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((r.page-1)*r.pageSize+a+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.user.name," (",t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.loan.loan_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(11,7,t.transaction_date,"medium")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.description," ")}}function Se(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Loan ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Description"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"tbody"),e.\u0275\u0275template(17,ye,14,10,"tr",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",35)(19,"div",36)(20,"div",37),e.\u0275\u0275text(21,"Showing "),e.\u0275\u0275elementStart(22,"b"),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",36)(26,"div",38)(27,"ngb-pagination",39),e.\u0275\u0275listener("pageChange",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.page=r)})("pageChange",function(r){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.pageChange(r))}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(17),e.\u0275\u0275property("ngForOf",t.transanctionList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}let be=(()=>{class n{constructor(t){this.loanService=t,this.transanctionList=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"Admin Loan Transanction",active:!0}],this.searchFormGroup=new o.cw({name:new o.NI(""),transaction_id:new o.NI(""),transaction_type:new o.NI(""),payment_method:new o.NI(""),transaction_date:new o.NI("")}),this.getTransanctionList()}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getTransanctionList()}getTransanctionList(){const t=this.searchFormGroup.value,a=[];Object.keys(t).forEach(i=>{null!==t[i]&&""!==t[i]&&a.push(`${i}=${encodeURIComponent(t[i])}`)});const r=a.join("&");this.loanService.getAdminTransaction(this.page,this.pageSize,r).subscribe(i=>{this.transanctionList=i.data.adminTransanction,this.total=i.data.total})}refresh(){this.searchFormGroup.reset(),this.page=1,this.getTransanctionList()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(f))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-admin-loan-transanction"]],decls:45,vars:4,consts:[[1,"container-fluid"],["title","Transanction History",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-4"],["type","search","id","searchInput","placeholder","Search for Name / User Id / Email id...","formControlName","name",1,"form-control"],[1,"col-lg-2"],["type","search","id","searchInput","placeholder","Search for Transanction Id..","formControlName","transaction_id",1,"form-control"],[1,"col-lg-1"],["formControlName","transaction_type",1,"form-control"],["value",""],["value","credit"],["value","debit"],["formControlName","payment_method",1,"form-control"],["value","EMI"],["value","Bank Transfer"],["value","Cash"],["value","Cheque"],["type","date","id","searchInput","formControlName","transaction_date",1,"form-control"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",10),e.\u0275\u0275element(12,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",12)(14,"select",13)(15,"option",14),e.\u0275\u0275text(16,"Transanction Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"option",15),e.\u0275\u0275text(18,"Credit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"option",16),e.\u0275\u0275text(20,"Debit"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"div",12)(22,"select",17)(23,"option",14),e.\u0275\u0275text(24,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"option",18),e.\u0275\u0275text(26,"EMI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"option",19),e.\u0275\u0275text(28,"Bank Transfer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"option",20),e.\u0275\u0275text(30,"Cash"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"option",21),e.\u0275\u0275text(32,"Cheque"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(33,"div",10),e.\u0275\u0275element(34,"input",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",12)(36,"button",23),e.\u0275\u0275listener("click",function(){return a.getTransanctionList()}),e.\u0275\u0275element(37,"i",24),e.\u0275\u0275text(38," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"div",12)(40,"button",25),e.\u0275\u0275listener("click",function(){return a.refresh()}),e.\u0275\u0275element(41,"i",26),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(42,"div",2),e.\u0275\u0275template(43,he,4,0,"div",27),e.\u0275\u0275template(44,Se,28,7,"div",28),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",a.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",a.searchFormGroup),e.\u0275\u0275advance(36),e.\u0275\u0275property("ngIf",!a.transanctionList||0===a.transanctionList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==a.transanctionList.length))},dependencies:[s.NgForOf,s.NgIf,g.V,_.N9,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.sg,o.u,s.DatePipe]}),n})();var Ie=m(8386),Ee=m(7185),I=m(139);function Ce(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"User ID is required."),e.\u0275\u0275elementEnd())}function Le(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,Ce,2,0,"small",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("id"))||null==a.errors?null:a.errors.required)}}function Te(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",25)(1,"small")(2,"strong"),e.\u0275\u0275text(3,"Name:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.userDetails.name,"")}}function Fe(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Loan ID is required."),e.\u0275\u0275elementEnd())}function we(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,Fe,2,0,"small",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("loanId"))||null==a.errors?null:a.errors.required)}}function qe(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Amount is required."),e.\u0275\u0275elementEnd())}function Ne(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Amount must be at least 1."),e.\u0275\u0275elementEnd())}function Ge(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,qe,2,0,"small",24),e.\u0275\u0275template(2,Ne,2,0,"small",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a,r;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("amount"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(r=t.paymentFormGroup.get("amount"))||null==r.errors?null:r.errors.min)}}function Re(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",25)(1,"small")(2,"strong"),e.\u0275\u0275text(3,"Total Bill Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" \u20b9",t.totalPayableAmount,"")}}function Pe(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"option",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=l.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function ke(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Payment Method is required."),e.\u0275\u0275elementEnd())}function Ae(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,ke,2,0,"small",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("paymentMethod"))||null==a.errors?null:a.errors.required)}}function Ve(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Transanction Id is required."),e.\u0275\u0275elementEnd())}function je(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,Ve,2,0,"small",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("transactionId"))||null==a.errors?null:a.errors.required)}}const Me=[{path:"loans/:type",component:me},{path:"pay-loan",component:(()=>{class n{constructor(t,a,r){this.userService=t,this.loanService=a,this.toast=r,this.userDetails=null,this.loanList=[],this.paymentMethods=["Cash","Bank Transfer","Cash","Cheque"],this.totalPayableAmount=0}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"Pay Loans",active:!0}],this.paymentFormGroup=new o.cw({id:new o.NI("",o.kI.required),loanId:new o.NI("",o.kI.required),amount:new o.NI("",[o.kI.required,o.kI.min(1)]),paymentMethod:new o.NI("",o.kI.required),transactionId:new o.NI("",o.kI.required)})}getDetails(){!this.paymentFormGroup.value.id||this.userService.getBasicUserProfile(this.paymentFormGroup.value.id).subscribe({next:t=>{t.status&&(this.userDetails=t?.data?.user,this.getAllLoans(this.userDetails._id))},error:t=>{console.error("Error fetching user details:",t)}})}getTotalPaybleAmount(t){this.loanService.getTotalPaymentAmount(t._id).subscribe({next:a=>{console.log("Total Payment Amount:",a),a.status?this.totalPayableAmount=a?.data?.outstandingAmount:console.error("Error fetching total payment amount:",a.message)},error:a=>{console.error("Error fetching total payment amount:",a)}})}getAllLoans(t){this.loanService.getAllUserActiveLoans(t).subscribe({next:a=>{a.status?this.loanList=a?.data?.loans.map(r=>({_id:r._id,label:`${r.loan_id} Amount: ${r.approved_loan_amount} Purpose: ${r.purpose}`})):console.error("Error fetching loans:",a.message)},error:a=>{console.error("Error fetching loans:",a)}})}payLoanFees(){if(this.paymentFormGroup.invalid)return void console.error("Payment form is invalid");const t={...this.paymentFormGroup.value};t.amount=parseFloat(t.amount),t.amount<=0?this.toast.error("Amount must be greater than zero"):t.amount>this.totalPayableAmount?this.toast.error("Amount exceeds total payable amount"):this.loanService.recordPayment(t).subscribe({next:a=>{a.status?(this.toast.success("Payment recorded successfully"),this.paymentFormGroup.reset(),this.totalPayableAmount=0):this.toast.success("Error recording payment:")},error:a=>{this.toast.success("Error recording payment:")}})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(Ie.i),e.\u0275\u0275directiveInject(f),e.\u0275\u0275directiveInject(Ee._W))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-pay-loan"]],decls:38,vars:14,consts:[[1,"container-fluid"],["title","Pay Loan",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-12",3,"formGroup"],[1,"mb-3","col-lg-12"],["for","userId",1,"form-label"],["type","text","id","userId","formControlName","id","placeholder","Enter user ID",1,"form-control",3,"blur"],["class","text-danger",4,"ngIf"],["class","mt-1",4,"ngIf"],["for","cardId",1,"form-label"],["formControlName","loanId",3,"items","bindValue","bindLabel","change"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter amount","min","1",1,"form-control"],[1,"mb-3","col-lg-6"],["for","paymentMethod",1,"form-label"],["id","paymentMethod","formControlName","paymentMethod",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],["for","transactionId",1,"form-label"],["type","text","id","transactionId","formControlName","transactionId","placeholder","Enter Transanction Id","min","1",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"text-danger"],[4,"ngIf"],[1,"mt-1"],[3,"ngValue"]],template:function(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",2)(8,"div",7)(9,"label",8),e.\u0275\u0275text(10,"User ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"input",9),e.\u0275\u0275listener("blur",function(){return a.getDetails()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,Le,2,1,"div",10),e.\u0275\u0275template(13,Te,5,1,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",7)(15,"label",12),e.\u0275\u0275text(16,"Loan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"ng-select",13),e.\u0275\u0275listener("change",function(i){return a.getTotalPaybleAmount(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,we,2,1,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",7)(20,"label",14),e.\u0275\u0275text(21,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(22,"input",15),e.\u0275\u0275template(23,Ge,3,2,"div",10),e.\u0275\u0275template(24,Re,5,1,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",16)(26,"label",17),e.\u0275\u0275text(27,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"select",18),e.\u0275\u0275template(29,Pe,2,2,"option",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(30,Ae,2,1,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",16)(32,"label",20),e.\u0275\u0275text(33,"Transanction Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"input",21),e.\u0275\u0275template(35,je,2,1,"div",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"button",22),e.\u0275\u0275listener("click",function(){return a.payLoanFees()}),e.\u0275\u0275text(37,"Submit"),e.\u0275\u0275elementEnd()()()()()()()),2&t){let r,i,d,p,c;e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",a.breadCrumbItems),e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",a.paymentFormGroup),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==(r=a.paymentFormGroup.get("id"))?null:r.touched)&&(null==(r=a.paymentFormGroup.get("id"))?null:r.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.userDetails),e.\u0275\u0275advance(4),e.\u0275\u0275property("items",a.loanList)("bindValue","_id")("bindLabel","label"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(i=a.paymentFormGroup.get("loanId"))?null:i.touched)&&(null==(i=a.paymentFormGroup.get("loanId"))?null:i.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(d=a.paymentFormGroup.get("amount"))?null:d.touched)&&(null==(d=a.paymentFormGroup.get("amount"))?null:d.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.userDetails),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",a.paymentMethods),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(p=a.paymentFormGroup.get("paymentMethod"))?null:p.touched)&&(null==(p=a.paymentFormGroup.get("paymentMethod"))?null:p.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(c=a.paymentFormGroup.get("transactionId"))?null:c.touched)&&(null==(c=a.paymentFormGroup.get("transactionId"))?null:c.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",a.paymentFormGroup.invalid)}},dependencies:[s.NgForOf,s.NgIf,g.V,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.qQ,o.sg,o.u,I.w9]}),n})()},{path:"user-transanction",component:xe},{path:"admin-transanction",component:be}];let $e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[y.Bz.forChild(Me),y.Bz]}),n})();var De=m(9668);let ze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule,De.v,_.jF,o.UX,I.A0,$e]}),n})()}}]);
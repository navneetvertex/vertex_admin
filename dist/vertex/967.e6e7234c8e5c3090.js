"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[967],{6967:(j,p,l)=>{l.r(p),l.d(p,{PaymentsModule:()=>L});var d=l(6895),c=l(9158),s=l(4006),e=l(4650),f=l(8386),h=l(7185),v=l(9234),u=l(9061);function x(n,o){1&n&&e.\u0275\u0275element(0,"i",22)}function y(n,o){1&n&&e.\u0275\u0275element(0,"i",23)}function _(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275element(1,"img",25),e.\u0275\u0275elementStart(2,"p",26),e.\u0275\u0275text(3,"No Payment Request in current filter."),e.\u0275\u0275elementEnd()())}function b(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.active_bank_details[0].account_number)}}function S(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.active_bank_details[0].bank_name)}}function C(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.active_bank_details[0].branch_name)}}function I(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.active_bank_details[0].ifsc_code)}}function E(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275element(5,"br"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275template(12,b,2,1,"span",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td"),e.\u0275\u0275template(14,S,2,1,"span",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275template(16,C,2,1,"span",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td"),e.\u0275\u0275template(18,I,2,1,"span",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td"),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"td"),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"date"),e.\u0275\u0275elementEnd()()),2&n){const t=o.$implicit,r=o.index,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((i.page-1)*i.pageSize+r+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null==t||null==t.user?null:t.user.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",(null==t||null==t.user?null:t.user.user_id)||"-"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.amount),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.type),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0!==t.active_bank_details.length),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0!==t.active_bank_details.length),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0!==t.active_bank_details.length),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0!==t.active_bank_details.length),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.message||"-"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(23,11,t.createdAt,"dd MMM yyyy"))}}function P(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",27)(1,"table",28)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Account Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Bank Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Branch Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"th"),e.\u0275\u0275text(19,"IFSC Code"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"th"),e.\u0275\u0275text(21,"Comments"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"th"),e.\u0275\u0275text(23,"Date"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"tbody"),e.\u0275\u0275template(25,E,24,14,"tr",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",30)(27,"div",31)(28,"div",32),e.\u0275\u0275text(29,"Showing "),e.\u0275\u0275elementStart(30,"b"),e.\u0275\u0275text(31),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",31)(34,"div",33)(35,"ngb-pagination",34),e.\u0275\u0275listener("pageChange",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.page=i)})("pageChange",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.pageChange(i))}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(25),e.\u0275\u0275property("ngForOf",t.paymentList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}const T=[{path:"",component:(()=>{class n{constructor(t,r){this.userService=t,this.toast=r,this.paymentList=[],this.total=0,this.page=1,this.pageSize=10,this.exportLoading=!1}ngOnInit(){this.breadCrumbItems=[{label:"Transfer Request"},{label:"Lists",active:!0}],this.searchFormGroup=new s.cw({name:new s.NI(""),date:new s.NI("")}),this.getBankTransferRequests()}getBankTransferRequests(){const t=this.searchFormGroup.value,r=[];Object.keys(t).forEach(a=>{null!==t[a]&&""!==t[a]&&r.push(`${a}=${encodeURIComponent(t[a])}`)});const i=r.join("&");this.userService.getAllTransferRequests(this.page,this.pageSize,i).subscribe({next:a=>{console.log("Bank Transfer Requests:",a.data.results),this.paymentList=a.data.results,this.total=a.data.total,this.page=a.data.page||1,this.pageSize=a.data.limit||10},error:a=>{console.error("Error fetching bank transfer requests:",a)}})}reset(){this.page=1,this.searchFormGroup.reset(),this.getBankTransferRequests()}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getBankTransferRequests()}exportToExcel(){const t=this.searchFormGroup.value,r=[];Object.keys(t).forEach(a=>{null!==t[a]&&""!==t[a]&&r.push(`${a}=${encodeURIComponent(t[a])}`)});const i=r.join("&");this.exportLoading=!0,this.userService.exportTransferRequests(i).subscribe({next:a=>{const R=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),g=window.URL.createObjectURL(R),m=document.createElement("a");m.href=g,m.download=`transfer_requests_${(new Date).toISOString().split("T")[0]}.xlsx`,document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(g),this.toast.success("Transfer requests exported successfully"),this.exportLoading=!1},error:a=>{console.error("Error exporting transfer requests:",a),this.toast.error("Failed to export transfer requests"),this.exportLoading=!1}})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(f.i),e.\u0275\u0275directiveInject(h._W))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-payments"]],decls:28,vars:7,consts:[[1,"container-fluid"],["title","Payments",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-5"],["type","search","id","searchInput","formControlName","name","placeholder","Search for Name/User ID...",1,"form-control"],[1,"col-lg-4"],["type","date","id","searchInput","formControlName","date","placeholder","Search for User id...",1,"form-control"],[1,"col-lg-1"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["type","button",1,"btn","btn-soft-success","w-100",3,"disabled","click"],["class","mdi mdi-file-excel align-middle",4,"ngIf"],["class","mdi mdi-loading mdi-spin align-middle",4,"ngIf"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"mdi","mdi-file-excel","align-middle"],[1,"mdi","mdi-loading","mdi-spin","align-middle"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],[4,"ngIf"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",10),e.\u0275\u0275element(12,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",12)(14,"button",13),e.\u0275\u0275listener("click",function(){return r.getBankTransferRequests()}),e.\u0275\u0275element(15,"i",14),e.\u0275\u0275text(16," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"div",12)(18,"button",15),e.\u0275\u0275listener("click",function(){return r.reset()}),e.\u0275\u0275element(19,"i",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",12)(21,"button",17),e.\u0275\u0275listener("click",function(){return r.exportToExcel()}),e.\u0275\u0275template(22,x,1,0,"i",18),e.\u0275\u0275template(23,y,1,0,"i",19),e.\u0275\u0275text(24," Excel "),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(25,"div",2),e.\u0275\u0275template(26,_,4,0,"div",20),e.\u0275\u0275template(27,P,36,7,"div",21),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",r.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",r.searchFormGroup),e.\u0275\u0275advance(14),e.\u0275\u0275property("disabled",r.exportLoading||0===r.paymentList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!r.exportLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.exportLoading),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!r.paymentList||0===r.paymentList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!=r.paymentList.length))},dependencies:[d.NgForOf,d.NgIf,v.V,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,u.N9,d.DatePipe]}),n})()}];let k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[c.Bz.forChild(T),c.Bz]}),n})();var w=l(9668);let L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[d.CommonModule,w.v,s.UX,u.jF,k]}),n})()}}]);
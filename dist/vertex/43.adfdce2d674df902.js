"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[43],{39043:(P,g,a)=>{a.r(g),a.d(g,{AgentsModule:()=>K});var m=a(36895),u=a(59158),l=a(24006),f=a(35226),d=a.n(f),e=a(94650),h=a(88386),p=a(84029),v=a(97185),x=a(29234);function C(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"option",37),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=i.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function S(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" Gardian : ",t.guardian_name||"-"," (",t.guardian_relation,") ")}}const _=function(r,i,t){return{"badge-soft-primary":r,"badge-soft-warning":i,"badge-soft-danger":t}};function b(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"a",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(2,_,"Approved"===(null==t||null==t.kyc[0]?null:t.kyc[0].status),"Requested"===(null==t||null==t.kyc[0]?null:t.kyc[0].status),"Rejected"===(null==t||null==t.kyc[0]?null:t.kyc[0].status))),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" KYC ",null==t||null==t.kyc[0]?null:t.kyc[0].status," ")}}function A(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"a",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(2,_,"Approved"===t.franchise_status,"Requested"===t.franchise_status,"Rejected"===t.franchise_status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" Franchise ",t.franchise_status," ")}}function y(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,s=e.\u0275\u0275nextContext(),c=e.\u0275\u0275reference(77);return e.\u0275\u0275resetView(s.advisorModalFn(o,c))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(2,_,"Approved"===t.advisor_status,"Requested"===t.advisor_status,"Rejected"===t.advisor_status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" Advisor ",t.advisor_status," ")}}function E(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ul",45)(1,"li",46),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,s=e.\u0275\u0275nextContext(),c=e.\u0275\u0275reference(73);return e.\u0275\u0275resetView(s.sendNotification(c,o))}),e.\u0275\u0275elementStart(2,"a",47),e.\u0275\u0275element(3,"i",48),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"li",49)(5,"a",50),e.\u0275\u0275element(6,"i",51),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate1("routerLink","/members/view/",t._id,"")}}const w=function(r,i,t,n){return{"badge-soft-primary":r,"badge-soft-warning":i,"badge-soft-danger":t,"badge-soft-secondary":n}};function I(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275element(5,"br"),e.\u0275\u0275template(6,S,3,2,"span",38),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275element(11,"br"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td"),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"td"),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"td"),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"td"),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"date"),e.\u0275\u0275element(28,"br"),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"td")(32,"a",39),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,c=e.\u0275\u0275nextContext(),L=e.\u0275\u0275reference(79);return e.\u0275\u0275resetView(c.changeStatusAccount(s,L))}),e.\u0275\u0275text(33),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(34,b,2,6,"a",40),e.\u0275\u0275template(35,A,2,6,"a",40),e.\u0275\u0275template(36,y,2,6,"a",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"td"),e.\u0275\u0275template(38,E,7,1,"ul",42),e.\u0275\u0275elementEnd()()}if(2&r){const t=i.$implicit,n=i.index,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((o.page-1)*o.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.guardian_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.user_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null==t.referred_by[0]?null:t.referred_by[0].name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",(null==t.referred_by[0]?null:t.referred_by[0].user_id)||"-"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((null==t.direct_id?null:t.direct_id.user_id)||"-"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((null==t.indirect_id?null:t.indirect_id.user_id)||"-"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.account_number||"-"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((null==t||null==t.kyc[0]?null:t.kyc[0].aadhar)||"-"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.gender||"-"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.date_of_birth?o.getAge(t.date_of_birth):"-"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" Joining : ",e.\u0275\u0275pipeBind1(27,20,t.created_date)," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Approved : ",e.\u0275\u0275pipeBind1(30,22,t.approved_date)," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction4(24,w,"Active"===t.status,"Pending"===t.status,"Blocked"===t.status||"Deleted"===t.status,"Inactive"===t.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" Account ",t.status," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",1==t.kyc.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.franchise_status),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.advisor_status),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Deleted"!==t.status)}}function k(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Title is required."),e.\u0275\u0275elementEnd())}function T(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",66),e.\u0275\u0275template(1,k,2,0,"small",67),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.notificationFormGroup.get("title"))||null==n.errors?null:n.errors.required)}}function V(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Message is required."),e.\u0275\u0275elementEnd())}function F(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",66),e.\u0275\u0275template(1,V,2,0,"small",67),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.notificationFormGroup.get("message"))||null==n.errors?null:n.errors.required)}}function M(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",52)(1,"h5",53),e.\u0275\u0275text(2,"Send Notification"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",54),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(s.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",7)(5,"div",55)(6,"div",2)(7,"div",56)(8,"div",57)(9,"label",58),e.\u0275\u0275text(10,"Title:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",59),e.\u0275\u0275template(12,T,2,1,"div",60),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",57)(14,"label",61),e.\u0275\u0275text(15,"Message:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"textarea",62),e.\u0275\u0275template(17,F,2,1,"div",60),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(18,"div",63)(19,"button",64),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(s.close("Close click"))}),e.\u0275\u0275text(20,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"button",65),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.sendMessage())}),e.\u0275\u0275text(22,"Send Message"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,o;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.notificationFormGroup),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",(null==(n=t.notificationFormGroup.get("title"))?null:n.invalid)&&((null==(n=t.notificationFormGroup.get("title"))?null:n.dirty)||(null==(n=t.notificationFormGroup.get("title"))?null:n.touched))),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(o=t.notificationFormGroup.get("message"))?null:o.invalid)&&((null==(o=t.notificationFormGroup.get("message"))?null:o.dirty)||(null==(o=t.notificationFormGroup.get("message"))?null:o.touched))),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.notificationFormGroup.invalid)}}function $(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",52)(1,"h5",53),e.\u0275\u0275text(2,"Settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",54),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(s.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form")(5,"div",55)(6,"div",2)(7,"div",56)(8,"div",57)(9,"label",58),e.\u0275\u0275text(10,"Recurring Deposit (R D):"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",68),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(12,"div",63)(13,"button",64),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(s.close("Close click"))}),e.\u0275\u0275text(14,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",69),e.\u0275\u0275text(16,"Send Message"),e.\u0275\u0275elementEnd()()()}}function N(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"option",37),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=i.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function G(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",52)(1,"h5",53),e.\u0275\u0275text(2,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",54),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(s.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",55)(5,"div",2)(6,"div",56)(7,"div",57)(8,"label",58),e.\u0275\u0275text(9,"Change Status:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"select",70),e.\u0275\u0275listener("ngModelChange",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.currStatus=o)}),e.\u0275\u0275template(11,N,2,2,"option",16),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(12,"div",63)(13,"button",64),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(s.close("Close click"))}),e.\u0275\u0275text(14,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",71),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.changeAdvisorStatus())}),e.\u0275\u0275text(16,"Submit"),e.\u0275\u0275elementEnd()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(10),e.\u0275\u0275property("ngModel",t.currStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.kycStatusList)}}function U(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"option",37),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=i.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function Y(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",52)(1,"h5",53),e.\u0275\u0275text(2,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",54),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(s.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",55)(5,"div",2)(6,"div",56)(7,"div",57)(8,"label",58),e.\u0275\u0275text(9,"Change Status:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"select",70),e.\u0275\u0275listener("ngModelChange",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.currStatus=o)}),e.\u0275\u0275template(11,U,2,2,"option",16),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(12,"div",63)(13,"button",64),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(s.close("Close click"))}),e.\u0275\u0275text(14,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",71),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.changeStatus())}),e.\u0275\u0275text(16,"Submit"),e.\u0275\u0275elementEnd()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(10),e.\u0275\u0275property("ngModel",t.currStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.statusList)}}function R(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"option",37),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=i.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function j(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",52)(1,"h5",53),e.\u0275\u0275text(2,"KYC Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",54),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(s.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",55)(5,"div",2)(6,"div",56)(7,"div",57)(8,"label",58),e.\u0275\u0275text(9,"Change Status:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"select",70),e.\u0275\u0275listener("ngModelChange",function(o){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.currKYCStatus=o)}),e.\u0275\u0275template(11,R,2,2,"option",16),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(12,"div",63)(13,"button",64),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(s.close("Close click"))}),e.\u0275\u0275text(14,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"button",71),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.changeKYCStatusAccount())}),e.\u0275\u0275text(16,"Submit"),e.\u0275\u0275elementEnd()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(10),e.\u0275\u0275property("ngModel",t.currKYCStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.kycStatusList)}}const B=[{path:"",component:(()=>{class r{constructor(t,n,o){this.userService=t,this.modalService=n,this.toast=o,this.currStatus="Pending",this.currUserId="",this.currKYCStatus="",this.statusList=["Pending","Active","Inactive","Blocked"],this.kycStatusList=["Requested","Approved","Rejected"],this.userList=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"Advisor List"},{label:"User",active:!0}],this.notificationFormGroup=new l.cw({title:new l.NI("",l.kI.required),message:new l.NI("",l.kI.required)}),this.searchFormGroup=new l.cw({name:new l.NI(""),user_id:new l.NI(""),account_number:new l.NI(""),status:new l.NI("")}),this.getAllUsers()}search(){this.page=1,this.getAllUsers()}reset(){this.page=1,this.searchFormGroup.reset(),this.getAllUsers()}pageChange(t){this.page=t,this.getAllUsers()}getAllUsers(){const t=this.searchFormGroup.value,n=[];Object.keys(t).forEach(s=>{null!==t[s]&&""!==t[s]&&n.push(`${s}=${encodeURIComponent(t[s])}`)});const o=n.join("&");this.userService.getAllAdvisors(this.page,this.pageSize,o).subscribe(s=>{s&&s.data?(this.userList=s?.data?.users?.data||[],this.total=s?.data?.users?.metadata[0]?.total||0):this.userList=[]},s=>{console.error("Error fetching user list:",s),this.userList=[]})}advisorModalFn(t,n){this.currUserId=t._id,this.currStatus=t.advisor_status,this.openModal(n)}isTimePassed(t){return!!t&&(new Date).getTime()-new Date(t).getTime()>36e5}openModal(t){this.modalService.open(t)}getAge(t){const n=new Date,o=new Date(t);let s=n.getFullYear()-o.getFullYear();const c=n.getMonth()-o.getMonth();return(c<0||0===c&&n.getDate()<o.getDate())&&s--,s}addMember(t){}sendNotification(t,n){this.currUserId=n._id,this.openModal(t)}sendMessage(){if(this.notificationFormGroup.invalid)return void this.toast.error("Please fill all required fields");const{title:t,message:n}=this.notificationFormGroup.value;this.userService.sendNotification(this.currUserId,t,n).subscribe(o=>{o&&"success"===o.status?(this.toast.success("Notification sent successfully"),this.modalService.dismissAll(),this.notificationFormGroup.reset()):this.toast.error("Failed to send notification")},o=>{console.error("Error sending notification:",o),this.toast.error("Failed to send notification")})}changeStatusAccount(t,n){this.openModal(n),this.currStatus=t.status,this.currUserId=t._id}openKYCModal(t,n){this.openModal(n),this.currKYCStatus=t?.kyc[0]?.status,this.currUserId=t?._id}changeKYCStatusAccount(){d().fire({title:"Are you sure?",text:`You want to ${this.currKYCStatus} this account?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:`Yes, ${this.currKYCStatus} it!`}).then(t=>{t.isConfirmed&&this.userService.upsertKyc({status:this.currKYCStatus,user:this.currUserId}).subscribe(n=>{this.modalService.dismissAll(),this.toast.success(`Account ${this.currStatus} Successfully`),this.getAllUsers()},n=>{console.error("Error changing user status:",n),this.modalService.dismissAll(),this.toast.error(`Failed to ${this.currStatus} account`)})})}changeStatus(){d().fire({title:"Are you sure?",text:`You want to ${this.currStatus} this account?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:`Yes, ${this.currStatus} it!`}).then(t=>{t.isConfirmed&&this.userService.changeUserStatus(this.currUserId,this.currStatus).subscribe(n=>{this.modalService.dismissAll(),this.toast.success(`Account ${this.currStatus} Successfully`),this.getAllUsers()},n=>{console.error("Error changing user status:",n),this.modalService.dismissAll(),this.toast.error(`Failed to ${this.currStatus} account`)})})}changeAdvisorStatus(){d().fire({title:"Are you sure?",text:`You want to ${this.currStatus} this advisor?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:`Yes, ${this.currStatus} it!`}).then(t=>{t.isConfirmed&&this.userService.updateProfile({_id:this.currUserId,advisor_status:this.currStatus,advisor_approved_date:new Date}).subscribe(n=>{this.modalService.dismissAll(),d().fire({title:"Success",text:`Advisor status changed to ${this.currStatus} successfully!`,icon:"success",confirmButtonText:"OK"}),this.toast.success(`Advisor status changed to ${this.currStatus} Successfully`),this.getAllUsers()},n=>{console.error("Error changing advisor status:",n),this.modalService.dismissAll(),this.toast.error("Failed to change advisor status")})})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(h.i),e.\u0275\u0275directiveInject(p.FF),e.\u0275\u0275directiveInject(v._W))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-agents"]],decls:82,vars:12,consts:[[1,"container-fluid"],["title","Advisors",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-3"],["type","search","id","searchInput","formControlName","name","placeholder","Search for Name...",1,"form-control"],["type","search","id","searchInput","formControlName","account_number","placeholder","Search for Account Number...",1,"form-control"],[1,"col-lg-2"],["type","search","id","searchInput","formControlName","user_id","placeholder","Search for User id...",1,"form-control"],["formControlName","status",1,"form-control","select2"],["value",""],["value","All"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-lg-1"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[3,"width"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["role","document"],["messageModal",""],["settingModal",""],["changeAdvisorStatusModal",""],["changeStatusModal",""],["changeKYCStatusModal",""],[3,"ngValue"],["class","text-muted",4,"ngIf"],["href","javascript: void(0);",1,"badge","font-size-11","m-1",3,"ngClass","click"],["href","javascript: void(0);","class","badge font-size-11 m-1",3,"ngClass",4,"ngIf"],["href","javascript: void(0);","class","badge font-size-11 m-1",3,"ngClass","click",4,"ngIf"],["class","list-inline font-size-20 contact-links mb-0",4,"ngIf"],[1,"text-muted"],["href","javascript: void(0);",1,"badge","font-size-11","m-1",3,"ngClass"],[1,"list-inline","font-size-20","contact-links","mb-0"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"list-inline-item","px-2",3,"click"],["href","javascript:void(0);","tooltip","Message"],[1,"bx","bx-message-square-dots"],[1,"list-inline-item","px-2"],["tooltip","Profile",3,"routerLink"],[1,"bx","bx-user-circle"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-md-12"],[1,"mb-3"],["for","recipient-name",1,"col-form-label"],["type","text","id","recipient-name","formControlName","title","placeholder","Enter Title",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],["for","message-text",1,"col-form-label"],["id","message-text","formControlName","message","placeholder","Enter Message",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light",3,"disabled","click"],[1,"text-danger","mt-1"],[4,"ngIf"],["type","number","id","recipient-name","placeholder","Settings",1,"form-control"],["type","button",1,"btn","btn-primary","waves-effect","waves-light"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary","waves-effect","waves-light",3,"click"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",8),e.\u0275\u0275element(12,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",11),e.\u0275\u0275element(14,"input",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",11)(16,"select",13)(17,"option",14),e.\u0275\u0275text(18,"Select Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"option",15),e.\u0275\u0275text(20,"All"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,C,2,2,"option",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",17)(23,"button",18),e.\u0275\u0275listener("click",function(){return n.search()}),e.\u0275\u0275element(24,"i",19),e.\u0275\u0275text(25," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",17)(27,"button",20),e.\u0275\u0275listener("click",function(){return n.reset()}),e.\u0275\u0275element(28,"i",21),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(29,"div",2)(30,"div",22)(31,"table",23)(32,"thead")(33,"tr")(34,"th"),e.\u0275\u0275text(35,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"th"),e.\u0275\u0275text(37,"Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"th"),e.\u0275\u0275text(39,"UserId"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"th"),e.\u0275\u0275text(41,"Refer Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"th"),e.\u0275\u0275text(43,"Direct Ref"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"th"),e.\u0275\u0275text(45,"InDirect Ref"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"th"),e.\u0275\u0275text(47,"Account Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"th"),e.\u0275\u0275text(49,"Aadhar Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"th"),e.\u0275\u0275text(51,"Gender"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"th"),e.\u0275\u0275text(53,"Age"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(54,"th"),e.\u0275\u0275text(55,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"th",24),e.\u0275\u0275text(57,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(58,"th",24),e.\u0275\u0275text(59,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(60,"tbody"),e.\u0275\u0275template(61,I,39,29,"tr",25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(62,"div",26)(63,"div",27)(64,"div",28),e.\u0275\u0275text(65,"Showing "),e.\u0275\u0275elementStart(66,"b"),e.\u0275\u0275text(67),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(68),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(69,"div",27)(70,"div",29)(71,"ngb-pagination",30),e.\u0275\u0275listener("pageChange",function(s){return n.page=s})("pageChange",function(s){return n.pageChange(s)}),e.\u0275\u0275elementEnd()()()()()()()()()()(),e.\u0275\u0275template(72,M,23,4,"ng-template",31,32,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(74,$,17,0,"ng-template",31,33,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(76,G,17,2,"ng-template",31,34,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(78,Y,17,2,"ng-template",31,35,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(80,j,17,2,"ng-template",31,36,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.searchFormGroup),e.\u0275\u0275advance(14),e.\u0275\u0275property("ngForOf",n.statusList),e.\u0275\u0275advance(35),e.\u0275\u0275property("width",10),e.\u0275\u0275advance(2),e.\u0275\u0275property("width",10),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.userList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((n.page-1)*n.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",n.findPageShowing()," of ",n.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",n.total)("page",n.page)("pageSize",n.pageSize))},dependencies:[m.NgClass,m.NgForOf,m.NgIf,x.V,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.On,l.F,p.N9,l.sg,l.u,u.yS,m.DatePipe]}),r})()}];let z=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[u.Bz.forChild(B),u.Bz]}),r})();var D=a(19668);let K=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[m.CommonModule,D.v,l.u5,p.jF,l.UX,z]}),r})()}}]);
"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[998],{7998:(Wt,C,p)=>{p.r(C),p.d(C,{LoanModule:()=>Kt});var m=p(6895),l=p(4006),v=p(9158),D=p(5226),S=p.n(D),V=p(5933),e=p(4650),c=p(2340),O=p(529);let x=(()=>{class a{constructor(t){this.http=t}getLoanList(t=0,n=10,o){return this.http.get(`${c.N.api_url}loans?${o}&page=${t}&limit=${n}`)}updateLoanStatus(t,n){return this.http.put(`${c.N.api_url}loans/${t}`,n)}getUserTransaction(t=0,n=10,o){return this.http.get(`${c.N.api_url}loans/user-transanction?${o}&page=${t}&limit=${n}`)}getAdminTransaction(t=0,n=10,o){return this.http.get(`${c.N.api_url}loans/admin-transanction?${o}&page=${t}&limit=${n}`)}getAllUserActiveLoans(t){return this.http.get(`${c.N.api_url}loans/getAllUserActiveLoans/${t}`)}getTotalPaymentAmount(t){return this.http.get(`${c.N.api_url}loans/getTotalPaymentAmount/${t}`)}recordPayment(t){return this.http.post(`${c.N.api_url}loans/record-payment`,t)}clearOffLoan(t){return this.http.post(`${c.N.api_url}loans/clear-off-loan`,t)}getLoanSchedule(t){return this.http.get(`${c.N.api_url}loans/schedule/${t}`)}getPersonalLoanSchedule(t){return this.http.get(`${c.N.api_url}loans/personal/schedule/${t}`)}getAllUsersLoanReport(t={}){let n=new URLSearchParams;return Object.keys(t).forEach(o=>{null!=t[o]&&""!==t[o]&&n.append(o,t[o].toString())}),this.http.get(`${c.N.api_url}loans/reports/all-users?${n.toString()}`)}getLoanComprehensiveReport(t){return this.http.get(`${c.N.api_url}loans/reports/comprehensive/${t}`)}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275inject(O.eN))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var g=p(9061),j=p(9878),h=p(9234);function $(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"option",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=r.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function B(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",32),e.\u0275\u0275element(1,"img",33),e.\u0275\u0275elementStart(2,"p",34),e.\u0275\u0275text(3,"No Loan found in the current filter."),e.\u0275\u0275elementEnd()())}function z(a,r){1&a&&(e.\u0275\u0275elementStart(0,"th"),e.\u0275\u0275text(1,"Guarantor"),e.\u0275\u0275elementEnd())}function U(a,r){1&a&&e.\u0275\u0275element(0,"i",52)}function J(a,r){1&a&&e.\u0275\u0275element(0,"i",53)}function K(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"span",49),e.\u0275\u0275text(1),e.\u0275\u0275elementStart(2,"strong"),e.\u0275\u0275text(3,"Guarantor 1"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4," \xa0 "),e.\u0275\u0275template(5,U,1,0,"i",50),e.\u0275\u0275template(6,J,1,0,"i",51),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("ngClass",null!=t&&t.guarantor_1_approved?"text-success":"text-danger"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",null==t||null==t.guarantor_1[0]?null:t.guarantor_1[0].name," (",null==t||null==t.guarantor_1[0]?null:t.guarantor_1[0].user_id,") - "),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null==t?null:t.guarantor_1_approved),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=t&&t.guarantor_1_approved))}}function Y(a,r){1&a&&e.\u0275\u0275element(0,"i",52)}function W(a,r){1&a&&e.\u0275\u0275element(0,"i",53)}function H(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"span",49),e.\u0275\u0275text(1),e.\u0275\u0275elementStart(2,"strong"),e.\u0275\u0275text(3,"Guarantor 2"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4," \xa0 "),e.\u0275\u0275template(5,Y,1,0,"i",50),e.\u0275\u0275template(6,W,1,0,"i",51),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("ngClass",null!=t&&t.guarantor_2_approved?"text-success":"text-danger"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",null==t||null==t.guarantor_2[0]?null:t.guarantor_2[0].name," (",null==t||null==t.guarantor_2[0]?null:t.guarantor_2[0].user_id,") - "),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null==t?null:t.guarantor_2_approved),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=t&&t.guarantor_2_approved))}}function Q(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275template(1,K,7,5,"span",48),e.\u0275\u0275element(2,"br"),e.\u0275\u0275template(3,H,7,5,"span",48),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==(null==t||null==t.guarantor_1?null:t.guarantor_1.length)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0!==(null==t||null==t.guarantor_2?null:t.guarantor_2.length))}}const X=function(a,r,t,n){return{"badge-soft-primary":a,"badge-soft-warning":r,"badge-soft-danger":t,"badge-soft-secondary":n}};function Z(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"a",54),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction4(2,X,"Approved"===t.status||"Completed"===t.status,"Requested"===t.status,"Rejected"===t.status||"Defaulted"===t.status,"Pending"===t.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.status," ")}}function ee(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",55),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(47);return e.\u0275\u0275resetView(i.openLoanModal(s,o))}),e.\u0275\u0275elementStart(1,"a",56),e.\u0275\u0275element(2,"i",57),e.\u0275\u0275elementEnd()()}}function te(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",58)(1,"a",59),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(49);return e.\u0275\u0275resetView(i.viewGuaranteedLoan(s,o))}),e.\u0275\u0275element(2,"i",60),e.\u0275\u0275elementEnd()()}}function ne(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",58)(1,"a",59),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(49);return e.\u0275\u0275resetView(i.viewPersonalLoan(s,o))}),e.\u0275\u0275element(2,"i",60),e.\u0275\u0275elementEnd()()}}function ae(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",58)(1,"a",59),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(49);return e.\u0275\u0275resetView(i.viewPersonalLoan(s,o))}),e.\u0275\u0275element(2,"i",60),e.\u0275\u0275elementEnd()()}}function oe(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275element(5,"br"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td"),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,Q,4,2,"td",37),e.\u0275\u0275elementStart(22,"td"),e.\u0275\u0275template(23,Z,2,7,"a",44),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"td")(25,"ul",45),e.\u0275\u0275template(26,ee,3,0,"li",46),e.\u0275\u0275template(27,te,3,0,"li",47),e.\u0275\u0275template(28,ne,3,0,"li",47),e.\u0275\u0275template(29,ae,3,0,"li",47),e.\u0275\u0275elementEnd()()()),2&a){const t=r.$implicit,n=r.index,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((o.page-1)*o.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.loan_id," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" Requested Date: ",e.\u0275\u0275pipeBind1(7,17,t.created_date)," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate2("",t.user.name," (",t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.requested_loan_amount,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.duration," ","Daily"===t.interval?"day(s)":"month(s)"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.interval),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,19,t.start_date)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.purpose),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Personal"!==o.loanType),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.status),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","Pending"===t.status),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Pending"!==t.status&&"Rejected"!==t.status&&"Garanteed"===t.loan_type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Pending"!==t.status&&"Rejected"!==t.status&&"Personal"===t.loan_type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Pending"!==t.status&&"Rejected"!==t.status&&"Loan Against FD"===t.loan_type)}}function re(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",35)(1,"table",36)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"Loan Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Loan Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Duration"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"EMI Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Start Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"th"),e.\u0275\u0275text(19,"Purpose"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,z,2,0,"th",37),e.\u0275\u0275elementStart(21,"th"),e.\u0275\u0275text(22,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"th"),e.\u0275\u0275text(24,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(25,"tbody"),e.\u0275\u0275template(26,oe,30,21,"tr",38),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",39)(28,"div",40)(29,"div",41),e.\u0275\u0275text(30,"Showing "),e.\u0275\u0275elementStart(31,"b"),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(33),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",40)(35,"div",42)(36,"ngb-pagination",43),e.\u0275\u0275listener("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.page=o)})("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.pageChange(o))}),e.\u0275\u0275elementEnd()()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(20),e.\u0275\u0275property("ngIf","Personal"!==t.loanType),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.loanList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}function le(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Status is required."),e.\u0275\u0275elementEnd())}function ie(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",79),e.\u0275\u0275template(1,le,2,0,"small",37),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.statusFormGroup.get("status"))||null==n.errors?null:n.errors.required)}}function se(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Rejected reason is required."),e.\u0275\u0275elementEnd())}function de(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",79),e.\u0275\u0275template(1,se,2,0,"small",37),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.statusFormGroup.get("rejected_reason"))||null==n.errors?null:n.errors.required)}}function me(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",66)(1,"label",80),e.\u0275\u0275text(2,"Rejected Reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"select",81)(4,"option",12),e.\u0275\u0275text(5,"Select reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"option",82),e.\u0275\u0275text(7,"Insufficient funds"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"option",83),e.\u0275\u0275text(9,"Credit score too low"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"option",84),e.\u0275\u0275text(11,"Unverifiable income"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,de,2,1,"div",73),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);let n;e.\u0275\u0275advance(12),e.\u0275\u0275property("ngIf",(null==(n=t.statusFormGroup.get("rejected_reason"))?null:n.touched)&&(null==(n=t.statusFormGroup.get("rejected_reason"))?null:n.invalid))}}function pe(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Approved Loan Amount is required."),e.\u0275\u0275elementEnd())}function ce(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number."),e.\u0275\u0275elementEnd())}function ue(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",79),e.\u0275\u0275template(1,pe,2,0,"small",37),e.\u0275\u0275template(2,ce,2,0,"small",37),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);let n,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.statusFormGroup.get("requested_loan_amount"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("requested_loan_amount"))||null==o.errors?null:o.errors.pattern)}}function _e(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Approved Loan Amount is required."),e.\u0275\u0275elementEnd())}function ge(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number."),e.\u0275\u0275elementEnd())}function fe(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",79),e.\u0275\u0275template(1,_e,2,0,"small",37),e.\u0275\u0275template(2,ge,2,0,"small",37),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);let n,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.statusFormGroup.get("approved_loan_amount"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("approved_loan_amount"))||null==o.errors?null:o.errors.pattern)}}function ve(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Interest Rate is required."),e.\u0275\u0275elementEnd())}function xe(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number (e.g. 5, 7.25)."),e.\u0275\u0275elementEnd())}function he(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",79),e.\u0275\u0275template(1,ve,2,0,"small",37),e.\u0275\u0275template(2,xe,2,0,"small",37),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);let n,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.statusFormGroup.get("interest_rate"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("interest_rate"))||null==o.errors?null:o.errors.pattern)}}function Se(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Start Date is required."),e.\u0275\u0275elementEnd())}function ye(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",79),e.\u0275\u0275template(1,Se,2,0,"small",37),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.statusFormGroup.get("start_date"))||null==n.errors?null:n.errors.required)}}function be(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Penalty is required."),e.\u0275\u0275elementEnd())}function Ce(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number (e.g. 2, 3.5)."),e.\u0275\u0275elementEnd())}function Ee(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",79),e.\u0275\u0275template(1,be,2,0,"small",37),e.\u0275\u0275template(2,Ce,2,0,"small",37),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);let n,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.statusFormGroup.get("penalty"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("penalty"))||null==o.errors?null:o.errors.pattern)}}function Ie(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Indirect referral amount is required."),e.\u0275\u0275elementEnd())}function Le(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function Te(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",79),e.\u0275\u0275template(1,Ie,2,0,"small",37),e.\u0275\u0275template(2,Le,2,0,"small",37),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);let n,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.statusFormGroup.get("franchise_refer_per"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("franchise_refer_per"))||null==o.errors?null:o.errors.min)}}function Re(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Indirect referral amount is required."),e.\u0275\u0275elementEnd())}function Fe(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function Pe(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",79),e.\u0275\u0275template(1,Re,2,0,"small",37),e.\u0275\u0275template(2,Fe,2,0,"small",37),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);let n,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.statusFormGroup.get("indirect_refer_per"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("indirect_refer_per"))||null==o.errors?null:o.errors.min)}}function we(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Direct referral % is required."),e.\u0275\u0275elementEnd())}function qe(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function ke(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",79),e.\u0275\u0275template(1,we,2,0,"small",37),e.\u0275\u0275template(2,qe,2,0,"small",37),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);let n,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.statusFormGroup.get("direct_refer_per"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("direct_refer_per"))||null==o.errors?null:o.errors.min)}}function Me(a,r){if(1&a&&e.\u0275\u0275element(0,"img",109),2&a){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("src",t.uploadedChequeProof,e.\u0275\u0275sanitizeUrl)}}function Ge(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",107),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(45);return e.\u0275\u0275resetView(o.click())}),e.\u0275\u0275template(1,Me,1,1,"img",108),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.uploadedChequeProof)}}function Ae(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",2)(1,"div",85)(2,"label",86),e.\u0275\u0275text(3,"Requested Loan Amount (\u20b9)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",87),e.\u0275\u0275template(5,ue,3,2,"div",73),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",85)(7,"label",88),e.\u0275\u0275text(8,"Approved Loan Amount (\u20b9)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"input",89),e.\u0275\u0275template(10,fe,3,2,"div",73),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",85)(12,"label",90),e.\u0275\u0275text(13,"Interest Rate (%)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"input",91),e.\u0275\u0275template(15,he,3,2,"div",73),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",85)(17,"label",92),e.\u0275\u0275text(18,"Start Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"input",93),e.\u0275\u0275template(20,ye,2,1,"div",73),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",85)(22,"label",94),e.\u0275\u0275text(23,"Penalty (\u20b9)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"input",95),e.\u0275\u0275template(25,Ee,3,2,"div",73),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",96)(27,"label",97),e.\u0275\u0275text(28,"Franchise Referral %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(29,"input",98),e.\u0275\u0275template(30,Te,3,2,"div",73),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",96)(32,"label",99),e.\u0275\u0275text(33,"Indirect Referral %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"input",100),e.\u0275\u0275template(35,Pe,3,2,"div",73),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",96)(37,"label",101),e.\u0275\u0275text(38,"Direct Referral %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"input",102),e.\u0275\u0275template(40,ke,3,2,"div",73),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",96)(42,"label",103),e.\u0275\u0275text(43,"Cheque Proof"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"input",104,105),e.\u0275\u0275listener("change",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onFileSelected(o,"chequeProof"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(46,Ge,2,1,"div",106),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext(2);let n,o,i,s,d,u,_,f;e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(n=t.statusFormGroup.get("requested_loan_amount"))?null:n.touched)&&(null==(n=t.statusFormGroup.get("requested_loan_amount"))?null:n.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(o=t.statusFormGroup.get("approved_loan_amount"))?null:o.touched)&&(null==(o=t.statusFormGroup.get("approved_loan_amount"))?null:o.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(i=t.statusFormGroup.get("interest_rate"))?null:i.touched)&&(null==(i=t.statusFormGroup.get("interest_rate"))?null:i.invalid)),e.\u0275\u0275advance(4),e.\u0275\u0275property("min",t.minDate)("max",t.maxDate)("value",t.minDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(s=t.statusFormGroup.get("start_date"))?null:s.touched)&&(null==(s=t.statusFormGroup.get("start_date"))?null:s.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(d=t.statusFormGroup.get("penalty"))?null:d.touched)&&(null==(d=t.statusFormGroup.get("penalty"))?null:d.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(u=t.statusFormGroup.get("franchise_refer_per"))?null:u.touched)&&(null==(u=t.statusFormGroup.get("franchise_refer_per"))?null:u.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(_=t.statusFormGroup.get("indirect_refer_per"))?null:_.touched)&&(null==(_=t.statusFormGroup.get("indirect_refer_per"))?null:_.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(f=t.statusFormGroup.get("direct_refer_per"))?null:f.touched)&&(null==(f=t.statusFormGroup.get("direct_refer_per"))?null:f.invalid)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.uploadedChequeProof)}}function Ne(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",61)(1,"h5",62),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",63),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",7)(5,"div",64)(6,"div",2)(7,"div",65)(8,"div",66)(9,"label"),e.\u0275\u0275text(10,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",67)(12,"div",68),e.\u0275\u0275element(13,"input",69),e.\u0275\u0275elementStart(14,"label",70),e.\u0275\u0275text(15,"Approved"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",68),e.\u0275\u0275element(17,"input",71),e.\u0275\u0275elementStart(18,"label",72),e.\u0275\u0275text(19,"Rejected"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(20,ie,2,1,"div",73),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,me,13,1,"div",74),e.\u0275\u0275template(22,Ae,47,12,"div",75),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(23,"div",76)(24,"button",77),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.close("Close click"))}),e.\u0275\u0275text(25,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"button",78),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.submit())}),e.\u0275\u0275text(27,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&a){const t=e.\u0275\u0275nextContext();let n,o,i;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Approved/Reject ","fd-against-loans"===t.loanType?"FD against":t.loanType," Loan"),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t.statusFormGroup),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngIf",(null==(n=t.statusFormGroup.get("status"))?null:n.touched)&&(null==(n=t.statusFormGroup.get("status"))?null:n.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Rejected"===(null==(o=t.statusFormGroup.get("status"))?null:o.value)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Rejected"!==(null==(i=t.statusFormGroup.get("status"))?null:i.value))}}function De(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",118)(1,"div",119)(2,"small",120),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",121),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()()),2&a){const t=r.$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.label),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.value)}}const E=function(a){return{label:"Total Days",value:a}},I=function(a){return{label:"Principal",value:a}},L=function(a){return{label:"Interest",value:a}},T=function(a){return{label:"Projected EMI",value:a}},R=function(a){return{label:"Projected (Penalties)",value:a}},F=function(a){return{label:"Penalty",value:a}},P=function(a){return{label:"Paid",value:a}},w=function(a){return{label:"Remaining",value:a}},q=function(a){return{label:"Fully Paid",value:a}},k=function(a){return{label:"Partially Paid",value:a}},M=function(a){return{label:"Pending",value:a}},G=function(a){return{label:"Paid Interest",value:a}},A=function(a){return{label:"Rem. Interest",value:a}},Ve=function(a,r,t,n,o,i,s,d,u,_,f,y,b){return[a,r,t,n,o,i,s,d,u,_,f,y,b]};function Oe(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",116),e.\u0275\u0275template(1,De,6,2,"div",117),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunctionV(27,Ve,[e.\u0275\u0275pureFunction1(1,E,t.LoanTotal["Total Days"]),e.\u0275\u0275pureFunction1(3,I,"\u20b9"+t.LoanTotal["Total Principal"]),e.\u0275\u0275pureFunction1(5,L,"\u20b9"+t.LoanTotal["Total Interest"]),e.\u0275\u0275pureFunction1(7,T,"\u20b9"+t.LoanTotal["Projected Total EMI"]),e.\u0275\u0275pureFunction1(9,R,"\u20b9"+t.LoanTotal["Projected Total (with Penalties)"]),e.\u0275\u0275pureFunction1(11,F,"\u20b9"+t.LoanTotal["Total Penalty"]),e.\u0275\u0275pureFunction1(13,P,"\u20b9"+t.LoanTotal["Total Amount Paid"]),e.\u0275\u0275pureFunction1(15,w,"\u20b9"+t.LoanTotal["Total Remaining Amount"]),e.\u0275\u0275pureFunction1(17,q,t.LoanTotal["Fully Paid Installments"]),e.\u0275\u0275pureFunction1(19,k,t.LoanTotal["Partially Paid Installments"]),e.\u0275\u0275pureFunction1(21,M,t.LoanTotal["Pending Installments"]),e.\u0275\u0275pureFunction1(23,G,"\u20b9"+t.LoanTotal["Paid Interest"]),e.\u0275\u0275pureFunction1(25,A,"\u20b9"+t.LoanTotal["Remaining Interest"])]))}}function je(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",118)(1,"div",119)(2,"small",120),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",121),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()()),2&a){const t=r.$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.label),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.value)}}const $e=function(a){return{label:"Outstanding",value:a}},Be=function(a,r,t,n,o,i,s,d,u,_,f,y,b,Yt){return[a,r,t,n,o,i,s,d,u,_,f,y,b,Yt]};function ze(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",116),e.\u0275\u0275template(1,je,6,2,"div",117),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunctionV(29,Be,[e.\u0275\u0275pureFunction1(1,E,t.LoanTotal["Total Days"]),e.\u0275\u0275pureFunction1(3,I,"\u20b9"+t.LoanTotal["Total Principal"]),e.\u0275\u0275pureFunction1(5,L,"\u20b9"+t.LoanTotal["Total Interest"]),e.\u0275\u0275pureFunction1(7,T,"\u20b9"+t.LoanTotal["Projected Total EMI"]),e.\u0275\u0275pureFunction1(9,R,"\u20b9"+t.LoanTotal["Projected Total (with Penalties)"]),e.\u0275\u0275pureFunction1(11,F,"\u20b9"+t.LoanTotal["Total Penalty"]),e.\u0275\u0275pureFunction1(13,P,"\u20b9"+t.LoanTotal["Total Amount Paid"]),e.\u0275\u0275pureFunction1(15,w,"\u20b9"+t.LoanTotal["Total Remaining Amount"]),e.\u0275\u0275pureFunction1(17,q,t.LoanTotal["Fully Paid Installments"]),e.\u0275\u0275pureFunction1(19,k,t.LoanTotal["Partially Paid Installments"]),e.\u0275\u0275pureFunction1(21,M,t.LoanTotal["Pending Installments"]),e.\u0275\u0275pureFunction1(23,G,"\u20b9"+t.LoanTotal["Paid Interest"]),e.\u0275\u0275pureFunction1(25,A,"\u20b9"+t.LoanTotal["Remaining Interest"]),e.\u0275\u0275pureFunction1(27,$e,"\u20b9"+t.LoanTotal.Outstanding)]))}}function Ue(a,r){if(1&a&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td"),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&a){const t=r.$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.Installment),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.Date),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t["Principal O/S"],""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.EMI,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.Penalty,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.Interest,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.Principal,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.Balance,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.Status)}}function Je(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",61)(1,"h5",62),e.\u0275\u0275text(2,"Loan Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",63),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",64)(5,"div",2)(6,"div",110)(7,"p")(8,"strong"),e.\u0275\u0275text(9,"Loan Number:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"p")(12,"strong"),e.\u0275\u0275text(13,"User:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p")(16,"strong"),e.\u0275\u0275text(17,"Requested Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"p")(20,"strong"),e.\u0275\u0275text(21,"Approved Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"p")(24,"strong"),e.\u0275\u0275text(25,"Interest Rate:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"p")(28,"strong"),e.\u0275\u0275text(29,"Status:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",110)(32,"p")(33,"strong"),e.\u0275\u0275text(34,"Loan Type:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"p")(37,"strong"),e.\u0275\u0275text(38,"Duration:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(39),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"p")(41,"strong"),e.\u0275\u0275text(42,"EMI Type:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"p")(45,"strong"),e.\u0275\u0275text(46,"Purpose:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(47),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"p")(49,"strong"),e.\u0275\u0275text(50,"Start Date:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(51),e.\u0275\u0275pipe(52,"date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(53,"div",111)(54,"button",112),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.payloan())}),e.\u0275\u0275text(55,"Pay Loan"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(56,Oe,2,41,"div",113),e.\u0275\u0275elementStart(57,"div",114),e.\u0275\u0275element(58,"img",109),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(59,ze,2,44,"div",113),e.\u0275\u0275elementStart(60,"div",35)(61,"table",115)(62,"tbody")(63,"tr")(64,"th")(65,"strong"),e.\u0275\u0275text(66,"Installment"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(67,"th")(68,"strong"),e.\u0275\u0275text(69,"Date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(70,"th")(71,"strong"),e.\u0275\u0275text(72,"Principal O/S"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(73,"th")(74,"strong"),e.\u0275\u0275text(75,"EMI"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(76,"th")(77,"strong"),e.\u0275\u0275text(78,"Penalty"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(79,"th")(80,"strong"),e.\u0275\u0275text(81,"Interest"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(82,"th")(83,"strong"),e.\u0275\u0275text(84,"Principal"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(85,"th")(86,"strong"),e.\u0275\u0275text(87,"Balance"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(88,"th")(89,"strong"),e.\u0275\u0275text(90,"Status"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(91,Ue,20,9,"ng-container",38),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(92,"div",76)(93,"button",77),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.close("Close click"))}),e.\u0275\u0275text(94,"Close"),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.loan_id,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2(" ",null==t.loanSelected?null:t.loanSelected.user.name," (",null==t.loanSelected?null:t.loanSelected.user.user_id,")"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" \u20b9",null==t.loanSelected?null:t.loanSelected.requested_loan_amount,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" \u20b9",null==t.loanSelected?null:t.loanSelected.approved_loan_amount,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.interest_rate,"% (A.P.R.)"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.status,""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.loan_type,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2(" ",null==t.loanSelected?null:t.loanSelected.duration," ","Daily"===(null==t.loanSelected?null:t.loanSelected.interval)?"day(s)":"month(s)"," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.interval,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.purpose,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(52,17,null==t.loanSelected?null:t.loanSelected.start_date,"dd/MM/yyyy"),""),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.LoanTotal&&"Garanteed"===t.loanType),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("src",t.document_to,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.LoanTotal&&"Personal"===t.loanType),e.\u0275\u0275advance(32),e.\u0275\u0275property("ngForOf",t.LoanTable)}}let Ke=(()=>{class a{constructor(t,n,o,i,s){this.loanService=t,this.modalService=n,this.route=o,this.settingsService=i,this.router=s,this.loanList=[],this.total=0,this.loanType="",this.page=1,this.pageSize=10,this.LoanTable=[],this.LoanTotal=null,this.queryParams="",this.status=["Pending","Approved","Rejected","Completed","Defaulted"],this.loanSelected=null,this.document_to=null,this.uploadedChequeProof="",this.route.paramMap.subscribe(d=>{this.loanType=d.get("type")||"",this.search()})}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"Requested Loan",active:!0}];const t=new Date,n=new Date;n.setDate(t.getDate()+1),this.minDate=n.toISOString().split("T")[0];const o=new Date(t);o.setDate(t.getDate()+5),this.maxDate=o.toISOString().split("T")[0],this.statusFormGroup=new l.cw({_id:new l.NI(null),status:new l.NI(""),interest_rate:new l.NI(null,[l.kI.min(0),l.kI.max(100)]),requested_loan_amount:new l.NI({value:"",disabled:!0}),approved_loan_amount:new l.NI(null,[l.kI.min(0)]),start_date:new l.NI(null),penalty:new l.NI(null,[l.kI.min(0),l.kI.max(100)]),franchise_refer_per:new l.NI(null,[l.kI.min(0),l.kI.max(100)]),direct_refer_per:new l.NI(null,[l.kI.min(0),l.kI.max(100)]),indirect_refer_per:new l.NI(null,[l.kI.min(0),l.kI.max(100)]),rejected_reason:new l.NI(""),cheque_proof:new l.NI("")}),this.statusFormGroup.get("status")?.valueChanges.subscribe(i=>{"Rejected"===i?(this.statusFormGroup.get("rejected_reason")?.setValidators([l.kI.required]),["interest_rate","approved_loan_amount","start_date","franchise_refer_per","direct_refer_per","indirect_refer_per"].forEach(s=>{const d=this.statusFormGroup.get(s);if(d){const u=d.validator?[l.kI.min(0),l.kI.max(100)].filter(_=>"approved_loan_amount"!==s&&"start_date"!==s):[];d.setValidators("approved_loan_amount"===s?[l.kI.min(0)]:"start_date"===s?[]:u),d.updateValueAndValidity()}}),this.statusFormGroup.get("rejected_reason")?.updateValueAndValidity()):(this.statusFormGroup.get("rejected_reason")?.clearValidators(),this.statusFormGroup.get("interest_rate")?.setValidators([l.kI.required,l.kI.min(0),l.kI.max(100)]),this.statusFormGroup.get("approved_loan_amount")?.setValidators([l.kI.required,l.kI.min(0)]),this.statusFormGroup.get("start_date")?.setValidators([l.kI.required]),this.statusFormGroup.get("franchise_refer_per")?.setValidators([l.kI.required,l.kI.min(0),l.kI.max(100)]),this.statusFormGroup.get("direct_refer_per")?.setValidators([l.kI.required,l.kI.min(0),l.kI.max(100)]),this.statusFormGroup.get("indirect_refer_per")?.setValidators([l.kI.required,l.kI.min(0),l.kI.max(100)]),["interest_rate","approved_loan_amount","start_date","franchise_refer_per","direct_refer_per","indirect_refer_per"].forEach(s=>{this.statusFormGroup.get(s)?.updateValueAndValidity()}))}),this.searchFormGroup=new l.cw({name:new l.NI(""),loan_type:new l.NI(this.loanType),status:new l.NI("Pending"),interval:new l.NI("")}),this.search()}refresh(){this.page=1,this.searchFormGroup.reset(),this.searchFormGroup.patchValue({status:"Pending",loan_type:"",name:"",interval:""}),this.getLoanList()}openLoanModal(t,n){this.modalService.open(t,{size:"lg",backdrop:"static"}),this.uploadedChequeProof=null,this.statusFormGroup.reset(),this.settingsService.getGeneralSettings$().subscribe(o=>{o&&("Personal"===this.loanType&&this.statusFormGroup.patchValue({penalty:o.loan_penalty||0,interest_rate:o.loan_rate||0,indirect_refer_per:o.loan_indirect_percentage||0,direct_refer_per:o.loan_direct_percentage||0,franchise_refer_per:o.loan_francise_percentage||0}),"Personal"!==this.loanType&&this.statusFormGroup.patchValue({penalty:o.g_loan_penalty||0,interest_rate:o.g_loan_rate||0,indirect_refer_per:o.g_loan_indirect_percentage||0,direct_refer_per:o.g_loan_direct_percentage||0,franchise_refer_per:o.g_loan_francise_percentage||0}))}),this.statusFormGroup.patchValue({_id:n._id,requested_loan_amount:n.requested_loan_amount})}submit(){if(this.statusFormGroup.invalid)return console.log("Form is invalid:",this.statusFormGroup.errors),void Object.keys(this.statusFormGroup.controls).forEach(n=>{const o=this.statusFormGroup.get(n);o&&o.invalid&&console.log(`Control "${n}" is invalid:`,o.errors)});const t={...this.statusFormGroup.value,cheque_proof:this.uploadedChequeProof||this.statusFormGroup.value.cheque_proof||null};this.loanService.updateLoanStatus(t._id,t).subscribe({next:n=>{S().fire({title:"Success",text:`Loan status updated to ${t.status}`,icon:"success",confirmButtonText:"OK"}),this.statusFormGroup.reset(),this.selectedLoan=null,this.modalService.dismissAll(),this.getLoanList(),this.settingsService.getGeneralSettings$().subscribe(o=>{o&&this.statusFormGroup.patchValue({interest_rate:o.loan_rate||0,indirect_refer_per:o.loan_indirect_percentage||0,direct_refer_per:o.loan_direct_percentage||0,franchise_refer_per:o.loan_francise_percentage||0})})},error:n=>{console.error("Error updating loan status:",n)}})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getLoanList()}search(){const t=[];if(this.searchFormGroup&&this.searchFormGroup.value){const n=this.searchFormGroup.value;Object.keys(n).forEach(o=>{"loan_type"!==o&&null!==n[o]&&""!==n[o]&&t.push(`${o}=${encodeURIComponent(n[o])}`)})}this.loanType&&t.push(`loan_type=${encodeURIComponent(this.loanType)}`),t.some(n=>n.startsWith("status="))||t.push("status=Pending"),this.queryParams=t.join("&"),this.page=1,this.getLoanList()}getLoanList(){this.loanService.getLoanList(this.page,this.pageSize,this.queryParams).subscribe({next:t=>{this.loanList=t.data.loans,console.log("Fetched loan list:",this.loanList),this.total=t.data.total},error:t=>{console.error("Error fetching loan list:",t)}})}viewGuaranteedLoan(t,n){this.selectedLoan=n,this.loanService.getLoanSchedule(n._id).subscribe({next:o=>{console.log(o),this.LoanTable=o.data.schedule,this.LoanTotal=o.data.totals,this.loanSelected=n,this.document_to=o.data.loan.cheque_proof||null},error:o=>{console.error("Error fetching guaranteed loan schedule:",o),S().fire({title:"Error",text:"Failed to fetch guaranteed loan schedule.",icon:"error",confirmButtonText:"OK"})}}),this.modalService.open(t,{size:"xl",backdrop:"static"})}viewPersonalLoan(t,n){this.selectedLoan=n,this.loanService.getPersonalLoanSchedule(n._id).subscribe({next:o=>{this.LoanTable=o.data.schedule,this.LoanTotal=o.data.totals,this.loanSelected=n,this.document_to=o.data.loan.doc||null},error:o=>{console.error("Error fetching personal loan schedule:",o),S().fire({title:"Error",text:"Failed to fetch personal loan schedule.",icon:"error",confirmButtonText:"OK"})}}),this.modalService.open(t,{size:"xl",backdrop:"static"})}payloan(){this.router.navigate(["/loan-management/pay-loan"],{queryParams:{id:this.loanSelected._id,user:this.loanSelected?.user.user_id}}),this.modalService.dismissAll()}onFileSelected(t,n){const o=t.target;if(o.files&&0!==o.files.length)return o.files[0].type.startsWith("image/")?void(o.files&&o.files.length>0&&this.openImageCropper({file:t,from:n})):(S().fire({title:"Invalid File Type",text:"Please select a valid image file.",icon:"error",confirmButtonText:"OK"}),void(o.value=""))}openImageCropper(t){const n=this.modalService.open(V.a,{centered:!0,size:"xl"});n.componentInstance.data=t,n.result.then(o=>{o&&o.image&&this.cropAndSetPhoto(o.image,o.from)}).catch(o=>{console.log("Modal dismissed:",o)})}cropAndSetPhoto(t,n="profile_image"){const o=new Image;o.onload=()=>{const i=document.createElement("canvas");i.width=.5*o.width,i.height=.5*o.height,i.getContext("2d").drawImage(o,0,0,i.width,i.height);const d=i.toDataURL("image/jpeg",.3);this.uploadedChequeProof=d,this.statusFormGroup.patchValue({cheque_proof:d}),console.log(`Selected ${n}:`)},o.src=t}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(x),e.\u0275\u0275directiveInject(g.FF),e.\u0275\u0275directiveInject(v.gz),e.\u0275\u0275directiveInject(j.g),e.\u0275\u0275directiveInject(v.F0))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-loan-requested"]],decls:50,vars:6,consts:[[1,"container-fluid"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-4"],["type","search","id","searchInput","placeholder","Search for Name / User Id / Email id...","formControlName","name",1,"form-control"],[1,"col-lg-2"],["formControlName","loan_type",1,"form-control"],["value",""],["value","Personal"],["value","Garanteed"],["value","fd-against-loans"],["formControlName","interval",1,"form-control"],["value","Daily"],["value","Monthly"],["formControlName","status",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-lg-1"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],["role","document"],["loanModal",""],["loanViewGaranteedModal",""],[3,"ngValue"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["href","javascript: void(0);","class","badge font-size-11 m-1",3,"ngClass",4,"ngIf"],[1,"list-inline","font-size-20","contact-links","mb-0"],["data-bs-toggle","modal","data-bs-target","#myModal","class","list-inline-item px-2",3,"click",4,"ngIf"],["class","list-inline-item px-2",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["class","bx bx-check-circle",4,"ngIf"],["class","bx bx-x-circle",4,"ngIf"],[1,"bx","bx-check-circle"],[1,"bx","bx-x-circle"],["href","javascript: void(0);",1,"badge","font-size-11","m-1",3,"ngClass"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"list-inline-item","px-2",3,"click"],["href","javascript:void(0);","tooltip","Message"],[1,"bx","bx-check-double"],[1,"list-inline-item","px-2"],["tooltip","Profile",3,"click"],[1,"bx","bx-detail"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-md-12"],[1,"form-group","mb-3"],[1,"d-flex","align-items-center","gap-3"],[1,"form-check","form-check-inline"],["type","radio","id","status_approved","value","Approved","formControlName","status",1,"form-check-input"],["for","status_approved",1,"form-check-label"],["type","radio","id","status_rejected","value","Rejected","formControlName","status",1,"form-check-input"],["for","status_rejected",1,"form-check-label"],["class","text-danger",4,"ngIf"],["class","form-group mb-3",4,"ngIf"],["class","row",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light",3,"click"],[1,"text-danger"],["for","rejected_reason"],["id","rejected_reason","formControlName","rejected_reason",1,"form-control"],["value","Insufficient funds"],["value","Credit score too low"],["value","Unverifiable income"],[1,"form-group","mb-3","col-lg-6"],["for","requested_loan_amount"],["type","number","id","requested_loan_amount","formControlName","requested_loan_amount","placeholder","Enter approved amount",1,"form-control"],["for","approved_loan_amount"],["type","number","id","approved_loan_amount","formControlName","approved_loan_amount","placeholder","Enter approved amount",1,"form-control"],["for","interest_rate"],["type","number","id","interest_rate","formControlName","interest_rate","placeholder","Enter interest rate",1,"form-control"],["for","start_date"],["type","date","id","start_date","formControlName","start_date",1,"form-control",3,"min","max","value"],["for","penalty"],["type","number","id","penalty","formControlName","penalty","placeholder","Enter penalty percentage",1,"form-control"],[1,"col-md-6","mb-3"],["for","franchiseReferral",1,"form-label"],["type","number","id","franchiseReferral","formControlName","franchise_refer_per","placeholder","Enter indirect referral",1,"form-control"],["for","indirectReferral",1,"form-label"],["type","number","id","indirectReferral","formControlName","indirect_refer_per","placeholder","Enter indirect referral",1,"form-control"],["for","directReferral",1,"form-label"],["type","number","id","directReferral","formControlName","direct_refer_per","placeholder","Enter direct referral",1,"form-control"],["for","chequeProof",1,"form-label"],["type","file","id","chequeProof","accept","image/*","formControlName","cheque_proof",1,"form-control",3,"change"],["selfPassbookInput",""],["class","passbook_box","style","cursor:pointer;",3,"click",4,"ngIf"],[1,"passbook_box",2,"cursor","pointer",3,"click"],["alt","",3,"src",4,"ngIf"],["alt","",3,"src"],[1,"col-md-6"],[1,"col-12","mt-2","d-flex","justify-content-end","mb-2"],[1,"btn","btn-sm","btn-primary",3,"click"],["class","row mb-3",4,"ngIf"],[1,"passbook_box"],[1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[1,"row","mb-3"],["class","col-md-2",4,"ngFor","ngForOf"],[1,"col-md-2"],[1,"card","card-body","p-2","mb-2","text-center"],[1,"text-muted"],[1,"fw-bold"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",10)(12,"select",11),e.\u0275\u0275text(13," > "),e.\u0275\u0275elementStart(14,"option",12),e.\u0275\u0275text(15,"Select Loan Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"option",13),e.\u0275\u0275text(17,"Personal"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"option",14),e.\u0275\u0275text(19,"Garanteed"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"option",15),e.\u0275\u0275text(21,"FD against Loans"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(22,"div",10)(23,"select",16),e.\u0275\u0275text(24," > "),e.\u0275\u0275elementStart(25,"option",12),e.\u0275\u0275text(26,"Select EMI Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"option",17),e.\u0275\u0275text(28,"Daily"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"option",18),e.\u0275\u0275text(30,"Monthly"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"div",10)(32,"select",19)(33,"option",12),e.\u0275\u0275text(34,"Select Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(35,$,2,2,"option",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",21)(37,"button",22),e.\u0275\u0275listener("click",function(){return n.search()}),e.\u0275\u0275element(38,"i",23),e.\u0275\u0275text(39," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"div",21)(41,"button",24),e.\u0275\u0275listener("click",function(){return n.refresh()}),e.\u0275\u0275element(42,"i",25),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(43,"div",2),e.\u0275\u0275template(44,B,4,0,"div",26),e.\u0275\u0275template(45,re,37,8,"div",27),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(46,Ne,28,5,"ng-template",28,29,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(48,Je,95,20,"ng-template",28,30,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("title","Requested ","Personal"===n.loanType?"Personal":"fd-against-loans"===n.loanType?"FD against":"Garanteed"," Loan"),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.searchFormGroup),e.\u0275\u0275advance(28),e.\u0275\u0275property("ngForOf",n.status),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",!n.loanList||0===n.loanList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==n.loanList.length))},dependencies:[m.NgClass,m.NgForOf,m.NgIf,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l._,l.JJ,l.JL,h.V,g.N9,l.sg,l.u,m.DatePipe],styles:[".passbook_box[_ngcontent-%COMP%]{width:70%;height:120px;background-color:#f0f0f0;display:flex;justify-content:center;align-items:center;border-radius:5px;border:#000000 solid 1px}.passbook_box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;border-radius:5px}"]}),a})();function Ye(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275element(1,"img",31),e.\u0275\u0275elementStart(2,"p",32),e.\u0275\u0275text(3,"No Transanction found in the current filter."),e.\u0275\u0275elementEnd()())}const We=function(a,r,t,n){return{"badge-soft-primary":a,"badge-soft-info":r,"badge-soft-warning":t,"badge-soft-dark":n}};function He(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"a",43),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction4(4,We,"credit"===t.transaction_type,"interest"===t.transaction_type,"debit"===t.transaction_type,"ccredit"===t.transaction_type)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,t.transaction_type)," ")}}function Qe(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementStart(5,"b"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" Principal Amount : \u20b9",t.principal_component," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" Interest Amount : \u20b9",t.interest_component," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Amount : \u20b9",t.amount," ")}}function Xe(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" \u20b9",t.amount," ")}}function Ze(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,"")}}function et(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,"")}}function tt(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275template(10,He,3,9,"a",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"number"),e.\u0275\u0275element(14,"br"),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td"),e.\u0275\u0275template(18,Qe,7,3,"div",42),e.\u0275\u0275template(19,Xe,2,1,"div",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td"),e.\u0275\u0275template(21,Ze,2,1,"span",42),e.\u0275\u0275template(22,et,2,1,"span",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"td"),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"td"),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"date"),e.\u0275\u0275elementEnd()()),2&a){const t=r.$implicit,n=r.index,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((o.page-1)*o.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.user.name," (",t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.loan.loan_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.transaction_id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.transaction_type),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" Amount: \u20b9",e.\u0275\u0275pipeBind1(13,14,null==t||null==t.loan?null:t.loan.approved_loan_amount)," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Requested Date: ",e.\u0275\u0275pipeBind1(16,16,null==t||null==t.loan?null:t.loan.created_date)," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","interest"===t.transaction_type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","credit"===t.transaction_type),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","debit"===t.transaction_type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","ccredit"===t.transaction_type),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.payment_method),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(27,18,t.transaction_date,"medium"))}}function nt(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",33)(1,"table",34)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Loan ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Transanction Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Transanction Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Approval Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Credit Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"th"),e.\u0275\u0275text(19,"Debit Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"th"),e.\u0275\u0275text(21,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"th"),e.\u0275\u0275text(23,"Date"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"tbody"),e.\u0275\u0275template(25,tt,28,21,"tr",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",36)(27,"div",37)(28,"div",38),e.\u0275\u0275text(29,"Showing "),e.\u0275\u0275elementStart(30,"b"),e.\u0275\u0275text(31),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",37)(34,"div",39)(35,"ngb-pagination",40),e.\u0275\u0275listener("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.page=o)})("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.pageChange(o))}),e.\u0275\u0275elementEnd()()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(25),e.\u0275\u0275property("ngForOf",t.transanctionList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}let at=(()=>{class a{constructor(t){this.loanService=t,this.transanctionList=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"User Loan Transanction",active:!0}],this.searchFormGroup=new l.cw({name:new l.NI(""),loan_id:new l.NI(""),transaction_id:new l.NI(""),transaction_type:new l.NI(""),payment_method:new l.NI(""),transaction_date:new l.NI("")}),this.getTransanctionList()}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getTransanctionList()}getTransanctionList(){const t=this.searchFormGroup.value,n=[];Object.keys(t).forEach(i=>{null!==t[i]&&""!==t[i]&&n.push(`${i}=${encodeURIComponent(t[i])}`)});const o=n.join("&");this.loanService.getUserTransaction(this.page,this.pageSize,o).subscribe(i=>{this.transanctionList=i.data.userTransaction,this.total=i.data.total})}refresh(){this.page=1,this.searchFormGroup.reset(),this.getTransanctionList()}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(x))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-loan-transanction"]],decls:49,vars:4,consts:[[1,"container-fluid"],["title","Transanction History",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-2"],["type","search","id","searchInput","placeholder","Search for Name / User Id / Email id...","formControlName","name",1,"form-control"],["type","search","id","searchInput","placeholder","Search for Loan Number","formControlName","loan_id",1,"form-control"],["type","search","id","searchInput","placeholder","Search for Transanction Id..","formControlName","transaction_id",1,"form-control"],[1,"col-lg-1"],["formControlName","transaction_type",1,"form-control"],["value",""],["value","credit"],["value","debit"],["value","interest"],["formControlName","payment_method",1,"form-control"],["value","EMI"],["value","Bank Transfer"],["value","Cash"],["value","Cheque"],["type","date","id","searchInput","formControlName","transaction_date",1,"form-control"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["href","javascript: void(0);","class","badge font-size-11 m-1",3,"ngClass",4,"ngIf"],[4,"ngIf"],["href","javascript: void(0);",1,"badge","font-size-11","m-1",3,"ngClass"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",8),e.\u0275\u0275element(12,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",8),e.\u0275\u0275element(14,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",12)(16,"select",13)(17,"option",14),e.\u0275\u0275text(18,"Transanction Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"option",15),e.\u0275\u0275text(20,"Credit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"option",16),e.\u0275\u0275text(22,"Debit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"option",17),e.\u0275\u0275text(24,"Interest"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(25,"div",12)(26,"select",18)(27,"option",14),e.\u0275\u0275text(28,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"option",19),e.\u0275\u0275text(30,"EMI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"option",20),e.\u0275\u0275text(32,"Bank Transfer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"option",21),e.\u0275\u0275text(34,"Cash"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"option",22),e.\u0275\u0275text(36,"Cheque"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"div",8),e.\u0275\u0275element(38,"input",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",12)(40,"button",24),e.\u0275\u0275listener("click",function(){return n.getTransanctionList()}),e.\u0275\u0275element(41,"i",25),e.\u0275\u0275text(42," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"div",12)(44,"button",26),e.\u0275\u0275listener("click",function(){return n.refresh()}),e.\u0275\u0275element(45,"i",27),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(46,"div",2),e.\u0275\u0275template(47,Ye,4,0,"div",28),e.\u0275\u0275template(48,nt,36,7,"div",29),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.searchFormGroup),e.\u0275\u0275advance(40),e.\u0275\u0275property("ngIf",!n.transanctionList||0===n.transanctionList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==n.transanctionList.length))},dependencies:[m.NgClass,m.NgForOf,m.NgIf,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,h.V,g.N9,l.sg,l.u,m.DecimalPipe,m.TitleCasePipe,m.DatePipe]}),a})();function ot(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",29),e.\u0275\u0275element(1,"img",30),e.\u0275\u0275elementStart(2,"p",31),e.\u0275\u0275text(3,"No Transanction found in the current filter."),e.\u0275\u0275elementEnd()())}function rt(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()()),2&a){const t=r.$implicit,n=r.index,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((o.page-1)*o.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.user.name," (",t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.loan.loan_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(11,7,t.transaction_date,"medium")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.description," ")}}function lt(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Loan ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Description"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"tbody"),e.\u0275\u0275template(17,rt,14,10,"tr",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",35)(19,"div",36)(20,"div",37),e.\u0275\u0275text(21,"Showing "),e.\u0275\u0275elementStart(22,"b"),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",36)(26,"div",38)(27,"ngb-pagination",39),e.\u0275\u0275listener("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.page=o)})("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.pageChange(o))}),e.\u0275\u0275elementEnd()()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(17),e.\u0275\u0275property("ngForOf",t.transanctionList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}let it=(()=>{class a{constructor(t){this.loanService=t,this.transanctionList=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"Admin Loan Transanction",active:!0}],this.searchFormGroup=new l.cw({name:new l.NI(""),transaction_id:new l.NI(""),transaction_type:new l.NI(""),payment_method:new l.NI(""),transaction_date:new l.NI("")}),this.getTransanctionList()}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getTransanctionList()}getTransanctionList(){const t=this.searchFormGroup.value,n=[];Object.keys(t).forEach(i=>{null!==t[i]&&""!==t[i]&&n.push(`${i}=${encodeURIComponent(t[i])}`)});const o=n.join("&");this.loanService.getAdminTransaction(this.page,this.pageSize,o).subscribe(i=>{this.transanctionList=i.data.adminTransanction,this.total=i.data.total})}refresh(){this.searchFormGroup.reset(),this.page=1,this.getTransanctionList()}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(x))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-admin-loan-transanction"]],decls:45,vars:4,consts:[[1,"container-fluid"],["title","Transanction History",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-4"],["type","search","id","searchInput","placeholder","Search for Name / User Id / Email id...","formControlName","name",1,"form-control"],[1,"col-lg-2"],["type","search","id","searchInput","placeholder","Search for Transanction Id..","formControlName","transaction_id",1,"form-control"],[1,"col-lg-1"],["formControlName","transaction_type",1,"form-control"],["value",""],["value","credit"],["value","debit"],["formControlName","payment_method",1,"form-control"],["value","EMI"],["value","Bank Transfer"],["value","Cash"],["value","Cheque"],["type","date","id","searchInput","formControlName","transaction_date",1,"form-control"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",10),e.\u0275\u0275element(12,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",12)(14,"select",13)(15,"option",14),e.\u0275\u0275text(16,"Transanction Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"option",15),e.\u0275\u0275text(18,"Credit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"option",16),e.\u0275\u0275text(20,"Debit"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"div",12)(22,"select",17)(23,"option",14),e.\u0275\u0275text(24,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"option",18),e.\u0275\u0275text(26,"EMI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"option",19),e.\u0275\u0275text(28,"Bank Transfer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"option",20),e.\u0275\u0275text(30,"Cash"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"option",21),e.\u0275\u0275text(32,"Cheque"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(33,"div",10),e.\u0275\u0275element(34,"input",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",12)(36,"button",23),e.\u0275\u0275listener("click",function(){return n.getTransanctionList()}),e.\u0275\u0275element(37,"i",24),e.\u0275\u0275text(38," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"div",12)(40,"button",25),e.\u0275\u0275listener("click",function(){return n.refresh()}),e.\u0275\u0275element(41,"i",26),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(42,"div",2),e.\u0275\u0275template(43,ot,4,0,"div",27),e.\u0275\u0275template(44,lt,28,7,"div",28),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.searchFormGroup),e.\u0275\u0275advance(36),e.\u0275\u0275property("ngIf",!n.transanctionList||0===n.transanctionList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==n.transanctionList.length))},dependencies:[m.NgForOf,m.NgIf,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,h.V,g.N9,l.sg,l.u,m.DatePipe]}),a})();var st=p(8386),dt=p(7185),N=p(150);function mt(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"User ID is required."),e.\u0275\u0275elementEnd())}function pt(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,mt,2,0,"small",24),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.paymentFormGroup.get("id"))||null==n.errors?null:n.errors.required)}}function ct(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",25)(1,"small")(2,"strong"),e.\u0275\u0275text(3,"Name:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.userDetails.name,"")}}function ut(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Loan ID is required."),e.\u0275\u0275elementEnd())}function _t(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,ut,2,0,"small",24),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.paymentFormGroup.get("loanId"))||null==n.errors?null:n.errors.required)}}function gt(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Amount is required."),e.\u0275\u0275elementEnd())}function ft(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Amount must be at least 1."),e.\u0275\u0275elementEnd())}function vt(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,gt,2,0,"small",24),e.\u0275\u0275template(2,ft,2,0,"small",24),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();let n,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.paymentFormGroup.get("amount"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.paymentFormGroup.get("amount"))||null==o.errors?null:o.errors.min)}}function xt(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",25)(1,"small")(2,"strong"),e.\u0275\u0275text(3,"Total Bill Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" \u20b9",t.totalPayableAmount,"")}}function ht(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"option",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=r.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function St(a,r){1&a&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Payment Method is required."),e.\u0275\u0275elementEnd())}function yt(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,St,2,0,"small",24),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.paymentFormGroup.get("paymentMethod"))||null==n.errors?null:n.errors.required)}}function bt(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"small",32),e.\u0275\u0275element(1,"i",33),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" This will mark the loan as completed and waive the total remaining balance of \u20b9",t.totalOutstandingAmount,". This action cannot be undone. ")}}const Ct=function(){return{standalone:!0}};function Et(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",7)(1,"div",27)(2,"input",28),e.\u0275\u0275listener("ngModelChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.clearOffLoan=o)})("change",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.onClearOffLoanChange())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"label",29),e.\u0275\u0275element(4,"i",30),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,bt,3,1,"small",31),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",t.clearOffLoan)("ngModelOptions",e.\u0275\u0275pureFunction0(4,Ct)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Clear Off Loan (Waive total outstanding: \u20b9",t.totalOutstandingAmount,") "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.clearOffLoan)}}function Lt(a,r){1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Export CSV"),e.\u0275\u0275elementEnd())}function Tt(a,r){1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Exporting..."),e.\u0275\u0275elementEnd())}function Rt(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"option",59),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=r.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function Ft(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"option",59),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=r.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function Pt(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"option",59),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&a){const t=r.$implicit;e.\u0275\u0275property("value",t.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.label)}}function wt(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",60)(1,"div",61)(2,"span",62),e.\u0275\u0275text(3,"Loading..."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"p",63),e.\u0275\u0275text(5,"Loading loan reports..."),e.\u0275\u0275elementEnd()())}function qt(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"small",23),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" Last: ",e.\u0275\u0275pipeBind2(2,1,t.lastTransactionDate,"shortDate")," ")}}function kt(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",82)(1,"small",23),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"number"),e.\u0275\u0275elementEnd()()),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(3,1,t.daysSinceLastPayment,"1.0-0")," days since last payment")}}const Mt=function(a,r){return{"bg-success":a,"bg-warning":r}};function Gt(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td")(2,"div",68)(3,"span",69),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"small",23),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"span",70),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"small",71),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(11,"td")(12,"div",68)(13,"span",69),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"small",23),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"small",23),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"small",23),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"td")(22,"div",68)(23,"span",72),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"span",73),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"span",74),e.\u0275\u0275text(28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"small",23),e.\u0275\u0275text(30),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"td")(32,"div",68)(33,"div",75),e.\u0275\u0275element(34,"div",76),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"small",23),e.\u0275\u0275text(36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"small",23),e.\u0275\u0275text(38),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(39,qt,3,4,"small",77),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"td")(41,"span",78),e.\u0275\u0275text(42),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(43,kt,4,4,"div",79),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"td")(45,"button",80),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2),d=e.\u0275\u0275reference(177);return e.\u0275\u0275resetView(s.viewLoanDetails(i._id,d))}),e.\u0275\u0275element(46,"i",81),e.\u0275\u0275text(47," View Details "),e.\u0275\u0275elementEnd()()()}if(2&a){const t=r.$implicit,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.loan_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.loan_type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.getStatusClass(t.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.status," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",n.formatCurrency(t.approved_loan_amount)," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.user.name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.user.user_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.user.email),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.user.phone),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("Disbursed: ",n.formatCurrency(t.totalDisbursed),""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Paid: ",n.formatCurrency(t.totalPaid),""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Outstanding: ",n.formatCurrency(t.totalOutstanding),""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Interest: ",n.formatCurrency(t.totalInterest),""),e.\u0275\u0275advance(4),e.\u0275\u0275styleProp("width",t.paymentPercentage,"%"),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(23,Mt,t.paymentPercentage>=100,t.paymentPercentage<100)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",n.formatPercentage(t.paymentPercentage)," completed"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.paymentTransactions," payments"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.lastTransactionDate),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",n.getRiskLevelClass(n.getRiskLevel(t))),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.getRiskLevel(t)," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.daysSinceLastPayment>0),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",n.loadingDetail)}}function At(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div",64)(1,"table",65)(2,"thead",66)(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Loan Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"User Information"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Financial Summary"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Payment Progress"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Risk Level"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Actions"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"tbody"),e.\u0275\u0275template(17,Gt,48,26,"tr",67),e.\u0275\u0275elementEnd()()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(17),e.\u0275\u0275property("ngForOf",t.loanReports)}}function Nt(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",60),e.\u0275\u0275element(1,"i",83),e.\u0275\u0275elementStart(2,"p",63),e.\u0275\u0275text(3,"No loan reports found"),e.\u0275\u0275elementEnd()())}function Dt(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",84)(1,"div",85)(2,"div",86),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",85)(5,"div",87)(6,"ngb-pagination",88),e.\u0275\u0275listener("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.currentPage=o)})("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onPageChange(o))}),e.\u0275\u0275elementEnd()()()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate3(" Showing ",(t.currentPage-1)*t.limit+1," to ",t.Math.min(t.currentPage*t.limit,t.totalRecords)," of ",t.totalRecords," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("page",t.currentPage)("pageSize",t.limit)("collectionSize",t.totalRecords)("maxSize",5)("rotate",!0)}}function Vt(a,r){1&a&&(e.\u0275\u0275elementStart(0,"div",60)(1,"div",61)(2,"span",62),e.\u0275\u0275text(3,"Loading..."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"p",63),e.\u0275\u0275text(5,"Loading loan details..."),e.\u0275\u0275elementEnd()())}function Ot(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"p")(1,"strong"),e.\u0275\u0275text(2,"Address:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.loan.user.address,"")}}function jt(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td")(5,"span"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()),2&a){const t=r.$implicit,n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,8,t.transaction_date,"short")),e.\u0275\u0275advance(3),e.\u0275\u0275classMapInterpolate1("badge badge-soft-","credit"===t.transaction_type?"success":"debit"===t.transaction_type?"info":"warning",""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.transaction_type," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.formatCurrency(t.amount)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.description||"-"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.payment_method||"-")}}function $t(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"div")(1,"div",95)(2,"div",31)(3,"h5",96),e.\u0275\u0275text(4,"Loan Information"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",5)(6,"div",29)(7,"div",97)(8,"p")(9,"strong"),e.\u0275\u0275text(10,"Loan ID:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"p")(13,"strong"),e.\u0275\u0275text(14,"Type:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"p")(17,"strong"),e.\u0275\u0275text(18,"Status:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"span",98),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"p")(22,"strong"),e.\u0275\u0275text(23,"Purpose:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",97)(26,"p")(27,"strong"),e.\u0275\u0275text(28,"Requested Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"p")(31,"strong"),e.\u0275\u0275text(32,"Approved Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"p")(35,"strong"),e.\u0275\u0275text(36,"Interest Rate:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"p")(39,"strong"),e.\u0275\u0275text(40,"Duration:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(41),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(42,"div",95)(43,"div",31)(44,"h5",96),e.\u0275\u0275text(45,"User Information"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"div",5)(47,"div",29)(48,"div",97)(49,"p")(50,"strong"),e.\u0275\u0275text(51,"Name:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(52),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"p")(54,"strong"),e.\u0275\u0275text(55,"User ID:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(56),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"p")(58,"strong"),e.\u0275\u0275text(59,"Email:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(60),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(61,"div",97)(62,"p")(63,"strong"),e.\u0275\u0275text(64,"Phone:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(65),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(66,Ot,4,1,"p",38),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(67,"div",95)(68,"div",31)(69,"h5",96),e.\u0275\u0275text(70,"Financial Summary"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(71,"div",5)(72,"div",29)(73,"div",99)(74,"div",100)(75,"h4",72),e.\u0275\u0275text(76),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(77,"p",101),e.\u0275\u0275text(78,"Total Disbursed"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(79,"div",99)(80,"div",100)(81,"h4",73),e.\u0275\u0275text(82),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(83,"p",101),e.\u0275\u0275text(84,"Total Paid"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(85,"div",99)(86,"div",100)(87,"h4",74),e.\u0275\u0275text(88),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(89,"p",101),e.\u0275\u0275text(90,"Total Outstanding"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(91,"div",99)(92,"div",100)(93,"h4",102),e.\u0275\u0275text(94),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(95,"p",101),e.\u0275\u0275text(96,"Payment Progress"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(97,"div",103)(98,"div",30)(99,"h6"),e.\u0275\u0275text(100,"Outstanding Breakdown"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(101,"div",29)(102,"div",104)(103,"p")(104,"strong"),e.\u0275\u0275text(105,"Principal:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(106),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(107,"div",104)(108,"p")(109,"strong"),e.\u0275\u0275text(110,"Interest:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(111),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(112,"div",104)(113,"p")(114,"strong"),e.\u0275\u0275text(115,"Penalties:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(116),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(117,"div",104)(118,"p")(119,"strong"),e.\u0275\u0275text(120,"Fees:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(121),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(122,"div",95)(123,"div",31)(124,"h5",96),e.\u0275\u0275text(125,"Transaction Metrics"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(126,"div",5)(127,"div",29)(128,"div",105)(129,"p")(130,"strong"),e.\u0275\u0275text(131,"Total Transactions:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(132),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(133,"p")(134,"strong"),e.\u0275\u0275text(135,"Payment Transactions:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(136),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(137,"div",105)(138,"p")(139,"strong"),e.\u0275\u0275text(140,"Average Payment:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(141),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(142,"p")(143,"strong"),e.\u0275\u0275text(144,"Payment Frequency:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(145),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(146,"div",105)(147,"p")(148,"strong"),e.\u0275\u0275text(149,"Loan Age:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(150),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(151,"p")(152,"strong"),e.\u0275\u0275text(153,"Last Payment:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(154),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(155,"div",21)(156,"div",31)(157,"h5",96),e.\u0275\u0275text(158,"Recent Transactions (Last 10)"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(159,"div",5)(160,"div",64)(161,"table",106)(162,"thead")(163,"tr")(164,"th"),e.\u0275\u0275text(165,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(166,"th"),e.\u0275\u0275text(167,"Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(168,"th"),e.\u0275\u0275text(169,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(170,"th"),e.\u0275\u0275text(171,"Description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(172,"th"),e.\u0275\u0275text(173,"Payment Method"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(174,"tbody"),e.\u0275\u0275template(175,jt,13,11,"tr",67),e.\u0275\u0275elementEnd()()()()()()),2&a){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.loan.loan_id,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.loan.loan_type,""),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",t.getStatusClass(t.selectedLoanReport.loan.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.loan.status," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.loan.purpose,""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",t.formatCurrency(t.selectedLoanReport.loan.requested_loan_amount),""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.formatCurrency(t.selectedLoanReport.loan.approved_loan_amount),""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.loan.interest_rate,"%"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2(" ",t.selectedLoanReport.loan.duration," ",t.selectedLoanReport.loan.interval,""),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.loan.user.name,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.loan.user.user_id,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.loan.user.email,""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.loan.user.phone,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.selectedLoanReport.loan.user.address),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedLoanReport.financial_summary.totalDisbursed)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedLoanReport.financial_summary.totalPaid)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedLoanReport.financial_summary.totalOutstanding)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.formatPercentage(t.selectedLoanReport.performance_metrics.paymentPercentage)),e.\u0275\u0275advance(12),e.\u0275\u0275textInterpolate1(" ",t.formatCurrency(t.selectedLoanReport.financial_summary.outstandingBreakdown.principal),""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",t.formatCurrency(t.selectedLoanReport.financial_summary.outstandingBreakdown.interest),""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",t.formatCurrency(t.selectedLoanReport.financial_summary.outstandingBreakdown.penalties),""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",t.formatCurrency(t.selectedLoanReport.financial_summary.outstandingBreakdown.fees),""),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.transaction_metrics.totalTransactions,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.transaction_metrics.paymentTransactions,""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",t.formatCurrency(t.selectedLoanReport.transaction_metrics.averagePayment),""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.transaction_metrics.paymentFrequency,""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.timeline_analysis.loanAge," days"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.selectedLoanReport.timeline_analysis.daysSinceLastTransaction," days ago"),e.\u0275\u0275advance(21),e.\u0275\u0275property("ngForOf",t.selectedLoanReport.recent_transactions)}}function Bt(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",89)(1,"h4",90),e.\u0275\u0275text(2,"Loan Comprehensive Report"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",91),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.dismiss())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",92),e.\u0275\u0275template(5,Vt,6,0,"div",55),e.\u0275\u0275template(6,$t,176,30,"div",38),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",93)(8,"button",94),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.dismiss())}),e.\u0275\u0275text(9,"Close"),e.\u0275\u0275elementEnd()()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.loadingDetail),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.selectedLoanReport&&!t.loadingDetail)}}const zt=[{path:"loans/:type",component:Ke},{path:"pay-loan",component:(()=>{class a{constructor(t,n,o,i){this.userService=t,this.loanService=n,this.toast=o,this.route=i,this.userDetails=null,this.loanList=[],this.paymentMethods=["Cash"],this.totalPayableAmount=0,this.totalOutstandingAmount=0,this.userId="",this.clearOffLoan=!1,this.userDetails=null,this.loanList=[]}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"Pay Loans",active:!0}],this.paymentFormGroup=new l.cw({id:new l.NI("",l.kI.required),loanId:new l.NI("",l.kI.required),amount:new l.NI("",[l.kI.required,l.kI.min(1)]),paymentMethod:new l.NI("",l.kI.required)}),this.route.queryParams.subscribe(t=>{t.user&&(this.paymentFormGroup.patchValue({id:t.user}),this.userId=t.user,this.getDetails()),t.id&&(this.paymentFormGroup.patchValue({loanId:t.id}),this.getTotalPaybleAmount({_id:t.id}))})}getDetails(){let t=this.paymentFormGroup.value.id;t||(t=this.userId),this.userService.getBasicUserProfile(t).subscribe({next:n=>{n.status&&(this.userDetails=n?.data?.user,this.getAllLoans(this.userDetails._id))},error:n=>{console.error("Error fetching user details:",n)}})}getTotalPaybleAmount(t){this.clearOffLoan=!1,this.loanService.getTotalPaymentAmount(t._id).subscribe({next:n=>{console.log("Total Payment Amount:",n),n.status?(this.totalPayableAmount=n?.data?.outstandingAmount,this.totalOutstandingAmount=parseFloat(n?.data?.breakdown?.totalRemainingAmount)||0,this.paymentFormGroup.patchValue({amount:this.totalPayableAmount}),this.paymentFormGroup.get("amount")?.disable()):console.error("Error fetching total payment amount:",n.message)},error:n=>{console.error("Error fetching total payment amount:",n)}})}onClearOffLoanChange(){this.clearOffLoan?(this.paymentFormGroup.get("paymentMethod")?.disable(),this.paymentFormGroup.get("amount")?.disable()):(this.paymentFormGroup.get("paymentMethod")?.enable(),this.paymentFormGroup.get("amount")?.disable())}getAllLoans(t){this.loanService.getAllUserActiveLoans(t).subscribe({next:n=>{n.status?this.loanList=n?.data?.loans.map(o=>({_id:o._id,label:`${o.loan_id} Amount: ${o.approved_loan_amount} Purpose: ${o.purpose}`})):console.error("Error fetching loans:",n.message)},error:n=>{console.error("Error fetching loans:",n)}})}payLoanFees(){const t=this.paymentFormGroup.get("loanId")?.value;if(!t)return void this.toast.error("Please select a loan");if(this.clearOffLoan)return void this.loanService.clearOffLoan({loanId:t}).subscribe({next:o=>{"success"===o.status?(this.toast.success(`Loan cleared off successfully. Waived amount: \u20b9${o.data.waivedAmount}`),this.paymentFormGroup.reset(),this.totalPayableAmount=0,this.totalOutstandingAmount=0,this.clearOffLoan=!1,this.loanList=[],this.userDetails=null):this.toast.error("Error clearing off loan")},error:o=>{this.toast.error(o.error?.message||"Error clearing off loan")}});if(this.paymentFormGroup.invalid)return void console.error("Payment form is invalid");const n={...this.paymentFormGroup.getRawValue(),amount:this.totalPayableAmount};n.amount=parseFloat(n.amount),n.amount<=0?this.toast.error("Amount must be greater than zero"):n.amount>this.totalPayableAmount?this.toast.error("Amount exceeds total payable amount"):this.loanService.recordPayment(n).subscribe({next:o=>{o.status?(this.toast.success("Payment recorded successfully"),this.paymentFormGroup.reset(),this.totalPayableAmount=0,this.totalOutstandingAmount=0,this.loanList=[],this.userDetails=null):this.toast.error("Error recording payment")},error:o=>{this.toast.error(o.error?.message||"Error recording payment")}})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(st.i),e.\u0275\u0275directiveInject(x),e.\u0275\u0275directiveInject(dt._W),e.\u0275\u0275directiveInject(v.gz))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-pay-loan"]],decls:35,vars:17,consts:[[1,"container-fluid"],["title","Pay Loan",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-12",3,"formGroup"],[1,"mb-3","col-lg-12"],["for","userId",1,"form-label"],["type","text","id","userId","formControlName","id","placeholder","Enter user ID",1,"form-control",3,"blur"],["class","text-danger",4,"ngIf"],["class","mt-1",4,"ngIf"],["for","cardId",1,"form-label"],["formControlName","loanId",3,"items","bindValue","bindLabel","change"],[1,"mb-3","col-lg-6"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter amount","min","1",1,"form-control"],["for","paymentMethod",1,"form-label"],["id","paymentMethod","formControlName","paymentMethod",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],["class","mb-3 col-lg-12",4,"ngIf"],["type","submit",1,"btn",3,"ngClass","disabled","click"],[1,"mdi","me-1",3,"ngClass"],[1,"text-danger"],[4,"ngIf"],[1,"mt-1"],[3,"ngValue"],[1,"form-check"],["type","checkbox","id","clearOffLoan",1,"form-check-input",3,"ngModel","ngModelOptions","ngModelChange","change"],["for","clearOffLoan",1,"form-check-label","text-danger","fw-bold"],[1,"mdi","mdi-alert-circle","me-1"],["class","text-muted",4,"ngIf"],[1,"text-muted"],[1,"mdi","mdi-information-outline","me-1"]],template:function(t,n){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",2)(8,"div",7)(9,"label",8),e.\u0275\u0275text(10,"User ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"input",9),e.\u0275\u0275listener("blur",function(){return n.getDetails()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,pt,2,1,"div",10),e.\u0275\u0275template(13,ct,5,1,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",7)(15,"label",12),e.\u0275\u0275text(16,"Loan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"ng-select",13),e.\u0275\u0275listener("change",function(i){return n.getTotalPaybleAmount(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,_t,2,1,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",14)(20,"label",15),e.\u0275\u0275text(21,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(22,"input",16),e.\u0275\u0275template(23,vt,3,2,"div",10),e.\u0275\u0275template(24,xt,5,1,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",14)(26,"label",17),e.\u0275\u0275text(27,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"select",18),e.\u0275\u0275template(29,ht,2,2,"option",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(30,yt,2,1,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,Et,7,5,"div",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"button",21),e.\u0275\u0275listener("click",function(){return n.payLoanFees()}),e.\u0275\u0275element(33,"i",22),e.\u0275\u0275text(34),e.\u0275\u0275elementEnd()()()()()()()),2&t){let o,i,s,d;e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",n.paymentFormGroup),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==(o=n.paymentFormGroup.get("id"))?null:o.touched)&&(null==(o=n.paymentFormGroup.get("id"))?null:o.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.userDetails),e.\u0275\u0275advance(4),e.\u0275\u0275property("items",n.loanList)("bindValue","_id")("bindLabel","label"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(i=n.paymentFormGroup.get("loanId"))?null:i.touched)&&(null==(i=n.paymentFormGroup.get("loanId"))?null:i.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(s=n.paymentFormGroup.get("amount"))?null:s.touched)&&(null==(s=n.paymentFormGroup.get("amount"))?null:s.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.userDetails),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.paymentMethods),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(d=n.paymentFormGroup.get("paymentMethod"))?null:d.touched)&&(null==(d=n.paymentFormGroup.get("paymentMethod"))?null:d.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.totalOutstandingAmount>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.clearOffLoan?"btn-danger":"btn-primary")("disabled",!n.clearOffLoan&&n.paymentFormGroup.invalid),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.clearOffLoan?"mdi-close-circle":"mdi-cash"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.clearOffLoan?"Clear Off Loan":"Submit Payment"," ")}},dependencies:[m.NgClass,m.NgForOf,m.NgIf,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.Wl,l.EJ,l.JJ,l.JL,l.qQ,l.On,h.V,l.sg,l.u,N.w9]}),a})()},{path:"user-transanction",component:at},{path:"admin-transanction",component:it},{path:"reports",component:(()=>{class a{constructor(t,n){this.loanService=t,this.modalService=n,this.loanReports=[],this.summary={},this.currentPage=1,this.totalPages=0,this.totalRecords=0,this.limit=20,this.loading=!1,this.loadingDetail=!1,this.filters={search:"",status:"",loan_type:"",loan_id:"",name:"",email:"",user_id:"",min_outstanding:"",max_outstanding:"",start_date:"",end_date:"",sortBy:"created_date",sortOrder:"desc"},this.statusOptions=["Pending","Approved","Rejected","Completed"],this.loanTypeOptions=["Personal","Garanteed"],this.sortOptions=[{value:"created_date",label:"Loan Creation Date"},{value:"userName",label:"User Name"},{value:"totalOutstanding",label:"Outstanding Amount"},{value:"totalDisbursed",label:"Disbursed Amount"},{value:"paymentPercentage",label:"Payment Progress"},{value:"lastTransactionDate",label:"Last Transaction"},{value:"approved_loan_amount",label:"Approved Amount"}],this.selectedLoanReport=null,this.isExporting=!1,this.Math=Math}ngOnInit(){this.breadCrumbItems=[{label:"Loan Management"},{label:"Reports",active:!0}],this.loadReports()}loadReports(t=1){this.loading=!0,this.currentPage=t;const n={...this.filters,page:this.currentPage,limit:this.limit};this.loanService.getAllUsersLoanReport(n).subscribe({next:o=>{"success"===o.status&&(console.log("Loan Report Response:",o),this.loanReports=o.data.loans,this.summary=o.data.summary,this.totalPages=o.data.pagination.pages,this.totalRecords=o.data.pagination.total),this.loading=!1},error:o=>{console.error("Error loading loan reports:",o),this.loading=!1}})}onFilterChange(){this.currentPage=1,this.loadReports()}clearFilters(){this.filters={search:"",status:"",loan_type:"",loan_id:"",name:"",email:"",user_id:"",min_outstanding:"",max_outstanding:"",start_date:"",end_date:"",sortBy:"created_date",sortOrder:"desc"},this.loadReports()}onPageChange(t){this.loadReports(t)}viewLoanDetails(t,n){this.loadingDetail=!0,this.selectedLoanReport=null,this.loanService.getLoanComprehensiveReport(t).subscribe({next:o=>{"success"===o.status&&(this.selectedLoanReport=o.data,this.modalService.open(n,{size:"xl",scrollable:!0})),this.loadingDetail=!1},error:o=>{console.error("Error loading loan details:",o),this.loadingDetail=!1}})}getRiskLevel(t){if(t.totalOutstanding<=0)return"Low";const n=t.totalOutstanding/t.totalDisbursed,o=t.daysSinceLastPayment||0;return n>.8||o>90?"High":n>.5||o>30?"Medium":"Low"}getRiskLevelClass(t){switch(t){case"High":return"bg-danger";case"Medium":return"bg-warning";case"Low":return"bg-success";default:return"bg-secondary"}}getStatusClass(t){switch(t){case"Approved":return"bg-success";case"Pending":return"bg-warning";case"Rejected":return"bg-danger";case"Completed":return"bg-info";default:return"bg-secondary"}}formatCurrency(t){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t||0)}formatPercentage(t){return`${(t||0).toFixed(1)}%`}exportToCSV(){this.isExporting=!0;const t=this.loanReports.map(n=>({"Loan ID":n.loan_id,"User Name":n.user.name,"User ID":n.user.user_id,Email:n.user.email,Phone:n.user.phone,"Loan Type":n.loan_type,Status:n.status,"Requested Amount":n.requested_loan_amount,"Approved Amount":n.approved_loan_amount,"Interest Rate":`${n.interest_rate}%`,Duration:`${n.duration} ${n.interval}`,Purpose:n.purpose,"Total Disbursed":n.totalDisbursed,"Total Paid":n.totalPaid,"Outstanding Amount":n.totalOutstanding,"Payment Progress":`${n.paymentPercentage?.toFixed(1)}%`,"Risk Level":this.getRiskLevel(n),"Start Date":n.start_date,"Created Date":n.created_date,"Last Payment":n.lastTransactionDate||"N/A"}));this.downloadCSV(t,"loan-reports"),this.isExporting=!1}downloadCSV(t,n){const o=this.convertToCSV(t),i=new Blob([o],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),d=URL.createObjectURL(i);s.setAttribute("href",d),s.setAttribute("download",`${n}-${(new Date).toISOString().split("T")[0]}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}convertToCSV(t){const n="object"!=typeof t?JSON.parse(t):t;let o="";o+=Object.keys(n[0]).join(",")+"\r\n";for(let s=0;s<n.length;s++){let d="";for(let u in n[s])""!==d&&(d+=","),d+=`"${n[s][u]}"`;o+=d+"\r\n"}return o}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(x),e.\u0275\u0275directiveInject(g.FF))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-reports"]],decls:178,vars:32,consts:[[1,"container-fluid"],["title","Loan Reports",3,"breadcrumbItems"],[1,"row","mb-4"],[1,"col-xl-3","col-md-6"],[1,"card","mini-stats-wid"],[1,"card-body"],[1,"d-flex"],[1,"flex-grow-1"],[1,"text-muted","fw-medium"],[1,"mb-0"],[1,"flex-shrink-0","align-self-center"],[1,"mini-stat-icon","avatar-sm","rounded-circle","bg-primary"],[1,"avatar-title"],[1,"bx","bx-file","text-white","font-size-16"],[1,"mini-stat-icon","avatar-sm","rounded-circle","bg-info"],[1,"bx","bx-money","text-white","font-size-16"],[1,"mini-stat-icon","avatar-sm","rounded-circle","bg-warning"],[1,"bx","bx-error-circle","text-white","font-size-16"],[1,"mini-stat-icon","avatar-sm","rounded-circle","bg-success"],[1,"bx","bx-check-circle","text-white","font-size-16"],[1,"col-xl-3","col-md-3"],[1,"card"],[1,"d-flex","align-items-center"],[1,"text-muted"],[1,"flex-shrink-0"],[1,"badge","badge-soft-success","font-size-12"],[1,"badge","badge-soft-warning","font-size-12"],[1,"badge","badge-soft-danger","font-size-12"],[1,"badge","badge-soft-info","font-size-12"],[1,"row"],[1,"col-12"],[1,"card-header"],[1,"row","align-items-center"],[1,"col"],[1,"card-title"],[1,"col-auto"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],[1,"bx","bx-download","me-1"],[4,"ngIf"],[1,"row","mb-3"],[1,"col-xl-3","col-md-6","mb-2"],[1,"form-label"],["type","text","placeholder","Search by name, email, loan ID...",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-xl-2","col-md-6","mb-2"],[1,"form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","placeholder","Min amount",1,"form-control",3,"ngModel","ngModelChange"],["type","number","placeholder","Max amount",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-xl-1","col-md-6","mb-2","d-flex","align-items-end"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bx","bx-refresh"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],["value","desc"],["value","asc"],["class","text-center py-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","row align-items-center mt-3",4,"ngIf"],["detailModal",""],[3,"value"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"table-responsive"],[1,"table","table-nowrap","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-column"],[1,"fw-medium"],[1,"badge","font-size-11",3,"ngClass"],[1,"text-muted","mt-1"],[1,"text-success"],[1,"text-info"],[1,"text-warning"],[1,"progress","mb-1",2,"height","6px"],[1,"progress-bar",3,"ngClass"],["class","text-muted",4,"ngIf"],[1,"badge","badge-danger","font-size-11",3,"ngClass"],["class","mt-1",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm",3,"disabled","click"],[1,"bx","bx-show","me-1"],[1,"mt-1"],[1,"bx","bx-file-blank","display-4","text-muted"],[1,"row","align-items-center","mt-3"],[1,"col-sm-6"],[1,"dataTables_info"],[1,"dataTables_paginate","paging_simple_numbers","float-end"],[3,"page","pageSize","collectionSize","maxSize","rotate","pageChange"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body",2,"max-height","600px","overflow-y","auto"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"card","mb-3"],[1,"card-title","mb-0"],[1,"col-md-6"],[1,"badge",3,"ngClass"],[1,"col-md-3"],[1,"text-center"],[1,"text-muted","mb-0"],[1,"text-primary"],[1,"row","mt-3"],[1,"col-3"],[1,"col-md-4"],[1,"table","table-sm"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"p",8),e.\u0275\u0275text(9,"Total Loans"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"h4",9),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"number"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",10)(14,"div",11)(15,"span",12),e.\u0275\u0275element(16,"i",13),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(17,"div",3)(18,"div",4)(19,"div",5)(20,"div",6)(21,"div",7)(22,"p",8),e.\u0275\u0275text(23,"Total Disbursed"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"h4",9),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",10)(27,"div",14)(28,"span",12),e.\u0275\u0275element(29,"i",15),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(30,"div",3)(31,"div",4)(32,"div",5)(33,"div",6)(34,"div",7)(35,"p",8),e.\u0275\u0275text(36,"Total Outstanding"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"h4",9),e.\u0275\u0275text(38),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"div",10)(40,"div",16)(41,"span",12),e.\u0275\u0275element(42,"i",17),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(43,"div",3)(44,"div",4)(45,"div",5)(46,"div",6)(47,"div",7)(48,"p",8),e.\u0275\u0275text(49,"Total Paid"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"h4",9),e.\u0275\u0275text(51),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(52,"div",10)(53,"div",18)(54,"span",12),e.\u0275\u0275element(55,"i",19),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(56,"div",2)(57,"div",20)(58,"div",21)(59,"div",5)(60,"div",22)(61,"div",7)(62,"span",23),e.\u0275\u0275text(63,"Active Loans"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"h5",9),e.\u0275\u0275text(65),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(66,"div",24)(67,"span",25),e.\u0275\u0275text(68,"Active"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(69,"div",20)(70,"div",21)(71,"div",5)(72,"div",22)(73,"div",7)(74,"span",23),e.\u0275\u0275text(75,"Pending Loans"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(76,"h5",9),e.\u0275\u0275text(77),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(78,"div",24)(79,"span",26),e.\u0275\u0275text(80,"Pending"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(81,"div",20)(82,"div",21)(83,"div",5)(84,"div",22)(85,"div",7)(86,"span",23),e.\u0275\u0275text(87,"Rejected Loans"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(88,"h5",9),e.\u0275\u0275text(89),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(90,"div",24)(91,"span",27),e.\u0275\u0275text(92,"Rejected"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(93,"div",20)(94,"div",21)(95,"div",5)(96,"div",22)(97,"div",7)(98,"span",23),e.\u0275\u0275text(99,"Document Fees"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"h5",9),e.\u0275\u0275text(101),e.\u0275\u0275pipe(102,"number"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(103,"div",24)(104,"span",28),e.\u0275\u0275text(105,"\u20b9"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(106,"div",29)(107,"div",30)(108,"div",21)(109,"div",31)(110,"div",32)(111,"div",33)(112,"h4",34),e.\u0275\u0275text(113,"Loan Reports"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(114,"div",35)(115,"button",36),e.\u0275\u0275listener("click",function(){return n.exportToCSV()}),e.\u0275\u0275element(116,"i",37),e.\u0275\u0275template(117,Lt,2,0,"span",38),e.\u0275\u0275template(118,Tt,2,0,"span",38),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(119,"div",5)(120,"div",39)(121,"div",40)(122,"label",41),e.\u0275\u0275text(123,"Search"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(124,"input",42),e.\u0275\u0275listener("ngModelChange",function(i){return n.filters.search=i})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(125,"div",43)(126,"label",41),e.\u0275\u0275text(127,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(128,"select",44),e.\u0275\u0275listener("ngModelChange",function(i){return n.filters.status=i})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementStart(129,"option",45),e.\u0275\u0275text(130,"All Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(131,Rt,2,2,"option",46),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(132,"div",43)(133,"label",41),e.\u0275\u0275text(134,"Loan Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(135,"select",44),e.\u0275\u0275listener("ngModelChange",function(i){return n.filters.loan_type=i})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementStart(136,"option",45),e.\u0275\u0275text(137,"All Types"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(138,Ft,2,2,"option",46),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(139,"div",43)(140,"label",41),e.\u0275\u0275text(141,"Min Outstanding"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(142,"input",47),e.\u0275\u0275listener("ngModelChange",function(i){return n.filters.min_outstanding=i})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(143,"div",43)(144,"label",41),e.\u0275\u0275text(145,"Max Outstanding"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(146,"input",48),e.\u0275\u0275listener("ngModelChange",function(i){return n.filters.max_outstanding=i})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(147,"div",49)(148,"button",50),e.\u0275\u0275listener("click",function(){return n.clearFilters()}),e.\u0275\u0275element(149,"i",51),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(150,"div",39)(151,"div",40)(152,"label",41),e.\u0275\u0275text(153,"Start Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(154,"input",52),e.\u0275\u0275listener("ngModelChange",function(i){return n.filters.start_date=i})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(155,"div",40)(156,"label",41),e.\u0275\u0275text(157,"End Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(158,"input",52),e.\u0275\u0275listener("ngModelChange",function(i){return n.filters.end_date=i})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(159,"div",40)(160,"label",41),e.\u0275\u0275text(161,"Sort By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(162,"select",44),e.\u0275\u0275listener("ngModelChange",function(i){return n.filters.sortBy=i})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275template(163,Pt,2,2,"option",46),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(164,"div",40)(165,"label",41),e.\u0275\u0275text(166,"Sort Order"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(167,"select",44),e.\u0275\u0275listener("ngModelChange",function(i){return n.filters.sortOrder=i})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementStart(168,"option",53),e.\u0275\u0275text(169,"Descending"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(170,"option",54),e.\u0275\u0275text(171,"Ascending"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(172,wt,6,0,"div",55),e.\u0275\u0275template(173,At,18,1,"div",56),e.\u0275\u0275template(174,Nt,4,0,"div",55),e.\u0275\u0275template(175,Dt,7,8,"div",57),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(176,Bt,10,2,"ng-template",null,58,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,28,n.summary.totalLoans||0)),e.\u0275\u0275advance(14),e.\u0275\u0275textInterpolate(n.formatCurrency(n.summary.totalDisbursedAmount)),e.\u0275\u0275advance(13),e.\u0275\u0275textInterpolate(n.formatCurrency(n.summary.totalOutstandingAmount)),e.\u0275\u0275advance(13),e.\u0275\u0275textInterpolate(n.formatCurrency(n.summary.totalPaidAmount)),e.\u0275\u0275advance(14),e.\u0275\u0275textInterpolate(n.summary.activeLoans||0),e.\u0275\u0275advance(12),e.\u0275\u0275textInterpolate(n.summary.pendingLoans||0),e.\u0275\u0275advance(12),e.\u0275\u0275textInterpolate(n.summary.rejectedLoans||0),e.\u0275\u0275advance(12),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(102,30,50*(n.summary.activeLoans||0))),e.\u0275\u0275advance(14),e.\u0275\u0275property("disabled",n.isExporting),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!n.isExporting),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isExporting),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngModel",n.filters.search),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.status),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.statusOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.loan_type),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.loanTypeOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.min_outstanding),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.max_outstanding),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngModel",n.filters.start_date),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.end_date),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.sortBy),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.sortOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.sortOrder),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",n.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.loading&&0===n.loanReports.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.loading&&n.loanReports.length>0))},dependencies:[m.NgClass,m.NgForOf,m.NgIf,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.On,h.V,g.N9,m.DecimalPipe,m.DatePipe]}),a})()}];let Ut=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[v.Bz.forChild(zt),v.Bz]}),a})();var Jt=p(9668);let Kt=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[m.CommonModule,l.u5,Jt.v,g.jF,g.bz,l.UX,N.A0,Ut]}),a})()}}]);
"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[713],{713:(zt,h,s)=>{s.r(h),s.d(h,{GiftCardModule:()=>Rt});var p=s(6895),f=s(9158),l=s(4006),t=s(4650),g=s(7185),u=s(9061),x=s(3344);function G(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",13)(1,"image-cropper",14),t.\u0275\u0275listener("loadImageFailed",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.loadImageFailed())})("imageCropped",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.imageCropped(r))}),t.\u0275\u0275elementEnd()()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("imageChangedEvent",e.imageChangedEvent)("maintainAspectRatio",!1)("imageQuality",50)("canvasRotation",e.canvasRotation)("transform",e.transform)}}let S=(()=>{class n{constructor(e,i){this.toast=e,this.activeModal=i,this.transform={},this.imageChangedEvent=null,this.croppedImage="",this.canvasRotation=0,this.rotation=0,this.scale=1,this.croppedImageEvent=new t.EventEmitter}ngOnInit(){this.imageChangedEvent=this.data.file}cropImage(){this.croppedImage?this.activeModal.close({image:this.croppedImage,from:this.data.from}):this.toast.error("Please select an image to crop","Error",{timeOut:3e3,progressBar:!0,closeButton:!0})}dataURLtoBlob(e){const i=atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(i.length),d=new Uint8Array(o);for(let c=0;c<i.length;c++)d[c]=i.charCodeAt(c);return new Blob([o],{type:r})}imageCropped(e){this.croppedImage=e.base64}rotateLeft(){this.canvasRotation--,this.flipAfterRotate()}rotateRight(){this.canvasRotation++,this.flipAfterRotate()}flipAfterRotate(){this.transform={...this.transform,flipH:this.transform.flipV,flipV:this.transform.flipH}}flipHorizontal(){this.transform={...this.transform,flipH:!this.transform.flipH}}flipVertical(){this.transform={...this.transform,flipV:!this.transform.flipV}}updateRotation(){this.transform={...this.transform,rotate:this.rotation}}zoomOut(){this.scale-=.1,this.transform={...this.transform,scale:this.scale}}zoomIn(){this.scale+=.1,this.transform={...this.transform,scale:this.scale}}loadImageFailed(){console.error("Image load failed"),this.toast.error("Image load failed","Error",{timeOut:3e3,progressBar:!0,closeButton:!0})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(g._W),t.\u0275\u0275directiveInject(u.Kz))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-image-cropper"]],viewQuery:function(e,i){if(1&e&&t.\u0275\u0275viewQuery(n,7),2&e){let r;t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(i.imageCropper=r.first)}},inputs:{data:"data"},outputs:{croppedImageEvent:"croppedImageEvent"},decls:23,vars:2,consts:[[1,"card-body"],[1,"row"],[1,"col-12"],[1,"card"],[1,"col-lg-8"],["class","img-container",4,"ngIf"],[1,"text-center","mt-2"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"btn","btn-secondary","btn-sm","ms-1",3,"click"],[1,"col-lg-4"],[1,"text-center"],[3,"src"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"img-container"],["format","jpeg",3,"imageChangedEvent","maintainAspectRatio","imageQuality","canvasRotation","transform","loadImageFailed","imageCropped"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",0)(5,"div",1)(6,"div",4),t.\u0275\u0275template(7,G,2,5,"div",5),t.\u0275\u0275elementStart(8,"div",6)(9,"button",7),t.\u0275\u0275listener("click",function(){return i.rotateLeft()}),t.\u0275\u0275text(10,"Rotate left"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"button",8),t.\u0275\u0275listener("click",function(){return i.rotateRight()}),t.\u0275\u0275text(12,"Rotate right"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"button",8),t.\u0275\u0275listener("click",function(){return i.flipHorizontal()}),t.\u0275\u0275text(14,"Flip horizontal"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"button",8),t.\u0275\u0275listener("click",function(){return i.flipVertical()}),t.\u0275\u0275text(16,"Flip vertical"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(17,"div",9)(18,"div",10),t.\u0275\u0275element(19,"img",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"div",6)(21,"button",12),t.\u0275\u0275listener("click",function(){return i.cropImage()}),t.\u0275\u0275text(22,"Crop Image"),t.\u0275\u0275elementEnd()()()()()()()()()),2&e&&(t.\u0275\u0275advance(7),t.\u0275\u0275property("ngIf",i.imageChangedEvent),t.\u0275\u0275advance(12),t.\u0275\u0275property("src",i.croppedImage,t.\u0275\u0275sanitizeUrl))},dependencies:[p.NgIf,x.ap]}),n})();var m=s(2340),I=s(529);let _=(()=>{class n{constructor(e){this.http=e}getGift(e=0,i=10,r=""){return this.http.get(`${m.N.api_url}gifts?page=${e}&limit=${i}&search=${r}`)}createGift(e){return this.http.post(`${m.N.api_url}gifts`,e)}editGift(e){return this.http.put(`${m.N.api_url}gifts`,e)}getGiftById(e){return this.http.get(`${m.N.api_url}gifts/${e}`)}deleteGift(e){return this.http.delete(`${m.N.api_url}gifts/${e}`)}createDistributor(e){return this.http.post(`${m.N.api_url}gifts/distributors`,e)}getDistributors(e=0,i=10,r=""){return this.http.get(`${m.N.api_url}gifts/distributors/all?page=${e}&limit=${i}&searchText=${r}`)}getDistributorById(e){return this.http.get(`${m.N.api_url}gifts/distributors/${e}`)}updateDistributor(e){return this.http.put(`${m.N.api_url}gifts/distributors`,e)}deleteDistributor(e){return this.http.delete(`${m.N.api_url}gifts/distributors/${e}`)}createGiftReceive(e){return this.http.post(`${m.N.api_url}gifts/receive`,e)}getGiftReceives(e=1,i=10,r={}){let o=`page=${e}&limit=${i}`;return r.name&&(o+=`&name=${r.name}`),r.distributor&&(o+=`&distributor=${r.distributor}`),r.transaction_date&&(o+=`&transaction_date=${r.transaction_date}`),this.http.get(`${m.N.api_url}gifts/receive?${o}`)}getGiftReceiveById(e){return this.http.get(`${m.N.api_url}gifts/receive/${e}`)}deleteGiftReceive(e){return this.http.delete(`${m.N.api_url}gifts/receive/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(I.eN))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=s(9234);function y(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Gift name is required."),t.\u0275\u0275elementEnd())}function E(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Max 100 characters allowed."),t.\u0275\u0275elementEnd())}function F(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275template(1,y,2,0,"small",27),t.\u0275\u0275template(2,E,2,0,"small",27),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i,r;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.addGiftFormGroup.get("gift_name"))||null==i.errors?null:i.errors.required),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(r=e.addGiftFormGroup.get("gift_name"))||null==r.errors?null:r.errors.maxlength)}}function w(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Description is required."),t.\u0275\u0275elementEnd())}function D(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Max 500 characters allowed."),t.\u0275\u0275elementEnd())}function T(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275template(1,w,2,0,"small",27),t.\u0275\u0275template(2,D,2,0,"small",27),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i,r;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.addGiftFormGroup.get("description"))||null==i.errors?null:i.errors.required),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(r=e.addGiftFormGroup.get("description"))||null==r.errors?null:r.errors.maxlength)}}function N(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Quantity is required."),t.\u0275\u0275elementEnd())}function A(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Minimum quantity is 1."),t.\u0275\u0275elementEnd())}function k(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275template(1,N,2,0,"small",27),t.\u0275\u0275template(2,A,2,0,"small",27),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i,r;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.addGiftFormGroup.get("quantity"))||null==i.errors?null:i.errors.required),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(r=e.addGiftFormGroup.get("quantity"))||null==r.errors?null:r.errors.min)}}function V(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Profile image is required."),t.\u0275\u0275elementEnd())}function q(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275template(1,V,2,0,"small",27),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.addGiftFormGroup.get("gift_image"))||null==i.errors?null:i.errors.required)}}function L(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Status is required."),t.\u0275\u0275elementEnd())}function j(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275template(1,L,2,0,"small",27),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.addGiftFormGroup.get("status"))||null==i.errors?null:i.errors.required)}}function R(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"form",8)(1,"div",2)(2,"div",9)(3,"div",10)(4,"label",11),t.\u0275\u0275text(5,"Gift Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(6,"input",12),t.\u0275\u0275template(7,F,3,2,"div",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",10)(9,"label",14),t.\u0275\u0275text(10,"Description"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(11,"textarea",15),t.\u0275\u0275template(12,T,3,2,"div",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",10)(14,"label",16),t.\u0275\u0275text(15,"Available Quantity"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(16,"input",17),t.\u0275\u0275template(17,k,3,2,"div",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"div",18)(19,"div",10)(20,"label"),t.\u0275\u0275text(21,"Profile Image "),t.\u0275\u0275elementStart(22,"span",19),t.\u0275\u0275text(23,"*"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(24,"input",20),t.\u0275\u0275listener("change",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onFileSelected(r,"gift_image"))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(25,q,2,1,"div",13),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(26,"div",10)(27,"label",21),t.\u0275\u0275text(28,"Status"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"select",22)(30,"option",23),t.\u0275\u0275text(31,"Select Status"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(32,"option",24),t.\u0275\u0275text(33,"Active"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(34,"option",25),t.\u0275\u0275text(35,"Inactive"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(36,j,2,1,"div",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(37,"button",26),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onSubmit())}),t.\u0275\u0275text(38,"Submit"),t.\u0275\u0275elementEnd()()()()}if(2&n){const e=t.\u0275\u0275nextContext();let i,r,o,d,c;t.\u0275\u0275property("formGroup",e.addGiftFormGroup),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngIf",(null==(i=e.addGiftFormGroup.get("gift_name"))?null:i.touched)&&(null==(i=e.addGiftFormGroup.get("gift_name"))?null:i.invalid)),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",(null==(r=e.addGiftFormGroup.get("description"))?null:r.touched)&&(null==(r=e.addGiftFormGroup.get("description"))?null:r.invalid)),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",(null==(o=e.addGiftFormGroup.get("quantity"))?null:o.touched)&&(null==(o=e.addGiftFormGroup.get("quantity"))?null:o.invalid)),t.\u0275\u0275advance(7),t.\u0275\u0275attribute("required",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==(d=e.addGiftFormGroup.get("gift_image"))?null:d.touched)&&(null==(d=e.addGiftFormGroup.get("gift_image"))?null:d.invalid)),t.\u0275\u0275advance(11),t.\u0275\u0275property("ngIf",(null==(c=e.addGiftFormGroup.get("status"))?null:c.touched)&&(null==(c=e.addGiftFormGroup.get("status"))?null:c.invalid)),t.\u0275\u0275advance(1),t.\u0275\u0275property("disabled",e.addGiftFormGroup.invalid)}}function z(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Gift name is required."),t.\u0275\u0275elementEnd())}function $(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Max 100 characters allowed."),t.\u0275\u0275elementEnd())}function M(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275template(1,z,2,0,"small",27),t.\u0275\u0275template(2,$,2,0,"small",27),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i,r;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.editGiftFormGroup.get("gift_name"))||null==i.errors?null:i.errors.required),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(r=e.editGiftFormGroup.get("gift_name"))||null==r.errors?null:r.errors.maxlength)}}function B(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Description is required."),t.\u0275\u0275elementEnd())}function P(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Max 500 characters allowed."),t.\u0275\u0275elementEnd())}function O(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275template(1,B,2,0,"small",27),t.\u0275\u0275template(2,P,2,0,"small",27),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i,r;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.editGiftFormGroup.get("description"))||null==i.errors?null:i.errors.required),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(r=e.editGiftFormGroup.get("description"))||null==r.errors?null:r.errors.maxlength)}}function Q(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Quantity is required."),t.\u0275\u0275elementEnd())}function H(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Minimum quantity is 1."),t.\u0275\u0275elementEnd())}function J(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275template(1,Q,2,0,"small",27),t.\u0275\u0275template(2,H,2,0,"small",27),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i,r;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.editGiftFormGroup.get("quantity"))||null==i.errors?null:i.errors.required),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(r=e.editGiftFormGroup.get("quantity"))||null==r.errors?null:r.errors.min)}}function U(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Profile image is required."),t.\u0275\u0275elementEnd())}function Y(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275template(1,U,2,0,"small",27),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.editGiftFormGroup.get("gift_image"))||null==i.errors?null:i.errors.required)}}function W(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Status is required."),t.\u0275\u0275elementEnd())}function K(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275template(1,W,2,0,"small",27),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.editGiftFormGroup.get("status"))||null==i.errors?null:i.errors.required)}}function X(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"form",8)(1,"div",2)(2,"div",9)(3,"div",10)(4,"label",11),t.\u0275\u0275text(5,"Gift Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(6,"input",12),t.\u0275\u0275template(7,M,3,2,"div",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",10)(9,"label",14),t.\u0275\u0275text(10,"Description"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(11,"textarea",15),t.\u0275\u0275template(12,O,3,2,"div",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",10)(14,"label",16),t.\u0275\u0275text(15,"Available Quantity"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(16,"input",17),t.\u0275\u0275template(17,J,3,2,"div",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"div",18)(19,"div",10)(20,"label"),t.\u0275\u0275text(21,"Profile Image "),t.\u0275\u0275elementStart(22,"span",19),t.\u0275\u0275text(23,"*"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(24,"input",20),t.\u0275\u0275listener("change",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.onFileSelected(r,"gift_image"))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(25,Y,2,1,"div",13),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(26,"div",10)(27,"label",21),t.\u0275\u0275text(28,"Status"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"select",22)(30,"option",23),t.\u0275\u0275text(31,"Select Status"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(32,"option",24),t.\u0275\u0275text(33,"Active"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(34,"option",25),t.\u0275\u0275text(35,"Inactive"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(36,K,2,1,"div",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(37,"button",26),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.onEdit())}),t.\u0275\u0275text(38,"Submit"),t.\u0275\u0275elementEnd()()()()}if(2&n){const e=t.\u0275\u0275nextContext();let i,r,o,d,c;t.\u0275\u0275property("formGroup",e.editGiftFormGroup),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngIf",(null==(i=e.editGiftFormGroup.get("gift_name"))?null:i.touched)&&(null==(i=e.editGiftFormGroup.get("gift_name"))?null:i.invalid)),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",(null==(r=e.editGiftFormGroup.get("description"))?null:r.touched)&&(null==(r=e.editGiftFormGroup.get("description"))?null:r.invalid)),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",(null==(o=e.editGiftFormGroup.get("quantity"))?null:o.touched)&&(null==(o=e.editGiftFormGroup.get("quantity"))?null:o.invalid)),t.\u0275\u0275advance(7),t.\u0275\u0275attribute("required",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==(d=e.editGiftFormGroup.get("gift_image"))?null:d.touched)&&(null==(d=e.editGiftFormGroup.get("gift_image"))?null:d.invalid)),t.\u0275\u0275advance(11),t.\u0275\u0275property("ngIf",(null==(c=e.editGiftFormGroup.get("status"))?null:c.touched)&&(null==(c=e.editGiftFormGroup.get("status"))?null:c.invalid)),t.\u0275\u0275advance(1),t.\u0275\u0275property("disabled",e.editGiftFormGroup.invalid)}}function Z(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",5),t.\u0275\u0275element(4,"img",31),t.\u0275\u0275elementStart(5,"div",32)(6,"h5",33)(7,"a",34),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"p",35),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd()()()()()()),2&n){const e=t.\u0275\u0275nextContext();let i,r,o;t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("src",(null==(i=e.addGiftFormGroup.get("gift_image"))?null:i.value)||"assets/img/gift-card.png",t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",""===(null==(r=e.addGiftFormGroup.get("gift_name"))?null:r.value)?"Gift Name":null==(r=e.addGiftFormGroup.get("gift_name"))?null:r.value,""),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(""===(null==(o=e.addGiftFormGroup.get("description"))?null:o.value)?"Gift Description":null==(o=e.addGiftFormGroup.get("description"))?null:o.value)}}function tt(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",5),t.\u0275\u0275element(4,"img",31),t.\u0275\u0275elementStart(5,"div",32)(6,"h5",33)(7,"a",34),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"p",35),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd()()()()()()),2&n){const e=t.\u0275\u0275nextContext();let i,r,o;t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("src",(null==(i=e.editGiftFormGroup.get("gift_image"))?null:i.value)||"assets/img/gift-card.png",t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",""===(null==(r=e.editGiftFormGroup.get("gift_name"))?null:r.value)?"Gift Name":null==(r=e.editGiftFormGroup.get("gift_name"))?null:r.value,""),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(""===(null==(o=e.editGiftFormGroup.get("description"))?null:o.value)?"Gift Description":null==(o=e.editGiftFormGroup.get("description"))?null:o.value)}}let b=(()=>{class n{constructor(e,i,r,o,d){this.modalService=e,this.toast=i,this.route=r,this.router=o,this.giftService=d,this.id=this.route.snapshot.queryParamMap.get("id")}ngOnInit(){this.id?(this.breadCrumbItems=[{label:"Gift Card Management"},{label:"Edit",active:!0}],this.getGiftById()):this.breadCrumbItems=[{label:"Gift Card Management"},{label:"Add",active:!0}],this.addGiftFormGroup=new l.cw({gift_name:new l.NI("",[l.kI.required,l.kI.maxLength(100)]),description:new l.NI("",[l.kI.required,l.kI.maxLength(500)]),quantity:new l.NI("",[l.kI.required,l.kI.min(1)]),gift_image:new l.NI("",[l.kI.required]),status:new l.NI("",[l.kI.required])}),this.editGiftFormGroup=new l.cw({_id:new l.NI("",[l.kI.required]),gift_name:new l.NI("",[l.kI.required,l.kI.maxLength(100)]),description:new l.NI("",[l.kI.required,l.kI.maxLength(500)]),quantity:new l.NI("",[l.kI.required,l.kI.min(1)]),gift_image:new l.NI("",[l.kI.required]),status:new l.NI("",[l.kI.required])})}getGiftById(){this.id?this.giftService.getGiftById(this.id).subscribe({next:e=>{e&&e.data?this.editGiftFormGroup.patchValue({_id:e.data.gift._id,gift_name:e.data.gift.gift_name,description:e.data.gift.description,quantity:e.data.gift.quantity,gift_image:e.data.gift.gift_image,status:e.data.gift.status}):(console.error("No data found for the given ID"),this.router.navigate(["/gift-card-management/list"]))},error:e=>{console.error("Error fetching gift by ID:",e),this.router.navigate(["/gift-card-management/list"])}}):(console.warn("No ID provided for fetching gift details"),this.router.navigate(["/gift-card-management/list"]))}onEdit(){this.editGiftFormGroup.valid?this.giftService.editGift(this.editGiftFormGroup.value).subscribe({next:i=>{this.toast.success("Gift updated successfully","Success"),this.editGiftFormGroup.reset(),this.router.navigate(["/gift-card-management/list"])},error:i=>{console.error("Error updating gift:",i),this.toast.error("Error updating gift","Error")}}):console.log("Form is invalid")}onFileSelected(e,i){const r=e.target;r.files&&r.files.length>0&&this.openModalAsComponent({file:e,from:i})}openModalAsComponent(e){const i=this.modalService.open(S,{centered:!0,size:"xl"});i.componentInstance.data=e,i.result.then(r=>{r&&r.image&&(this.addGiftFormGroup.patchValue({gift_image:r.image}),this.editGiftFormGroup.patchValue({gift_image:r.image}))}).catch(r=>{console.log("Modal dismissed:",r)})}onSubmit(){this.addGiftFormGroup.valid?this.giftService.createGift(this.addGiftFormGroup.value).subscribe({next:i=>{this.toast.success("Gift created successfully","Success"),this.addGiftFormGroup.reset()},error:i=>{console.error("Error creating gift:",i)}}):console.log("Form is invalid")}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(u.FF),t.\u0275\u0275directiveInject(g._W),t.\u0275\u0275directiveInject(f.gz),t.\u0275\u0275directiveInject(f.F0),t.\u0275\u0275directiveInject(_))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-add-gift-card"]],decls:10,vars:5,consts:[[1,"container-fluid"],["title","Gift Card",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-9"],[1,"card"],[1,"card-body"],[3,"formGroup",4,"ngIf"],["class","col-lg-3",4,"ngIf"],[3,"formGroup"],[1,"col-12"],[1,"mb-3"],["for","giftName",1,"form-label"],["type","text","id","giftName","formControlName","gift_name","placeholder","Gift Name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","description",1,"form-label"],["id","description","formControlName","description","rows","4","placeholder","Enter description",1,"form-control"],["for","quantity",1,"form-label"],["type","number","id","quantity","formControlName","quantity","placeholder","Available Quantity",1,"form-control"],[1,"col-md-12"],[1,"text-danger"],["type","file",1,"form-control",3,"change"],["for","status_",1,"form-label"],["id","status_","formControlName","status",1,"form-select"],["value","","disabled","","selected",""],["value","Active"],["value","Inactive"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],[1,"col-lg-3"],[1,"ng-star-inserted"],[1,"card","text-center"],["alt","Header Avatar","width","150",3,"src"],[1,"mt-2"],[1,"font-size-15","mb-1"],["href","javascript: void(0);",1,"text-dark"],[1,"text-muted"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"app-page-title",1),t.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t.\u0275\u0275template(6,R,39,8,"form",6),t.\u0275\u0275template(7,X,39,8,"form",6),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(8,Z,11,3,"div",7),t.\u0275\u0275template(9,tt,11,3,"div",7),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("breadcrumbItems",i.breadCrumbItems),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",!i.id),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.id),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!i.id),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.id))},dependencies:[p.NgIf,v.V,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.sg,l.u]}),n})();var et=s(5226),C=s.n(et);function nt(n,a){1&n&&(t.\u0275\u0275elementStart(0,"div",22)(1,"div",23)(2,"span",24),t.\u0275\u0275text(3,"Loading..."),t.\u0275\u0275elementEnd()()())}function it(n,a){1&n&&(t.\u0275\u0275elementStart(0,"div",25),t.\u0275\u0275element(1,"img",26),t.\u0275\u0275elementStart(2,"p",27),t.\u0275\u0275text(3,"No Distributor found."),t.\u0275\u0275elementEnd()())}const rt=function(n,a,e){return{"bg-success":n,"bg-warning":a,"bg-danger":e}};function at(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr")(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td"),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"td"),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"td"),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"td")(12,"span",31),t.\u0275\u0275text(13),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"td"),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"date"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"td")(18,"ul",32)(19,"li",33)(20,"a",34),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,d=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(d.deleteDistributor(o._id,o.name))}),t.\u0275\u0275element(21,"i",35),t.\u0275\u0275elementEnd()()()()()}if(2&n){const e=a.$implicit,i=a.index,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate((r.page-1)*r.pageSize+i+1),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.distributor_id),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.email),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.phone),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction3(11,rt,"Active"===e.status,"Inactive"===e.status,"Suspended"===e.status)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.status," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(16,8,e.created_date,"dd MMM yyyy"))}}function lt(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"ngb-pagination",36),t.\u0275\u0275listener("pageChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.page=r)})("pageChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.pageChanged(r))}),t.\u0275\u0275elementEnd()()()}if(2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("page",e.page)("pageSize",e.pageSize)("collectionSize",e.total)}}function ot(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",2)(1,"div",28)(2,"table",29)(3,"thead")(4,"tr")(5,"th"),t.\u0275\u0275text(6,"S.No."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"th"),t.\u0275\u0275text(8,"Distributor ID"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"th"),t.\u0275\u0275text(10,"Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"th"),t.\u0275\u0275text(12,"Email"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"th"),t.\u0275\u0275text(14,"Phone"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"th"),t.\u0275\u0275text(16,"Status"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"th"),t.\u0275\u0275text(18,"Created At"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"th"),t.\u0275\u0275text(20,"Actions"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(21,"tbody"),t.\u0275\u0275template(22,at,22,15,"tr",30),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(23,lt,3,3,"div",19),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(22),t.\u0275\u0275property("ngForOf",e.distributorList),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.total>e.pageSize)}}function dt(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Name is required."),t.\u0275\u0275elementEnd())}function st(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Name must be at least 3 characters."),t.\u0275\u0275elementEnd())}function mt(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",56),t.\u0275\u0275template(1,dt,2,0,"small",57),t.\u0275\u0275template(2,st,2,0,"small",57),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i,r;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.addDistrubutorForm.get("name"))||null==i.errors?null:i.errors.required),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(r=e.addDistrubutorForm.get("name"))||null==r.errors?null:r.errors.minlength)}}function ct(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Email is required."),t.\u0275\u0275elementEnd())}function pt(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Enter a valid email."),t.\u0275\u0275elementEnd())}function ut(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",56),t.\u0275\u0275template(1,ct,2,0,"small",57),t.\u0275\u0275template(2,pt,2,0,"small",57),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i,r;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.addDistrubutorForm.get("email"))||null==i.errors?null:i.errors.required),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(r=e.addDistrubutorForm.get("email"))||null==r.errors?null:r.errors.email)}}function ft(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Phone is required."),t.\u0275\u0275elementEnd())}function gt(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Enter a valid 10-digit phone number."),t.\u0275\u0275elementEnd())}function _t(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",56),t.\u0275\u0275template(1,ft,2,0,"small",57),t.\u0275\u0275template(2,gt,2,0,"small",57),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i,r;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.addDistrubutorForm.get("phone"))||null==i.errors?null:i.errors.required),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(r=e.addDistrubutorForm.get("phone"))||null==r.errors?null:r.errors.pattern)}}function vt(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Password is required."),t.\u0275\u0275elementEnd())}function ht(n,a){1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1,"Password must be at least 6 characters."),t.\u0275\u0275elementEnd())}function xt(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div",56),t.\u0275\u0275template(1,vt,2,0,"small",57),t.\u0275\u0275template(2,ht,2,0,"small",57),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);let i,r;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=e.addDistrubutorForm.get("password"))||null==i.errors?null:i.errors.required),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(r=e.addDistrubutorForm.get("password"))||null==r.errors?null:r.errors.minlength)}}function bt(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",37)(1,"h5",38),t.\u0275\u0275text(2,"Create Distributor"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",39),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(o.dismiss("Cross click"))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"form",40)(5,"div",41)(6,"div",2)(7,"div",42)(8,"div",43)(9,"label",44),t.\u0275\u0275text(10,"Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(11,"input",45),t.\u0275\u0275template(12,mt,3,2,"div",46),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",43)(14,"label",47),t.\u0275\u0275text(15,"Email"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(16,"input",48),t.\u0275\u0275template(17,ut,3,2,"div",46),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"div",43)(19,"label",49),t.\u0275\u0275text(20,"Phone"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(21,"input",50),t.\u0275\u0275template(22,_t,3,2,"div",46),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"div",43)(24,"label",51),t.\u0275\u0275text(25,"Password"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(26,"input",52),t.\u0275\u0275template(27,xt,3,2,"div",46),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(28,"div",53)(29,"button",54),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275resetView(o.close("Close click"))}),t.\u0275\u0275text(30,"Close"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(31,"button",55),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.createDistrubutor())}),t.\u0275\u0275text(32,"Create"),t.\u0275\u0275elementEnd()()()}if(2&n){const e=t.\u0275\u0275nextContext();let i,r,o,d;t.\u0275\u0275advance(4),t.\u0275\u0275property("formGroup",e.addDistrubutorForm),t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf",(null==(i=e.addDistrubutorForm.get("name"))?null:i.touched)&&(null==(i=e.addDistrubutorForm.get("name"))?null:i.invalid)),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",(null==(r=e.addDistrubutorForm.get("email"))?null:r.touched)&&(null==(r=e.addDistrubutorForm.get("email"))?null:r.invalid)),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",(null==(o=e.addDistrubutorForm.get("phone"))?null:o.touched)&&(null==(o=e.addDistrubutorForm.get("phone"))?null:o.invalid)),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",(null==(d=e.addDistrubutorForm.get("password"))?null:d.touched)&&(null==(d=e.addDistrubutorForm.get("password"))?null:d.invalid)),t.\u0275\u0275advance(4),t.\u0275\u0275property("disabled",e.addDistrubutorForm.invalid)}}let Ct=(()=>{class n{constructor(e,i,r){this.modalService=e,this.giftService=i,this.toast=r,this.distributorList=[],this.total=0,this.page=1,this.pageSize=10,this.searchText="",this.isLoading=!1}ngOnInit(){this.breadCrumbItems=[{label:"Gift Card Management"},{label:"Distributor",active:!0}],this.addDistrubutorForm=new l.cw({name:new l.NI("",[l.kI.required,l.kI.minLength(3)]),email:new l.NI("",[l.kI.required,l.kI.email]),phone:new l.NI("",[l.kI.required,l.kI.pattern("^[0-9]{10}$")]),password:new l.NI("",[l.kI.required,l.kI.minLength(6)])}),this.loadDistributors()}loadDistributors(){this.isLoading=!0,this.giftService.getDistributors(this.page,this.pageSize,this.searchText).subscribe(e=>{e&&"success"===e.status&&(this.distributorList=e.data.distributors||[],this.total=e.data.total||0),this.isLoading=!1},e=>{console.error("Error loading distributors:",e),this.toast.error("Failed to load distributors","Error"),this.isLoading=!1})}openModal(e){this.modalService.open(e,{backdrop:"static",keyboard:!1,size:"lg"})}createDistrubutor(){this.addDistrubutorForm.valid?this.giftService.createDistributor(this.addDistrubutorForm.value).subscribe(i=>{i&&"success"===i.status&&(this.toast.success("Distributor created successfully","Success"),this.addDistrubutorForm.reset(),this.modalService.dismissAll(),this.loadDistributors())},i=>{console.error("Error creating distributor:",i),this.toast.error(i.error?.message||"Failed to create distributor","Error")}):this.addDistrubutorForm.markAllAsTouched()}deleteDistributor(e,i){C().fire({title:"Are you sure?",text:`Do you want to delete distributor "${i}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(r=>{r.isConfirmed&&this.giftService.deleteDistributor(e).subscribe(o=>{this.toast.success("Distributor deleted successfully","Success"),this.loadDistributors()},o=>{console.error("Error deleting distributor:",o),this.toast.error("Failed to delete distributor","Error")})})}onSearch(e){this.searchText=e.target.value,this.page=1,this.loadDistributors()}pageChanged(e){this.page=e,this.loadDistributors()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(u.FF),t.\u0275\u0275directiveInject(_),t.\u0275\u0275directiveInject(g._W))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-distributor"]],decls:23,vars:4,consts:[[1,"container-fluid"],["title","Distributor",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","border-bottom"],[1,"row","mb-0"],[1,"col-sm-4"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","autocomplete","off","id","searchTableList","placeholder","Search...",1,"form-control",3,"input"],[1,"bx","bx-search-alt","search-icon"],[1,"col-sm-8"],[1,"text-sm-end"],["type","button",1,"btn","btn-success","btn-rounded","mb-2","me-2",3,"click"],[1,"mdi","mdi-plus","mr-1"],[1,"card-body"],["class","d-flex justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","row",4,"ngIf"],["role","document"],["addDistrubutorModal",""],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","150px"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-muted","mt-2"],[1,"table-responsive"],[1,"table","table-bordered","dt-responsive","nowrap"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"list-unstyled","hstack","gap-1","mb-0"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Delete"],["href","javascript:void(0);",1,"btn","btn-sm","btn-soft-danger",3,"click"],[1,"mdi","mdi-delete-outline"],[1,"d-flex","justify-content-end",3,"page","pageSize","collectionSize","pageChange"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"formGroup"],[1,"modal-body"],[1,"col-md-12"],[1,"mb-3"],["for","distributorName",1,"form-label"],["type","text","id","distributorName","formControlName","name","placeholder","Enter name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","distributorEmail",1,"form-label"],["type","email","id","distributorEmail","formControlName","email","placeholder","Enter email",1,"form-control"],["for","distributorPhone",1,"form-label"],["type","text","id","distributorPhone","formControlName","phone","placeholder","Enter phone number",1,"form-control"],["for","distributorPassword",1,"form-label"],["type","password","id","distributorPassword","formControlName","password","placeholder","Enter password",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light",3,"disabled","click"],[1,"text-danger"],[4,"ngIf"]],template:function(e,i){if(1&e){const r=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"app-page-title",1),t.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"input",10),t.\u0275\u0275listener("input",function(d){return i.onSearch(d)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(11,"i",11),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(12,"div",12)(13,"div",13)(14,"button",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(r);const d=t.\u0275\u0275reference(22);return t.\u0275\u0275resetView(i.openModal(d))}),t.\u0275\u0275element(15,"i",15),t.\u0275\u0275text(16," Add Distributor "),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(17,"div",16),t.\u0275\u0275template(18,nt,4,0,"div",17),t.\u0275\u0275template(19,it,4,0,"div",18),t.\u0275\u0275template(20,ot,24,2,"div",19),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275template(21,bt,33,6,"ng-template",20,21,t.\u0275\u0275templateRefExtractor)}2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("breadcrumbItems",i.breadCrumbItems),t.\u0275\u0275advance(17),t.\u0275\u0275property("ngIf",i.isLoading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(i.isLoading||i.distributorList&&0!==i.distributorList.length)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!i.isLoading&&i.distributorList&&i.distributorList.length>0))},dependencies:[p.NgClass,p.NgForOf,p.NgIf,v.V,u.N9,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,p.DatePipe]}),n})();function Gt(n,a){1&n&&(t.\u0275\u0275elementStart(0,"div",21)(1,"div",22)(2,"span",23),t.\u0275\u0275text(3,"Loading..."),t.\u0275\u0275elementEnd()()())}function St(n,a){1&n&&(t.\u0275\u0275elementStart(0,"div",24),t.\u0275\u0275element(1,"img",25),t.\u0275\u0275elementStart(2,"p",26),t.\u0275\u0275text(3,"No one received gift in the current filter."),t.\u0275\u0275elementEnd()())}function It(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"small"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.user.email_id)}}function yt(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div")(1,"strong"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"br"),t.\u0275\u0275elementStart(4,"small"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(6,"br"),t.\u0275\u0275template(7,It,2,1,"small",35),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.user.name),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("ID: ",e.user.user_id,""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.user.email_id)}}function Et(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div")(1,"strong"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"br"),t.\u0275\u0275elementStart(4,"small"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.distributor.name),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("ID: ",e.distributor.distributor_id,"")}}function Ft(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275element(2,"br"),t.\u0275\u0275elementStart(3,"small"),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.gift.gift_name,""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("ID: ",e.gift.gift_id,"")}}const wt=function(n,a,e){return{"bg-success":n,"bg-warning":a,"bg-danger":e}};function Dt(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"tr")(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td"),t.\u0275\u0275template(4,yt,8,3,"div",35),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275template(6,Et,6,2,"div",35),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"td"),t.\u0275\u0275template(8,Ft,5,2,"div",35),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"td"),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"td"),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"td"),t.\u0275\u0275text(14),t.\u0275\u0275pipe(15,"date"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"td")(17,"span",36),t.\u0275\u0275text(18),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(19,"td")(20,"small"),t.\u0275\u0275text(21),t.\u0275\u0275elementEnd()()()),2&n){const e=a.$implicit,i=a.index,r=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate((r.page-1)*r.pageSize+i+1),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.user),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.distributor),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.gift),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.quantity),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.transaction_id),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(15,10,e.transaction_date,"dd MMM yyyy, hh:mm a")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction3(13,wt,"Received"===e.status,"Pending"===e.status,"Rejected"===e.status)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.status," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.notes||"-")}}function Tt(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",27)(1,"table",28)(2,"thead")(3,"tr")(4,"th"),t.\u0275\u0275text(5,"Sr No"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"th"),t.\u0275\u0275text(7,"User"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"th"),t.\u0275\u0275text(9,"Distributor"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"th"),t.\u0275\u0275text(11,"Gift Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"th"),t.\u0275\u0275text(13,"Quantity"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"th"),t.\u0275\u0275text(15,"Transaction ID"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"th"),t.\u0275\u0275text(17,"Date"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"th"),t.\u0275\u0275text(19,"Status"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"th"),t.\u0275\u0275text(21,"Notes"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(22,"tbody"),t.\u0275\u0275template(23,Dt,22,17,"tr",29),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(24,"div",30)(25,"div",31)(26,"div",32),t.\u0275\u0275text(27,"Showing "),t.\u0275\u0275elementStart(28,"b"),t.\u0275\u0275text(29),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(30),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(31,"div",31)(32,"div",33)(33,"ngb-pagination",34),t.\u0275\u0275listener("pageChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.page=r)})("pageChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.pageChange(r))}),t.\u0275\u0275elementEnd()()()()()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(23),t.\u0275\u0275property("ngForOf",e.giftList),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate((e.page-1)*e.pageSize+1),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2(" to ",e.findPageShowing()," of ",e.total," entries "),t.\u0275\u0275advance(3),t.\u0275\u0275property("collectionSize",e.total)("page",e.page)("pageSize",e.pageSize)}}let Nt=(()=>{class n{constructor(e,i){this.giftService=e,this.toast=i,this.giftList=[],this.total=0,this.page=1,this.pageSize=10,this.isLoading=!1}ngOnInit(){this.breadCrumbItems=[{label:"Gift Card Management"},{label:"Receive",active:!0}],this.searchFormGroup=new l.cw({name:new l.NI(""),distributor:new l.NI(""),transaction_date:new l.NI("")}),this.getAllGifts()}pageChange(e){this.page=e,this.getAllGifts()}refresh(){this.page=1,this.searchFormGroup.reset(),this.getAllGifts()}getAllGifts(){this.isLoading=!0;const e={name:this.searchFormGroup.get("name")?.value||"",distributor:this.searchFormGroup.get("distributor")?.value||"",transaction_date:this.searchFormGroup.get("transaction_date")?.value||""};this.giftService.getGiftReceives(this.page,this.pageSize,e).subscribe(i=>{i&&"success"===i.status&&(this.giftList=i.data.giftReceives||[],this.total=i.data.total||0),this.isLoading=!1},i=>{console.error("Error loading gift receives:",i),this.toast.error("Failed to load gift receives","Error"),this.isLoading=!1})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(_),t.\u0275\u0275directiveInject(g._W))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-receive-gift-cards"]],decls:26,vars:5,consts:[[1,"container-fluid"],["title","Receive Gift Card",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-4"],["type","search","id","searchInput","placeholder","Search for Name / User Id / Email id...","formControlName","name",1,"form-control"],[1,"col-lg-3"],["type","search","id","searchDistributor","placeholder","Search for Distributor","formControlName","distributor",1,"form-control"],["type","date","id","searchInput","formControlName","transaction_date",1,"form-control"],[1,"col-lg-1"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["class","d-flex justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","150px"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-muted","mt-2"],[1,"table-responsive"],[1,"table","table-bordered","dt-responsive","nowrap"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],[4,"ngIf"],[1,"badge",3,"ngClass"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"app-page-title",1),t.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),t.\u0275\u0275element(10,"input",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div",10),t.\u0275\u0275element(12,"input",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",10),t.\u0275\u0275element(14,"input",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"div",13)(16,"button",14),t.\u0275\u0275listener("click",function(){return i.getAllGifts()}),t.\u0275\u0275element(17,"i",15),t.\u0275\u0275text(18," Filter"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(19,"div",13)(20,"button",16),t.\u0275\u0275listener("click",function(){return i.refresh()}),t.\u0275\u0275element(21,"i",17),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(22,"div",2),t.\u0275\u0275template(23,Gt,4,0,"div",18),t.\u0275\u0275template(24,St,4,0,"div",19),t.\u0275\u0275template(25,Tt,34,7,"div",20),t.\u0275\u0275elementEnd()()()()()()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("breadcrumbItems",i.breadCrumbItems),t.\u0275\u0275advance(6),t.\u0275\u0275property("formGroup",i.searchFormGroup),t.\u0275\u0275advance(16),t.\u0275\u0275property("ngIf",i.isLoading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(i.isLoading||i.giftList&&0!==i.giftList.length)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!i.isLoading&&0!==i.giftList.length))},dependencies:[p.NgClass,p.NgForOf,p.NgIf,v.V,u.N9,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,p.DatePipe]}),n})();function At(n,a){1&n&&(t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275element(1,"img",7),t.\u0275\u0275elementStart(2,"p",8),t.\u0275\u0275text(3,"No Gifts found."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",9),t.\u0275\u0275text(5,"Add Gift Card"),t.\u0275\u0275elementEnd()())}function kt(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13),t.\u0275\u0275element(5,"img",14),t.\u0275\u0275elementStart(6,"div",15)(7,"h5",16)(8,"a",17),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"p",18),t.\u0275\u0275text(11),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(12,"div",19)(13,"div",20)(14,"div",21),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,d=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(d.editGiftCard(o.gift_id))}),t.\u0275\u0275elementStart(15,"a",22),t.\u0275\u0275element(16,"i",23),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(17,"div",21),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e).$implicit,d=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(d.deleteGiftCard(o._id))}),t.\u0275\u0275elementStart(18,"a",24),t.\u0275\u0275element(19,"i",25),t.\u0275\u0275elementEnd()()()()()()(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=a.$implicit;t.\u0275\u0275advance(5),t.\u0275\u0275propertyInterpolate("src",e.gift_image||"assets/img/gift-card.png",t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",e.gift_name,""),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.description)}}function Vt(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",26)(1,"div",27)(2,"div",28),t.\u0275\u0275text(3,"Showing "),t.\u0275\u0275elementStart(4,"b"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",27)(8,"div",29)(9,"ngb-pagination",30),t.\u0275\u0275listener("pageChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.page=r)})("pageChange",function(r){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.pageChange(r))}),t.\u0275\u0275elementEnd()()()()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate((e.page-1)*e.pageSize+1),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2(" to ",e.findPageShowing()," of ",e.total," entries "),t.\u0275\u0275advance(3),t.\u0275\u0275property("collectionSize",e.total)("page",e.page)("pageSize",e.pageSize)}}const qt=[{path:"add",component:b},{path:"edit",component:b},{path:"list",component:(()=>{class n{constructor(e,i,r,o){this.toast=e,this.modalService=i,this.router=r,this.giftService=o,this.giftList=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"Gift Card Management"},{label:"Gift Cards",active:!0}],this.getAllGifts()}getAllGifts(){this.giftService.getGift(this.page,this.pageSize).subscribe({next:e=>{this.giftList=e.data.gifts,this.total=e.data.total},error:e=>{this.toast.error("Failed to load gift cards","Error")}})}pageChange(e){this.page=e,this.getAllGifts()}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}deleteGiftCard(e){C().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(i=>{i.isConfirmed&&this.giftService.deleteGift(e).subscribe({next:r=>{this.toast.success("Gift Card deleted successfully","Success"),this.getAllGifts()},error:r=>{this.toast.error("Failed to delete gift card","Error")}})})}editGiftCard(e){this.router.navigate(["/gift-card-management/edit"],{queryParams:{id:e}})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(g._W),t.\u0275\u0275directiveInject(u.FF),t.\u0275\u0275directiveInject(f.F0),t.\u0275\u0275directiveInject(_))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-gift-cards"]],decls:6,vars:4,consts:[[1,"container-fluid"],["title","Gift Card",3,"breadcrumbItems"],[1,"row"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],[4,"ngFor","ngForOf"],["class","row justify-content-md-between align-items-md-center mt-2",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],["routerLink","/gift-card-management/add",1,"btn","btn-primary"],[1,"col-lg-4"],[1,"ng-star-inserted"],[1,"card","text-center"],[1,"card-body","mb-0"],["alt","Header Avatar","width","150",3,"src"],[1,"mt-2"],[1,"font-size-15","mb-1"],["href","javascript: void(0);",1,"text-dark"],[1,"text-muted"],[1,"card-footer","bg-transparent","border-top","mb-0"],[1,"contact-links","d-flex","font-size-20"],[1,"flex-fill",3,"click"],["href","javascript: void(0);","tooltip","Message"],[1,"bx","bx-edit"],["href","javascript: void(0);","tooltip","Projects"],[1,"bx","bxs-trash"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"app-page-title",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275template(3,At,6,0,"div",3),t.\u0275\u0275template(4,kt,20,3,"ng-container",4),t.\u0275\u0275template(5,Vt,10,6,"div",5),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("breadcrumbItems",i.breadCrumbItems),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!i.giftList||0===i.giftList.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",i.giftList),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.giftList.length>10))},dependencies:[p.NgForOf,p.NgIf,v.V,u.N9,f.rH]}),n})()},{path:"distributor",component:Ct},{path:"receive",component:Nt}];let Lt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[f.Bz.forChild(qt),f.Bz]}),n})();var jt=s(9668);let Rt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[p.CommonModule,jt.v,u.jF,x.QG,l.UX,Lt]}),n})()}}]);
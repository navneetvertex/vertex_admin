"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[209],{5209:(Xe,y,m)=>{m.r(y),m.d(y,{LoanModule:()=>Qe});var d=m(6895),_=m(9158),r=m(4006),b=m(5226),g=m.n(b),E=m(5933),e=m(4650),u=m(2340),C=m(529);let v=(()=>{class n{constructor(t){this.http=t}getLoanList(t=0,a=10,o){return this.http.get(`${u.N.api_url}loans?${o}&page=${t}&limit=${a}`)}updateLoanStatus(t,a){return this.http.put(`${u.N.api_url}loans/${t}`,a)}getUserTransaction(t=0,a=10,o){return this.http.get(`${u.N.api_url}loans/user-transanction?${o}&page=${t}&limit=${a}`)}getAdminTransaction(t=0,a=10,o){return this.http.get(`${u.N.api_url}loans/admin-transanction?${o}&page=${t}&limit=${a}`)}getAllUserActiveLoans(t){return this.http.get(`${u.N.api_url}loans/getAllUserActiveLoans/${t}`)}getTotalPaymentAmount(t){return this.http.get(`${u.N.api_url}loans/getTotalPaymentAmount/${t}`)}recordPayment(t){return this.http.post(`${u.N.api_url}loans/record-payment`,t)}getLoanSchedule(t){return this.http.get(`${u.N.api_url}loans/schedule/${t}`)}getPersonalLoanSchedule(t){return this.http.get(`${u.N.api_url}loans/personal/schedule/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(C.eN))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=m(9061),x=m(9234);function L(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=l.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function T(n,l){1&n&&(e.\u0275\u0275elementStart(0,"div",31),e.\u0275\u0275element(1,"img",32),e.\u0275\u0275elementStart(2,"p",33),e.\u0275\u0275text(3,"No Loan found in the current filter."),e.\u0275\u0275elementEnd()())}const F=function(n,l,t,a){return{"badge-soft-primary":n,"badge-soft-warning":l,"badge-soft-danger":t,"badge-soft-secondary":a}};function P(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"a",46),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction4(2,F,"Approved"===t.status||"Completed"===t.status,"Requested"===t.status,"Rejected"===t.status||"Defaulted"===t.status,"Pending"===t.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.status," ")}}function q(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",47),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(45);return e.\u0275\u0275resetView(i.openLoanModal(s,o))}),e.\u0275\u0275elementStart(1,"a",48),e.\u0275\u0275element(2,"i",49),e.\u0275\u0275elementEnd()()}}function w(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",50)(1,"a",51),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(47);return e.\u0275\u0275resetView(i.viewGuaranteedLoan(s,o))}),e.\u0275\u0275element(2,"i",52),e.\u0275\u0275elementEnd()()}}function G(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",50)(1,"a",51),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(47);return e.\u0275\u0275resetView(i.viewPersonalLoan(s,o))}),e.\u0275\u0275element(2,"i",52),e.\u0275\u0275elementEnd()()}}function N(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td"),e.\u0275\u0275template(19,P,2,7,"a",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td")(21,"ul",43),e.\u0275\u0275template(22,q,3,0,"li",44),e.\u0275\u0275template(23,w,3,0,"li",45),e.\u0275\u0275template(24,G,3,0,"li",45),e.\u0275\u0275elementEnd()()()),2&n){const t=l.$implicit,a=l.index,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((o.page-1)*o.pageSize+a+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.loan_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.user.name," (",t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.requested_loan_amount,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.duration," ","Daily"===t.interval?"day(s)":"month(s)"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.interval),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,14,t.start_date)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.purpose),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.status),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","Pending"===t.status),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Pending"!==t.status&&"Rejected"!==t.status&&"Garanteed"===t.loan_type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Pending"!==t.status&&"Rejected"!==t.status&&"Personal"===t.loan_type)}}function R(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",34)(1,"table",35)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"Loan Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Loan Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Duration"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"EMI Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Start Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"th"),e.\u0275\u0275text(19,"Purpose"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"th"),e.\u0275\u0275text(21,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"th"),e.\u0275\u0275text(23,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"tbody"),e.\u0275\u0275template(25,N,25,16,"tr",36),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",37)(27,"div",38)(28,"div",39),e.\u0275\u0275text(29,"Showing "),e.\u0275\u0275elementStart(30,"b"),e.\u0275\u0275text(31),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",38)(34,"div",40)(35,"ngb-pagination",41),e.\u0275\u0275listener("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.page=o)})("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.pageChange(o))}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(25),e.\u0275\u0275property("ngForOf",t.loanList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}function k(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Status is required."),e.\u0275\u0275elementEnd())}function V(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,k,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("status"))||null==a.errors?null:a.errors.required)}}function A(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Rejected reason is required."),e.\u0275\u0275elementEnd())}function j(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,A,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("rejected_reason"))||null==a.errors?null:a.errors.required)}}function M(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",58)(1,"label",73),e.\u0275\u0275text(2,"Rejected Reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"select",74)(4,"option",12),e.\u0275\u0275text(5,"Select reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"option",75),e.\u0275\u0275text(7,"Insufficient funds"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"option",76),e.\u0275\u0275text(9,"Credit score too low"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"option",77),e.\u0275\u0275text(11,"Unverifiable income"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,j,2,1,"div",65),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);let a;e.\u0275\u0275advance(12),e.\u0275\u0275property("ngIf",(null==(a=t.statusFormGroup.get("rejected_reason"))?null:a.touched)&&(null==(a=t.statusFormGroup.get("rejected_reason"))?null:a.invalid))}}function D(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Approved Loan Amount is required."),e.\u0275\u0275elementEnd())}function $(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number."),e.\u0275\u0275elementEnd())}function B(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,D,2,0,"small",72),e.\u0275\u0275template(2,$,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("requested_loan_amount"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("requested_loan_amount"))||null==o.errors?null:o.errors.pattern)}}function z(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Approved Loan Amount is required."),e.\u0275\u0275elementEnd())}function O(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number."),e.\u0275\u0275elementEnd())}function U(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,z,2,0,"small",72),e.\u0275\u0275template(2,O,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("approved_loan_amount"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("approved_loan_amount"))||null==o.errors?null:o.errors.pattern)}}function J(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Interest Rate is required."),e.\u0275\u0275elementEnd())}function K(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number (e.g. 5, 7.25)."),e.\u0275\u0275elementEnd())}function Y(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,J,2,0,"small",72),e.\u0275\u0275template(2,K,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("interest_rate"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("interest_rate"))||null==o.errors?null:o.errors.pattern)}}function W(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Start Date is required."),e.\u0275\u0275elementEnd())}function H(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,W,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("start_date"))||null==a.errors?null:a.errors.required)}}function Q(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Penalty is required."),e.\u0275\u0275elementEnd())}function X(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number (e.g. 2, 3.5)."),e.\u0275\u0275elementEnd())}function Z(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,Q,2,0,"small",72),e.\u0275\u0275template(2,X,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("penalty"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("penalty"))||null==o.errors?null:o.errors.pattern)}}function ee(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Indirect referral amount is required."),e.\u0275\u0275elementEnd())}function te(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function ne(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,ee,2,0,"small",72),e.\u0275\u0275template(2,te,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("franchise_refer_per"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("franchise_refer_per"))||null==o.errors?null:o.errors.min)}}function ae(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Indirect referral amount is required."),e.\u0275\u0275elementEnd())}function oe(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function re(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,ae,2,0,"small",72),e.\u0275\u0275template(2,oe,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("indirect_refer_per"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("indirect_refer_per"))||null==o.errors?null:o.errors.min)}}function le(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Direct referral % is required."),e.\u0275\u0275elementEnd())}function ie(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function se(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,le,2,0,"small",72),e.\u0275\u0275template(2,ie,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("direct_refer_per"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("direct_refer_per"))||null==o.errors?null:o.errors.min)}}function me(n,l){if(1&n&&e.\u0275\u0275element(0,"img",102),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("src",t.uploadedChequeProof,e.\u0275\u0275sanitizeUrl)}}function de(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",100),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(45);return e.\u0275\u0275resetView(o.click())}),e.\u0275\u0275template(1,me,1,1,"img",101),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.uploadedChequeProof)}}function pe(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",2)(1,"div",78)(2,"label",79),e.\u0275\u0275text(3,"Requested Loan Amount (\u20b9)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",80),e.\u0275\u0275template(5,B,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",78)(7,"label",81),e.\u0275\u0275text(8,"Approved Loan Amount (\u20b9)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"input",82),e.\u0275\u0275template(10,U,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",78)(12,"label",83),e.\u0275\u0275text(13,"Interest Rate (%)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"input",84),e.\u0275\u0275template(15,Y,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",78)(17,"label",85),e.\u0275\u0275text(18,"Start Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"input",86),e.\u0275\u0275template(20,H,2,1,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",78)(22,"label",87),e.\u0275\u0275text(23,"Penalty (\u20b9)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"input",88),e.\u0275\u0275template(25,Z,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",89)(27,"label",90),e.\u0275\u0275text(28,"Franchise Referral %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(29,"input",91),e.\u0275\u0275template(30,ne,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",89)(32,"label",92),e.\u0275\u0275text(33,"Indirect Referral %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"input",93),e.\u0275\u0275template(35,re,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",89)(37,"label",94),e.\u0275\u0275text(38,"Direct Referral %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"input",95),e.\u0275\u0275template(40,se,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",89)(42,"label",96),e.\u0275\u0275text(43,"Cheque Proof"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"input",97,98),e.\u0275\u0275listener("change",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onFileSelected(o,"chequeProof"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(46,de,2,1,"div",99),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);let a,o,i,s,p,c,h,S;e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(a=t.statusFormGroup.get("requested_loan_amount"))?null:a.touched)&&(null==(a=t.statusFormGroup.get("requested_loan_amount"))?null:a.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(o=t.statusFormGroup.get("approved_loan_amount"))?null:o.touched)&&(null==(o=t.statusFormGroup.get("approved_loan_amount"))?null:o.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(i=t.statusFormGroup.get("interest_rate"))?null:i.touched)&&(null==(i=t.statusFormGroup.get("interest_rate"))?null:i.invalid)),e.\u0275\u0275advance(4),e.\u0275\u0275property("min",t.minDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(s=t.statusFormGroup.get("start_date"))?null:s.touched)&&(null==(s=t.statusFormGroup.get("start_date"))?null:s.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(p=t.statusFormGroup.get("penalty"))?null:p.touched)&&(null==(p=t.statusFormGroup.get("penalty"))?null:p.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(c=t.statusFormGroup.get("franchise_refer_per"))?null:c.touched)&&(null==(c=t.statusFormGroup.get("franchise_refer_per"))?null:c.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(h=t.statusFormGroup.get("indirect_refer_per"))?null:h.touched)&&(null==(h=t.statusFormGroup.get("indirect_refer_per"))?null:h.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(S=t.statusFormGroup.get("direct_refer_per"))?null:S.touched)&&(null==(S=t.statusFormGroup.get("direct_refer_per"))?null:S.invalid)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.uploadedChequeProof)}}function ce(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",53)(1,"h5",54),e.\u0275\u0275text(2,"Approve/Reject Loan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",55),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",7)(5,"div",56)(6,"div",2)(7,"div",57)(8,"div",58)(9,"label"),e.\u0275\u0275text(10,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",59)(12,"div",60),e.\u0275\u0275element(13,"input",61),e.\u0275\u0275elementStart(14,"label",62),e.\u0275\u0275text(15,"Approved"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",60),e.\u0275\u0275element(17,"input",63),e.\u0275\u0275elementStart(18,"label",64),e.\u0275\u0275text(19,"Rejected"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(20,V,2,1,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,M,13,1,"div",66),e.\u0275\u0275template(22,pe,47,10,"div",67),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(23,"div",68)(24,"button",69),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.close("Close click"))}),e.\u0275\u0275text(25,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"button",70),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.submit())}),e.\u0275\u0275text(27,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext();let a,o,i;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.statusFormGroup),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngIf",(null==(a=t.statusFormGroup.get("status"))?null:a.touched)&&(null==(a=t.statusFormGroup.get("status"))?null:a.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Rejected"===(null==(o=t.statusFormGroup.get("status"))?null:o.value)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Rejected"!==(null==(i=t.statusFormGroup.get("status"))?null:i.value))}}function ue(n,l){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td"),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=l.$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.Installment),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.Date),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t["Principal O/S"],""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.EMI,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("\u20b9",t.Penalty," (",t["Penalty Days"]," Days)"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.Interest,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.Principal,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.Balance,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.Status)}}function _e(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",107),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td",107),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td",107),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td",107),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Total No of Days: ",t.LoanTotal["Total Days"],""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Total EMI Paid : \u20b9 ",t.LoanTotal["Total EMI Paid"],""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Total Interest : \u20b9 ",t.LoanTotal["Total Interest"],""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Paid Interest : \u20b9 ",t.LoanTotal["Paid Interest"],""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Total Principal: \u20b9 ",t.LoanTotal["Total Principal"],""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Paid Installments: ",t.LoanTotal["Paid Installments"],"")}}function fe(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",107),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td",107),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td",107),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td",107),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Loan Period: ",t.LoanTotal["Loan Period"],""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Total EMI Paid : \u20b9 ",t.LoanTotal["Total EMI Paid"],""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Total Interest : \u20b9 ",t.LoanTotal["Total Interest"],""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Paid Interest : \u20b9 ",t.LoanTotal["Paid Interest"],""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Grand Total (EMI + Penalty): \u20b9 ",t.LoanTotal["Grand Total (EMI + Penalty)"],""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Paid Installments: \u20b9 ",t.LoanTotal["Paid Installments"],"")}}function ge(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",53)(1,"h5",54),e.\u0275\u0275text(2,"Loan Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",55),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",56)(5,"div",2)(6,"div",103)(7,"p")(8,"strong"),e.\u0275\u0275text(9,"Loan Number:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"p")(12,"strong"),e.\u0275\u0275text(13,"User:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p")(16,"strong"),e.\u0275\u0275text(17,"Requested Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"p")(20,"strong"),e.\u0275\u0275text(21,"Approved Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"p")(24,"strong"),e.\u0275\u0275text(25,"Interest Rate:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"p")(28,"strong"),e.\u0275\u0275text(29,"Status:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",103)(32,"p")(33,"strong"),e.\u0275\u0275text(34,"Loan Type:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"p")(37,"strong"),e.\u0275\u0275text(38,"Duration:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(39),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"p")(41,"strong"),e.\u0275\u0275text(42,"EMI Type:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"p")(45,"strong"),e.\u0275\u0275text(46,"Purpose:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(47),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"p")(49,"strong"),e.\u0275\u0275text(50,"Start Date:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(51),e.\u0275\u0275pipe(52,"date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(53,"div",104)(54,"button",105),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.payloan())}),e.\u0275\u0275text(55,"Pay Loan"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(56,"div",34)(57,"table",106)(58,"tbody")(59,"tr")(60,"th")(61,"strong"),e.\u0275\u0275text(62,"Installment"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(63,"th")(64,"strong"),e.\u0275\u0275text(65,"Date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(66,"th")(67,"strong"),e.\u0275\u0275text(68,"Principal O/S"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(69,"th")(70,"strong"),e.\u0275\u0275text(71,"EMI"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(72,"th")(73,"strong"),e.\u0275\u0275text(74,"Penalty"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(75,"th")(76,"strong"),e.\u0275\u0275text(77,"Interest"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(78,"th")(79,"strong"),e.\u0275\u0275text(80,"Principal"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(81,"th")(82,"strong"),e.\u0275\u0275text(83,"Balance"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(84,"th")(85,"strong"),e.\u0275\u0275text(86,"Status"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(87,ue,20,10,"ng-container",36),e.\u0275\u0275template(88,_e,13,6,"tr",72),e.\u0275\u0275template(89,fe,13,6,"tr",72),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(90,"div",68)(91,"button",69),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.close("Close click"))}),e.\u0275\u0275text(92,"Close"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.loan_id,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2(" ",null==t.loanSelected?null:t.loanSelected.user.name," (",null==t.loanSelected?null:t.loanSelected.user.user_id,")"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" \u20b9",null==t.loanSelected?null:t.loanSelected.requested_loan_amount,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" \u20b9",null==t.loanSelected?null:t.loanSelected.approved_loan_amount,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.interest_rate,"%"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.status,""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.loan_type,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2(" ",null==t.loanSelected?null:t.loanSelected.duration," ","Daily"===(null==t.loanSelected?null:t.loanSelected.interval)?"day(s)":"month(s)"," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.interval,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.purpose,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(52,16,null==t.loanSelected?null:t.loanSelected.start_date,"dd/MM/yyyy"),""),e.\u0275\u0275advance(36),e.\u0275\u0275property("ngForOf",t.LoanTable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.LoanTotal&&"Garanteed"===t.loanType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.LoanTotal&&"Personal"===t.loanType)}}let ve=(()=>{class n{constructor(t,a,o,i){this.loanService=t,this.modalService=a,this.route=o,this.router=i,this.loanList=[],this.total=0,this.loanType="",this.page=1,this.pageSize=10,this.LoanTable=[],this.LoanTotal=null,this.queryParams="",this.status=["Pending","Approved","Rejected","Completed","Defaulted"],this.loanSelected=null,this.uploadedChequeProof="",this.route.paramMap.subscribe(s=>{this.loanType=s.get("type")||"",this.search()})}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"Requested Loan",active:!0}];const t=new Date,a=new Date;a.setDate(t.getDate()+1),this.minDate=a.toISOString().split("T")[0],this.statusFormGroup=new r.cw({_id:new r.NI(null),status:new r.NI(""),interest_rate:new r.NI(null,[r.kI.min(0),r.kI.max(100)]),requested_loan_amount:new r.NI({value:"",disabled:!0}),approved_loan_amount:new r.NI(null,[r.kI.min(0)]),start_date:new r.NI(null),penalty:new r.NI(null,[r.kI.min(0),r.kI.max(100)]),franchise_refer_per:new r.NI(null,[r.kI.min(0),r.kI.max(100)]),direct_refer_per:new r.NI(null,[r.kI.min(0),r.kI.max(100)]),indirect_refer_per:new r.NI(null,[r.kI.min(0),r.kI.max(100)]),rejected_reason:new r.NI(""),cheque_proof:new r.NI("")}),this.statusFormGroup.get("status")?.valueChanges.subscribe(o=>{"Rejected"===o?(this.statusFormGroup.get("rejected_reason")?.setValidators([r.kI.required]),["interest_rate","approved_loan_amount","start_date","franchise_refer_per","direct_refer_per","indirect_refer_per"].forEach(i=>{const s=this.statusFormGroup.get(i);if(s){const p=s.validator?[r.kI.min(0),r.kI.max(100)].filter(c=>"approved_loan_amount"!==i&&"start_date"!==i):[];s.setValidators("approved_loan_amount"===i?[r.kI.min(0)]:"start_date"===i?[]:p),s.updateValueAndValidity()}}),this.statusFormGroup.get("rejected_reason")?.updateValueAndValidity()):(this.statusFormGroup.get("rejected_reason")?.clearValidators(),this.statusFormGroup.get("interest_rate")?.setValidators([r.kI.required,r.kI.min(0),r.kI.max(100)]),this.statusFormGroup.get("approved_loan_amount")?.setValidators([r.kI.required,r.kI.min(0)]),this.statusFormGroup.get("start_date")?.setValidators([r.kI.required]),this.statusFormGroup.get("franchise_refer_per")?.setValidators([r.kI.required,r.kI.min(0),r.kI.max(100)]),this.statusFormGroup.get("direct_refer_per")?.setValidators([r.kI.required,r.kI.min(0),r.kI.max(100)]),this.statusFormGroup.get("indirect_refer_per")?.setValidators([r.kI.required,r.kI.min(0),r.kI.max(100)]),["interest_rate","approved_loan_amount","start_date","franchise_refer_per","direct_refer_per","indirect_refer_per"].forEach(i=>{this.statusFormGroup.get(i)?.updateValueAndValidity()}))}),this.searchFormGroup=new r.cw({name:new r.NI(""),loan_type:new r.NI(this.loanType),status:new r.NI("Pending"),interval:new r.NI("")}),this.search()}refresh(){this.page=1,this.searchFormGroup.reset(),this.searchFormGroup.patchValue({status:"Pending",loan_type:"",name:"",interval:""}),this.getLoanList()}openLoanModal(t,a){this.modalService.open(t,{size:"lg",backdrop:"static"}),this.uploadedChequeProof=null,this.statusFormGroup.reset(),this.statusFormGroup.patchValue({_id:a._id,requested_loan_amount:a.requested_loan_amount})}submit(){if(this.statusFormGroup.invalid)return console.log("Form is invalid:",this.statusFormGroup.errors),void Object.keys(this.statusFormGroup.controls).forEach(a=>{const o=this.statusFormGroup.get(a);o&&o.invalid&&console.log(`Control "${a}" is invalid:`,o.errors)});const t={...this.statusFormGroup.value};this.loanService.updateLoanStatus(t._id,t).subscribe({next:a=>{g().fire({title:"Success",text:`Loan status updated to ${t.status}`,icon:"success",confirmButtonText:"OK"}),this.statusFormGroup.reset(),this.selectedLoan=null,this.modalService.dismissAll(),this.getLoanList()},error:a=>{console.error("Error updating loan status:",a)}})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getLoanList()}search(){const t=[];if(this.searchFormGroup&&this.searchFormGroup.value){const a=this.searchFormGroup.value;Object.keys(a).forEach(o=>{"loan_type"!==o&&null!==a[o]&&""!==a[o]&&t.push(`${o}=${encodeURIComponent(a[o])}`)})}this.loanType&&t.push(`loan_type=${encodeURIComponent(this.loanType)}`),t.some(a=>a.startsWith("status="))||t.push("status=Pending"),this.queryParams=t.join("&"),this.page=1,this.getLoanList()}getLoanList(){this.loanService.getLoanList(this.page,this.pageSize,this.queryParams).subscribe({next:t=>{this.loanList=t.data.loans,this.total=t.data.total},error:t=>{console.error("Error fetching loan list:",t)}})}viewGuaranteedLoan(t,a){this.selectedLoan=a,this.loanService.getLoanSchedule(a._id).subscribe({next:o=>{this.LoanTable=o.data.schedule,this.LoanTotal=o.data.totals,this.loanSelected=a},error:o=>{console.error("Error fetching guaranteed loan schedule:",o),g().fire({title:"Error",text:"Failed to fetch guaranteed loan schedule.",icon:"error",confirmButtonText:"OK"})}}),this.modalService.open(t,{size:"xl",backdrop:"static"})}viewPersonalLoan(t,a){this.selectedLoan=a,this.loanService.getPersonalLoanSchedule(a._id).subscribe({next:o=>{this.LoanTable=o.data.schedule,this.LoanTotal=o.data.totals,this.loanSelected=a},error:o=>{console.error("Error fetching personal loan schedule:",o),g().fire({title:"Error",text:"Failed to fetch personal loan schedule.",icon:"error",confirmButtonText:"OK"})}}),this.modalService.open(t,{size:"xl",backdrop:"static"})}payloan(){this.router.navigate(["/loan-management/pay-loan"],{queryParams:{id:this.loanSelected._id,user:this.loanSelected?.user.user_id}}),this.modalService.dismissAll()}onFileSelected(t,a){const o=t.target;if(o.files&&0!==o.files.length)return o.files[0].type.startsWith("image/")?void(o.files&&o.files.length>0&&this.openImageCropper({file:t,from:a})):(g().fire({title:"Invalid File Type",text:"Please select a valid image file.",icon:"error",confirmButtonText:"OK"}),void(o.value=""))}openImageCropper(t){const a=this.modalService.open(E.a,{centered:!0,size:"xl"});a.componentInstance.data=t,a.result.then(o=>{o&&o.image&&this.cropAndSetPhoto(o.image,o.from)}).catch(o=>{console.log("Modal dismissed:",o)})}cropAndSetPhoto(t,a="profile_image"){const o=new Image;o.onload=()=>{const i=document.createElement("canvas");i.width=.5*o.width,i.height=.5*o.height,i.getContext("2d").drawImage(o,0,0,i.width,i.height);const p=i.toDataURL("image/jpeg",.3);"chequeProof"===a&&(this.uploadedChequeProof=p,this.statusFormGroup.patchValue({cheque_proof:p})),console.log(`Selected ${a}:`)},o.src=t}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(v),e.\u0275\u0275directiveInject(f.FF),e.\u0275\u0275directiveInject(_.gz),e.\u0275\u0275directiveInject(_.F0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-loan-requested"]],decls:48,vars:6,consts:[[1,"container-fluid"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-4"],["type","search","id","searchInput","placeholder","Search for Name / User Id / Email id...","formControlName","name",1,"form-control"],[1,"col-lg-2"],["formControlName","loan_type",1,"form-control"],["value",""],["value","Personal"],["value","Garanteed"],["formControlName","interval",1,"form-control"],["value","Daily"],["value","Monthly"],["formControlName","status",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-lg-1"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],["role","document"],["loanModal",""],["loanViewGaranteedModal",""],[3,"ngValue"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["href","javascript: void(0);","class","badge font-size-11 m-1",3,"ngClass",4,"ngIf"],[1,"list-inline","font-size-20","contact-links","mb-0"],["data-bs-toggle","modal","data-bs-target","#myModal","class","list-inline-item px-2",3,"click",4,"ngIf"],["class","list-inline-item px-2",4,"ngIf"],["href","javascript: void(0);",1,"badge","font-size-11","m-1",3,"ngClass"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"list-inline-item","px-2",3,"click"],["href","javascript:void(0);","tooltip","Message"],[1,"bx","bx-check-double"],[1,"list-inline-item","px-2"],["tooltip","Profile",3,"click"],[1,"bx","bx-detail"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-md-12"],[1,"form-group","mb-3"],[1,"d-flex","align-items-center","gap-3"],[1,"form-check","form-check-inline"],["type","radio","id","status_approved","value","Approved","formControlName","status",1,"form-check-input"],["for","status_approved",1,"form-check-label"],["type","radio","id","status_rejected","value","Rejected","formControlName","status",1,"form-check-input"],["for","status_rejected",1,"form-check-label"],["class","text-danger",4,"ngIf"],["class","form-group mb-3",4,"ngIf"],["class","row",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light",3,"click"],[1,"text-danger"],[4,"ngIf"],["for","rejected_reason"],["id","rejected_reason","formControlName","rejected_reason",1,"form-control"],["value","Insufficient funds"],["value","Credit score too low"],["value","Unverifiable income"],[1,"form-group","mb-3","col-lg-6"],["for","requested_loan_amount"],["type","number","id","requested_loan_amount","formControlName","requested_loan_amount","placeholder","Enter approved amount",1,"form-control"],["for","approved_loan_amount"],["type","number","id","approved_loan_amount","formControlName","approved_loan_amount","placeholder","Enter approved amount",1,"form-control"],["for","interest_rate"],["type","number","id","interest_rate","formControlName","interest_rate","placeholder","Enter interest rate",1,"form-control"],["for","start_date"],["type","date","id","start_date","formControlName","start_date",1,"form-control",3,"min"],["for","penalty"],["type","number","id","penalty","formControlName","penalty","placeholder","Enter penalty percentage",1,"form-control"],[1,"col-md-6","mb-3"],["for","franchiseReferral",1,"form-label"],["type","number","id","franchiseReferral","formControlName","franchise_refer_per","placeholder","Enter indirect referral",1,"form-control"],["for","indirectReferral",1,"form-label"],["type","number","id","indirectReferral","formControlName","indirect_refer_per","placeholder","Enter indirect referral",1,"form-control"],["for","directReferral",1,"form-label"],["type","number","id","directReferral","formControlName","direct_refer_per","placeholder","Enter direct referral",1,"form-control"],["for","chequeProof",1,"form-label"],["type","file","id","chequeProof","accept","image/*","formControlName","cheque_proof",1,"form-control",3,"change"],["selfPassbookInput",""],["class","passbook_box","style","cursor:pointer;",3,"click",4,"ngIf"],[1,"passbook_box",2,"cursor","pointer",3,"click"],["alt","",3,"src",4,"ngIf"],["alt","",3,"src"],[1,"col-md-6"],[1,"col-12","mt-2","d-flex","justify-content-end","mb-2"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],["colspan","2"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",10)(12,"select",11),e.\u0275\u0275text(13," > "),e.\u0275\u0275elementStart(14,"option",12),e.\u0275\u0275text(15,"Select Loan Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"option",13),e.\u0275\u0275text(17,"Personal"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"option",14),e.\u0275\u0275text(19,"Garanteed"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"div",10)(21,"select",15),e.\u0275\u0275text(22," > "),e.\u0275\u0275elementStart(23,"option",12),e.\u0275\u0275text(24,"Select EMI Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"option",16),e.\u0275\u0275text(26,"Daily"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"option",17),e.\u0275\u0275text(28,"Monthly"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(29,"div",10)(30,"select",18)(31,"option",12),e.\u0275\u0275text(32,"Select Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(33,L,2,2,"option",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",20)(35,"button",21),e.\u0275\u0275listener("click",function(){return a.search()}),e.\u0275\u0275element(36,"i",22),e.\u0275\u0275text(37," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",20)(39,"button",23),e.\u0275\u0275listener("click",function(){return a.refresh()}),e.\u0275\u0275element(40,"i",24),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(41,"div",2),e.\u0275\u0275template(42,T,4,0,"div",25),e.\u0275\u0275template(43,R,36,7,"div",26),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(44,ce,28,4,"ng-template",27,28,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(46,ge,93,19,"ng-template",27,29,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("title","Requested ","Personal"===a.loanType?"Personal":"Garanteed"," Loan"),e.\u0275\u0275property("breadcrumbItems",a.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",a.searchFormGroup),e.\u0275\u0275advance(26),e.\u0275\u0275property("ngForOf",a.status),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",!a.loanList||0===a.loanList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==a.loanList.length))},dependencies:[d.NgClass,d.NgForOf,d.NgIf,x.V,f.N9,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r._,r.JJ,r.JL,r.sg,r.u,d.DatePipe],styles:[".passbook_box[_ngcontent-%COMP%]{width:70%;height:120px;background-color:#f0f0f0;display:flex;justify-content:center;align-items:center;border-radius:5px;border:#000000 solid 1px}.passbook_box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;border-radius:5px}"]}),n})();function xe(n,l){1&n&&(e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275element(1,"img",31),e.\u0275\u0275elementStart(2,"p",32),e.\u0275\u0275text(3,"No Transanction found in the current filter."),e.\u0275\u0275elementEnd()())}const he=function(n,l,t,a){return{"badge-soft-primary":n,"badge-soft-info":l,"badge-soft-warning":t,"badge-soft-dark":a}};function Se(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"a",43),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction4(4,he,"credit"===t.transaction_type,"interest"===t.transaction_type,"debit"===t.transaction_type,"ccredit"===t.transaction_type)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,t.transaction_type)," ")}}function ye(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementStart(5,"b"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" Principal Amount : \u20b9",t.principal_component," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" Interest Amount : \u20b9",t.interest_component," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Amount : \u20b9",t.amount," ")}}function Ie(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" \u20b9",t.amount," ")}}function be(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,"")}}function Ee(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,"")}}function Ce(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275template(10,Se,3,9,"a",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275template(12,ye,7,3,"div",42),e.\u0275\u0275template(13,Ie,2,1,"div",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275template(15,be,2,1,"span",42),e.\u0275\u0275template(16,Ee,2,1,"span",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"date"),e.\u0275\u0275elementEnd()()),2&n){const t=l.$implicit,a=l.index,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((o.page-1)*o.pageSize+a+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.user.name," (",t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.loan.loan_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.transaction_id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.transaction_type),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","interest"===t.transaction_type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","credit"===t.transaction_type),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","debit"===t.transaction_type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","ccredit"===t.transaction_type),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.payment_method),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(21,12,t.transaction_date,"medium"))}}function Le(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",33)(1,"table",34)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Loan ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Transanction Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Transanction Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Credit Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Debit Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"th"),e.\u0275\u0275text(19,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"th"),e.\u0275\u0275text(21,"Date"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(22,"tbody"),e.\u0275\u0275template(23,Ce,22,15,"tr",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",36)(25,"div",37)(26,"div",38),e.\u0275\u0275text(27,"Showing "),e.\u0275\u0275elementStart(28,"b"),e.\u0275\u0275text(29),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",37)(32,"div",39)(33,"ngb-pagination",40),e.\u0275\u0275listener("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.page=o)})("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.pageChange(o))}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(23),e.\u0275\u0275property("ngForOf",t.transanctionList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}let Te=(()=>{class n{constructor(t){this.loanService=t,this.transanctionList=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"User Loan Transanction",active:!0}],this.searchFormGroup=new r.cw({name:new r.NI(""),loan_id:new r.NI(""),transaction_id:new r.NI(""),transaction_type:new r.NI(""),payment_method:new r.NI(""),transaction_date:new r.NI("")}),this.getTransanctionList()}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getTransanctionList()}getTransanctionList(){const t=this.searchFormGroup.value,a=[];Object.keys(t).forEach(i=>{null!==t[i]&&""!==t[i]&&a.push(`${i}=${encodeURIComponent(t[i])}`)});const o=a.join("&");this.loanService.getUserTransaction(this.page,this.pageSize,o).subscribe(i=>{this.transanctionList=i.data.userTransaction,this.total=i.data.total})}refresh(){this.page=1,this.searchFormGroup.reset(),this.getTransanctionList()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(v))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-loan-transanction"]],decls:49,vars:4,consts:[[1,"container-fluid"],["title","Transanction History",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-2"],["type","search","id","searchInput","placeholder","Search for Name / User Id / Email id...","formControlName","name",1,"form-control"],["type","search","id","searchInput","placeholder","Search for Loan Number","formControlName","loan_id",1,"form-control"],["type","search","id","searchInput","placeholder","Search for Transanction Id..","formControlName","transaction_id",1,"form-control"],[1,"col-lg-1"],["formControlName","transaction_type",1,"form-control"],["value",""],["value","credit"],["value","debit"],["value","interest"],["formControlName","payment_method",1,"form-control"],["value","EMI"],["value","Bank Transfer"],["value","Cash"],["value","Cheque"],["type","date","id","searchInput","formControlName","transaction_date",1,"form-control"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["href","javascript: void(0);","class","badge font-size-11 m-1",3,"ngClass",4,"ngIf"],[4,"ngIf"],["href","javascript: void(0);",1,"badge","font-size-11","m-1",3,"ngClass"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",8),e.\u0275\u0275element(12,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",8),e.\u0275\u0275element(14,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",12)(16,"select",13)(17,"option",14),e.\u0275\u0275text(18,"Transanction Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"option",15),e.\u0275\u0275text(20,"Credit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"option",16),e.\u0275\u0275text(22,"Debit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"option",17),e.\u0275\u0275text(24,"Interest"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(25,"div",12)(26,"select",18)(27,"option",14),e.\u0275\u0275text(28,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"option",19),e.\u0275\u0275text(30,"EMI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"option",20),e.\u0275\u0275text(32,"Bank Transfer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"option",21),e.\u0275\u0275text(34,"Cash"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"option",22),e.\u0275\u0275text(36,"Cheque"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"div",8),e.\u0275\u0275element(38,"input",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",12)(40,"button",24),e.\u0275\u0275listener("click",function(){return a.getTransanctionList()}),e.\u0275\u0275element(41,"i",25),e.\u0275\u0275text(42," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"div",12)(44,"button",26),e.\u0275\u0275listener("click",function(){return a.refresh()}),e.\u0275\u0275element(45,"i",27),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(46,"div",2),e.\u0275\u0275template(47,xe,4,0,"div",28),e.\u0275\u0275template(48,Le,34,7,"div",29),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",a.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",a.searchFormGroup),e.\u0275\u0275advance(40),e.\u0275\u0275property("ngIf",!a.transanctionList||0===a.transanctionList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==a.transanctionList.length))},dependencies:[d.NgClass,d.NgForOf,d.NgIf,x.V,f.N9,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u,d.TitleCasePipe,d.DatePipe]}),n})();function Fe(n,l){1&n&&(e.\u0275\u0275elementStart(0,"div",29),e.\u0275\u0275element(1,"img",30),e.\u0275\u0275elementStart(2,"p",31),e.\u0275\u0275text(3,"No Transanction found in the current filter."),e.\u0275\u0275elementEnd()())}function Pe(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()()),2&n){const t=l.$implicit,a=l.index,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((o.page-1)*o.pageSize+a+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.user.name," (",t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.loan.loan_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(11,7,t.transaction_date,"medium")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.description," ")}}function qe(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Loan ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Description"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"tbody"),e.\u0275\u0275template(17,Pe,14,10,"tr",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",35)(19,"div",36)(20,"div",37),e.\u0275\u0275text(21,"Showing "),e.\u0275\u0275elementStart(22,"b"),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",36)(26,"div",38)(27,"ngb-pagination",39),e.\u0275\u0275listener("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.page=o)})("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.pageChange(o))}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(17),e.\u0275\u0275property("ngForOf",t.transanctionList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}let we=(()=>{class n{constructor(t){this.loanService=t,this.transanctionList=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"Admin Loan Transanction",active:!0}],this.searchFormGroup=new r.cw({name:new r.NI(""),transaction_id:new r.NI(""),transaction_type:new r.NI(""),payment_method:new r.NI(""),transaction_date:new r.NI("")}),this.getTransanctionList()}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getTransanctionList()}getTransanctionList(){const t=this.searchFormGroup.value,a=[];Object.keys(t).forEach(i=>{null!==t[i]&&""!==t[i]&&a.push(`${i}=${encodeURIComponent(t[i])}`)});const o=a.join("&");this.loanService.getAdminTransaction(this.page,this.pageSize,o).subscribe(i=>{this.transanctionList=i.data.adminTransanction,this.total=i.data.total})}refresh(){this.searchFormGroup.reset(),this.page=1,this.getTransanctionList()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(v))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-admin-loan-transanction"]],decls:45,vars:4,consts:[[1,"container-fluid"],["title","Transanction History",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-4"],["type","search","id","searchInput","placeholder","Search for Name / User Id / Email id...","formControlName","name",1,"form-control"],[1,"col-lg-2"],["type","search","id","searchInput","placeholder","Search for Transanction Id..","formControlName","transaction_id",1,"form-control"],[1,"col-lg-1"],["formControlName","transaction_type",1,"form-control"],["value",""],["value","credit"],["value","debit"],["formControlName","payment_method",1,"form-control"],["value","EMI"],["value","Bank Transfer"],["value","Cash"],["value","Cheque"],["type","date","id","searchInput","formControlName","transaction_date",1,"form-control"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",10),e.\u0275\u0275element(12,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",12)(14,"select",13)(15,"option",14),e.\u0275\u0275text(16,"Transanction Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"option",15),e.\u0275\u0275text(18,"Credit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"option",16),e.\u0275\u0275text(20,"Debit"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"div",12)(22,"select",17)(23,"option",14),e.\u0275\u0275text(24,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"option",18),e.\u0275\u0275text(26,"EMI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"option",19),e.\u0275\u0275text(28,"Bank Transfer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"option",20),e.\u0275\u0275text(30,"Cash"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"option",21),e.\u0275\u0275text(32,"Cheque"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(33,"div",10),e.\u0275\u0275element(34,"input",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",12)(36,"button",23),e.\u0275\u0275listener("click",function(){return a.getTransanctionList()}),e.\u0275\u0275element(37,"i",24),e.\u0275\u0275text(38," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"div",12)(40,"button",25),e.\u0275\u0275listener("click",function(){return a.refresh()}),e.\u0275\u0275element(41,"i",26),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(42,"div",2),e.\u0275\u0275template(43,Fe,4,0,"div",27),e.\u0275\u0275template(44,qe,28,7,"div",28),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",a.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",a.searchFormGroup),e.\u0275\u0275advance(36),e.\u0275\u0275property("ngIf",!a.transanctionList||0===a.transanctionList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==a.transanctionList.length))},dependencies:[d.NgForOf,d.NgIf,x.V,f.N9,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u,d.DatePipe]}),n})();var Ge=m(8386),Ne=m(7185),I=m(139);function Re(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"User ID is required."),e.\u0275\u0275elementEnd())}function ke(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,Re,2,0,"small",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("id"))||null==a.errors?null:a.errors.required)}}function Ve(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",25)(1,"small")(2,"strong"),e.\u0275\u0275text(3,"Name:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.userDetails.name,"")}}function Ae(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Loan ID is required."),e.\u0275\u0275elementEnd())}function je(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,Ae,2,0,"small",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("loanId"))||null==a.errors?null:a.errors.required)}}function Me(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Amount is required."),e.\u0275\u0275elementEnd())}function De(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Amount must be at least 1."),e.\u0275\u0275elementEnd())}function $e(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,Me,2,0,"small",24),e.\u0275\u0275template(2,De,2,0,"small",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("amount"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.paymentFormGroup.get("amount"))||null==o.errors?null:o.errors.min)}}function Be(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",25)(1,"small")(2,"strong"),e.\u0275\u0275text(3,"Total Bill Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" \u20b9",t.totalPayableAmount,"")}}function ze(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"option",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=l.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function Oe(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Payment Method is required."),e.\u0275\u0275elementEnd())}function Ue(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,Oe,2,0,"small",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("paymentMethod"))||null==a.errors?null:a.errors.required)}}function Je(n,l){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Transanction Id is required."),e.\u0275\u0275elementEnd())}function Ke(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,Je,2,0,"small",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("transactionId"))||null==a.errors?null:a.errors.required)}}const Ye=[{path:"loans/:type",component:ve},{path:"pay-loan",component:(()=>{class n{constructor(t,a,o,i){this.userService=t,this.loanService=a,this.toast=o,this.route=i,this.userDetails=null,this.loanList=[],this.paymentMethods=["Cash","Bank Transfer","Cash","Cheque"],this.totalPayableAmount=0,this.userDetails=null,this.loanList=[]}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"Pay Loans",active:!0}],this.paymentFormGroup=new r.cw({id:new r.NI("",r.kI.required),loanId:new r.NI("",r.kI.required),amount:new r.NI("",[r.kI.required,r.kI.min(1)]),paymentMethod:new r.NI("",r.kI.required),transactionId:new r.NI("",r.kI.required)}),this.route.queryParams.subscribe(t=>{t.user&&(this.paymentFormGroup.patchValue({id:t.user}),this.getDetails()),t.id&&(this.paymentFormGroup.patchValue({loanId:t.id}),this.getTotalPaybleAmount({_id:t.id}))})}getDetails(){!this.paymentFormGroup.value.id||this.userService.getBasicUserProfile(this.paymentFormGroup.value.id).subscribe({next:t=>{t.status&&(this.userDetails=t?.data?.user,this.getAllLoans(this.userDetails._id))},error:t=>{console.error("Error fetching user details:",t)}})}getTotalPaybleAmount(t){this.loanService.getTotalPaymentAmount(t._id).subscribe({next:a=>{console.log("Total Payment Amount:",a),a.status?this.totalPayableAmount=a?.data?.outstandingAmount:console.error("Error fetching total payment amount:",a.message)},error:a=>{console.error("Error fetching total payment amount:",a)}})}getAllLoans(t){this.loanService.getAllUserActiveLoans(t).subscribe({next:a=>{a.status?this.loanList=a?.data?.loans.map(o=>({_id:o._id,label:`${o.loan_id} Amount: ${o.approved_loan_amount} Purpose: ${o.purpose}`})):console.error("Error fetching loans:",a.message)},error:a=>{console.error("Error fetching loans:",a)}})}payLoanFees(){if(this.paymentFormGroup.invalid)return void console.error("Payment form is invalid");const t={...this.paymentFormGroup.value};t.amount=parseFloat(t.amount),t.amount<=0?this.toast.error("Amount must be greater than zero"):t.amount>this.totalPayableAmount?this.toast.error("Amount exceeds total payable amount"):this.loanService.recordPayment(t).subscribe({next:a=>{a.status?(this.toast.success("Payment recorded successfully"),this.paymentFormGroup.reset(),this.totalPayableAmount=0):this.toast.success("Error recording payment:")},error:a=>{this.toast.success("Error recording payment:")}})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(Ge.i),e.\u0275\u0275directiveInject(v),e.\u0275\u0275directiveInject(Ne._W),e.\u0275\u0275directiveInject(_.gz))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-pay-loan"]],decls:38,vars:14,consts:[[1,"container-fluid"],["title","Pay Loan",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-12",3,"formGroup"],[1,"mb-3","col-lg-12"],["for","userId",1,"form-label"],["type","text","id","userId","formControlName","id","placeholder","Enter user ID",1,"form-control",3,"blur"],["class","text-danger",4,"ngIf"],["class","mt-1",4,"ngIf"],["for","cardId",1,"form-label"],["formControlName","loanId",3,"items","bindValue","bindLabel","change"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter amount","min","1",1,"form-control"],[1,"mb-3","col-lg-6"],["for","paymentMethod",1,"form-label"],["id","paymentMethod","formControlName","paymentMethod",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],["for","transactionId",1,"form-label"],["type","text","id","transactionId","formControlName","transactionId","placeholder","Enter Transanction Id","min","1",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"text-danger"],[4,"ngIf"],[1,"mt-1"],[3,"ngValue"]],template:function(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",2)(8,"div",7)(9,"label",8),e.\u0275\u0275text(10,"User ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"input",9),e.\u0275\u0275listener("blur",function(){return a.getDetails()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,ke,2,1,"div",10),e.\u0275\u0275template(13,Ve,5,1,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",7)(15,"label",12),e.\u0275\u0275text(16,"Loan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"ng-select",13),e.\u0275\u0275listener("change",function(i){return a.getTotalPaybleAmount(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,je,2,1,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",7)(20,"label",14),e.\u0275\u0275text(21,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(22,"input",15),e.\u0275\u0275template(23,$e,3,2,"div",10),e.\u0275\u0275template(24,Be,5,1,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",16)(26,"label",17),e.\u0275\u0275text(27,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"select",18),e.\u0275\u0275template(29,ze,2,2,"option",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(30,Ue,2,1,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",16)(32,"label",20),e.\u0275\u0275text(33,"Transanction Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"input",21),e.\u0275\u0275template(35,Ke,2,1,"div",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"button",22),e.\u0275\u0275listener("click",function(){return a.payLoanFees()}),e.\u0275\u0275text(37,"Submit"),e.\u0275\u0275elementEnd()()()()()()()),2&t){let o,i,s,p,c;e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",a.breadCrumbItems),e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",a.paymentFormGroup),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==(o=a.paymentFormGroup.get("id"))?null:o.touched)&&(null==(o=a.paymentFormGroup.get("id"))?null:o.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.userDetails),e.\u0275\u0275advance(4),e.\u0275\u0275property("items",a.loanList)("bindValue","_id")("bindLabel","label"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(i=a.paymentFormGroup.get("loanId"))?null:i.touched)&&(null==(i=a.paymentFormGroup.get("loanId"))?null:i.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(s=a.paymentFormGroup.get("amount"))?null:s.touched)&&(null==(s=a.paymentFormGroup.get("amount"))?null:s.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.userDetails),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",a.paymentMethods),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(p=a.paymentFormGroup.get("paymentMethod"))?null:p.touched)&&(null==(p=a.paymentFormGroup.get("paymentMethod"))?null:p.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(c=a.paymentFormGroup.get("transactionId"))?null:c.touched)&&(null==(c=a.paymentFormGroup.get("transactionId"))?null:c.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",a.paymentFormGroup.invalid)}},dependencies:[d.NgForOf,d.NgIf,x.V,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.qQ,r.sg,r.u,I.w9]}),n})()},{path:"user-transanction",component:Te},{path:"admin-transanction",component:we}];let We=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[_.Bz.forChild(Ye),_.Bz]}),n})();var He=m(9668);let Qe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[d.CommonModule,He.v,f.jF,r.UX,I.A0,We]}),n})()}}]);
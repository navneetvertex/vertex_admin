"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[243],{6243:(ot,R,m)=>{m.r(R),m.d(R,{CreditCardModule:()=>it});var d=m(6895),G=m(9158),l=m(4006),P=m(5226),u=m.n(P),e=m(4650),c=m(2340),j=m(529);let g=(()=>{class r{constructor(t){this.http=t}getRequestedCreditCard(t=0,n=10,a=""){return this.http.get(`${c.N.api_url}credit-cards/requested?page=${t}&limit=${n}&search=${a}`)}getAssignedCreditCard(t=0,n=10,a=""){return this.http.get(`${c.N.api_url}credit-cards/assigned?page=${t}&limit=${n}&search=${a}`)}approveCreditCard(t,n){return this.http.post(`${c.N.api_url}credit-cards/approve/${t}`,n)}rejectCreditCard(t,n={}){return this.http.post(`${c.N.api_url}credit-cards/reject/${t}`,n)}getUserFundRequests(t=0,n=10,a){return this.http.get(`${c.N.api_url}credit-cards/getUserFundRequests?page=${t}&limit=${n}&${a}`)}approveUserFundRequest(t){return this.http.get(`${c.N.api_url}credit-cards/approveUserFundRequest/${t}`)}rejectUserFundRequest(t){return this.http.get(`${c.N.api_url}credit-cards/rejectUserFundRequest/${t}`)}getAdminCreditCardTransactions(t=0,n=10,a=""){return this.http.get(`${c.N.api_url}credit-cards/getAdminCreditCardTransactions?page=${t}&limit=${n}&search=${a}`)}getUserCreditCardTransactions(t,n=0,a=10,o=""){return this.http.get(`${c.N.api_url}credit-cards/getUserCreditCardTransactions/${t}?page=${n}&limit=${a}&search=${o}`)}getActiveCreditCardsOfUser(t){return this.http.get(`${c.N.api_url}credit-cards/getActiveCreditCardsOfUser/${t}`)}getAllFundRequestsOfCreditCard(t){return this.http.get(`${c.N.api_url}credit-cards/getAllFundRequestsOfCreditCard/${t}`)}getTotalPaybleAmount(t){return this.http.get(`${c.N.api_url}credit-cards/totalPaybleAmount/${t}`)}payCreditCardFees(t){return this.http.post(`${c.N.api_url}credit-cards/payCreditCardFees`,t)}generateCreditCardNumber(t){return this.http.get(`${c.N.api_url}credit-cards/generateCreditCardNumber/${t}`)}getCreditCardNumberList(t=0,n=10,a=""){return this.http.get(`${c.N.api_url}credit-cards/getCreditCardNumberList?page=${t}&limit=${n}`)}getLatest5CreditCardNumbers(){return this.http.get(`${c.N.api_url}credit-cards/getLatest5CreditCardNumbers`)}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275inject(j.eN))},r.\u0275prov=e.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var _=m(9061),b=m(7185),C=m(9234);function L(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275element(1,"img",25),e.\u0275\u0275elementStart(2,"p",26),e.\u0275\u0275text(3,"No request found."),e.\u0275\u0275elementEnd()())}function V(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",null==t||null==t.direct_user?null:t.direct_user.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t||null==t.direct_user?null:t.direct_user.user_id,")")}}function $(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275element(6,"br"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275template(9,V,4,2,"span",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td")(14,"span"),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"td")(17,"span",30),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2),p=e.\u0275\u0275reference(28);return e.\u0275\u0275resetView(s.approveCreditCard(p,o))}),e.\u0275\u0275elementStart(18,"a",31),e.\u0275\u0275element(19,"i",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(20,"span",33),e.\u0275\u0275elementStart(21,"span",34),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2),p=e.\u0275\u0275reference(30);return e.\u0275\u0275resetView(s.rejectCreditCardModal(p,o))}),e.\u0275\u0275elementStart(22,"a",35),e.\u0275\u0275element(23,"i",36),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()}if(2&r){const t=i.$implicit,n=i.index,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((a.page-1)*a.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",null==t||null==t.user?null:t.user.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t||null==t.user?null:t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==t?null:t.direct_user),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,9,t.created_date)),e.\u0275\u0275advance(3),e.\u0275\u0275classMapInterpolate1("badge bg-","Active"===t.status?"success":"Requested"===t.status?"warning":"danger",""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.status," ")}}function D(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"table",27)(1,"thead")(2,"tr")(3,"th"),e.\u0275\u0275text(4,"S.No."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"th"),e.\u0275\u0275text(6,"User Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th"),e.\u0275\u0275text(8,"Parent Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"th"),e.\u0275\u0275text(10,"Reqested At"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"th"),e.\u0275\u0275text(12,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th"),e.\u0275\u0275text(14,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"tbody"),e.\u0275\u0275template(16,$,24,11,"ng-container",28),e.\u0275\u0275elementEnd()()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(16),e.\u0275\u0275property("ngForOf",t.ccList)}}function z(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"option",70),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function M(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275text(1," Card number is required. "),e.\u0275\u0275elementEnd())}function U(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275text(1," Card number must be 12 to 16 digits. "),e.\u0275\u0275elementEnd())}function B(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275text(1," Credit limit is required. "),e.\u0275\u0275elementEnd())}function O(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275text(1," Minimum credit limit is 100. "),e.\u0275\u0275elementEnd())}function Y(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275text(1," Interest rate is required. "),e.\u0275\u0275elementEnd())}function J(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275text(1," Interest rate cannot be negative. "),e.\u0275\u0275elementEnd())}function K(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275text(1," Interest rate cannot exceed 100%. "),e.\u0275\u0275elementEnd())}function W(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275text(1," Penalty is required. "),e.\u0275\u0275elementEnd())}function Q(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275text(1," Penalty cannot be negative. "),e.\u0275\u0275elementEnd())}function X(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275text(1," Penalty cannot exceed 100%. "),e.\u0275\u0275elementEnd())}function H(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275text(1," Start date is required. "),e.\u0275\u0275elementEnd())}function Z(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Indirect referral amount is required."),e.\u0275\u0275elementEnd())}function ee(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function te(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",72),e.\u0275\u0275template(1,Z,2,0,"small",29),e.\u0275\u0275template(2,ee,2,0,"small",29),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n,a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.approveCCFormGroup.get("franchise_refer_per"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.approveCCFormGroup.get("franchise_refer_per"))||null==a.errors?null:a.errors.min)}}function ne(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Indirect referral amount is required."),e.\u0275\u0275elementEnd())}function re(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function ae(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",72),e.\u0275\u0275template(1,ne,2,0,"small",29),e.\u0275\u0275template(2,re,2,0,"small",29),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n,a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.approveCCFormGroup.get("indirect_refer_per"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.approveCCFormGroup.get("indirect_refer_per"))||null==a.errors?null:a.errors.min)}}function le(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Direct referral % is required."),e.\u0275\u0275elementEnd())}function ie(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function oe(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",72),e.\u0275\u0275template(1,le,2,0,"small",29),e.\u0275\u0275template(2,ie,2,0,"small",29),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n,a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.approveCCFormGroup.get("direct_refer_per"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.approveCCFormGroup.get("direct_refer_per"))||null==a.errors?null:a.errors.min)}}function se(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"h5",38),e.\u0275\u0275text(2,"Approve Credit Card"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",39),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",40)(5,"div",41)(6,"div",2)(7,"div",42)(8,"div",43)(9,"label",44),e.\u0275\u0275text(10,"Card Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"select",45)(12,"option",46),e.\u0275\u0275text(13,"Select Card Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,z,2,2,"option",47),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,M,2,0,"div",48),e.\u0275\u0275template(16,U,2,0,"div",48),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",43)(18,"label",49),e.\u0275\u0275text(19,"Approved Credit Limit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"input",50),e.\u0275\u0275template(21,B,2,0,"div",48),e.\u0275\u0275template(22,O,2,0,"div",48),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",2)(24,"div",51)(25,"label",52),e.\u0275\u0275text(26,"Interest Rate (%)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"input",53),e.\u0275\u0275template(28,Y,2,0,"div",48),e.\u0275\u0275template(29,J,2,0,"div",48),e.\u0275\u0275template(30,K,2,0,"div",48),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",51)(32,"label",54),e.\u0275\u0275text(33,"Penalty (In Rupees)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"input",55),e.\u0275\u0275template(35,W,2,0,"div",48),e.\u0275\u0275template(36,Q,2,0,"div",48),e.\u0275\u0275template(37,X,2,0,"div",48),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",2)(39,"div",56)(40,"label",57),e.\u0275\u0275text(41,"Start Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(42,"input",58),e.\u0275\u0275template(43,H,2,0,"div",48),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"div",59)(45,"label",60),e.\u0275\u0275text(46,"Franchise Referral Rupees"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(47,"input",61),e.\u0275\u0275template(48,te,3,2,"div",62),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(49,"div",2)(50,"div",59)(51,"label",63),e.\u0275\u0275text(52,"Indirect Referral Rupees"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(53,"input",64),e.\u0275\u0275template(54,ae,3,2,"div",62),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"div",59)(56,"label",65),e.\u0275\u0275text(57,"Direct Referral Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(58,"input",66),e.\u0275\u0275template(59,oe,3,2,"div",62),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(60,"div",67)(61,"button",68),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Close click"))}),e.\u0275\u0275text(62,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"button",69),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.approveCC())}),e.\u0275\u0275text(64,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,a,o,s,p,E,v,I,w,F,f,T,N,q,h,A,x,S,y;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.approveCCFormGroup),e.\u0275\u0275advance(7),e.\u0275\u0275classProp("is-invalid",(null==(n=t.approveCCFormGroup.get("card_number"))?null:n.invalid)&&((null==(n=t.approveCCFormGroup.get("card_number"))?null:n.touched)||(null==(n=t.approveCCFormGroup.get("card_number"))?null:n.dirty))),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.cardList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.approveCCFormGroup.get("card_number"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.approveCCFormGroup.get("card_number"))||null==o.errors?null:o.errors.pattern),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("is-invalid",(null==(s=t.approveCCFormGroup.get("approved_credit_limit"))?null:s.invalid)&&((null==(s=t.approveCCFormGroup.get("approved_credit_limit"))?null:s.touched)||(null==(s=t.approveCCFormGroup.get("approved_credit_limit"))?null:s.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(p=t.approveCCFormGroup.get("approved_credit_limit"))||null==p.errors?null:p.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(E=t.approveCCFormGroup.get("approved_credit_limit"))||null==E.errors?null:E.errors.min),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("is-invalid",(null==(v=t.approveCCFormGroup.get("interest_rate"))?null:v.invalid)&&((null==(v=t.approveCCFormGroup.get("interest_rate"))?null:v.touched)||(null==(v=t.approveCCFormGroup.get("interest_rate"))?null:v.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(I=t.approveCCFormGroup.get("interest_rate"))||null==I.errors?null:I.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(w=t.approveCCFormGroup.get("interest_rate"))||null==w.errors?null:w.errors.min),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(F=t.approveCCFormGroup.get("interest_rate"))||null==F.errors?null:F.errors.max),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("is-invalid",(null==(f=t.approveCCFormGroup.get("penalty"))?null:f.invalid)&&((null==(f=t.approveCCFormGroup.get("penalty"))?null:f.touched)||(null==(f=t.approveCCFormGroup.get("penalty"))?null:f.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(T=t.approveCCFormGroup.get("penalty"))||null==T.errors?null:T.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(N=t.approveCCFormGroup.get("penalty"))||null==N.errors?null:N.errors.min),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(q=t.approveCCFormGroup.get("penalty"))||null==q.errors?null:q.errors.max),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("is-invalid",(null==(h=t.approveCCFormGroup.get("start_date"))?null:h.invalid)&&((null==(h=t.approveCCFormGroup.get("start_date"))?null:h.touched)||(null==(h=t.approveCCFormGroup.get("start_date"))?null:h.dirty))),e.\u0275\u0275property("min",t.minDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(A=t.approveCCFormGroup.get("start_date"))||null==A.errors?null:A.errors.required),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(x=t.approveCCFormGroup.get("franchise_refer_per"))?null:x.touched)&&(null==(x=t.approveCCFormGroup.get("franchise_refer_per"))?null:x.invalid)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==(S=t.approveCCFormGroup.get("indirect_refer_per"))?null:S.touched)&&(null==(S=t.approveCCFormGroup.get("indirect_refer_per"))?null:S.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(y=t.approveCCFormGroup.get("direct_refer_per"))?null:y.touched)&&(null==(y=t.approveCCFormGroup.get("direct_refer_per"))?null:y.invalid)),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!t.approveCCFormGroup.valid)}}function de(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275text(1," Reason is required. "),e.\u0275\u0275elementEnd())}function me(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275text(1," Reason must be at least 10 characters. "),e.\u0275\u0275elementEnd())}function ce(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"h5",38),e.\u0275\u0275text(2,"Reject Credit Card"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",39),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",40)(5,"div",41)(6,"div",2)(7,"div",42)(8,"div",43)(9,"label",73),e.\u0275\u0275text(10,"Rejected Credit Limit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"select",74)(12,"option",75),e.\u0275\u0275text(13,"Rejected"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"option",76),e.\u0275\u0275text(15,"Blocked"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",43)(17,"label",77),e.\u0275\u0275text(18,"Reason for Rejection"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"textarea",78),e.\u0275\u0275template(20,de,2,0,"div",48),e.\u0275\u0275template(21,me,2,0,"div",48),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",43),e.\u0275\u0275element(23,"label",79),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(24,"div",67)(25,"button",68),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Close click"))}),e.\u0275\u0275text(26,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"button",69),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.rejectCreditCard())}),e.\u0275\u0275text(28,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,a,o,s;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.rejectCCFormGroup),e.\u0275\u0275advance(7),e.\u0275\u0275classProp("is-invalid",(null==(n=t.rejectCCFormGroup.get("status"))?null:n.invalid)&&((null==(n=t.rejectCCFormGroup.get("status"))?null:n.touched)||(null==(n=t.rejectCCFormGroup.get("status"))?null:n.dirty))),e.\u0275\u0275advance(8),e.\u0275\u0275classProp("is-invalid",(null==(a=t.rejectCCFormGroup.get("reason"))?null:a.invalid)&&((null==(a=t.rejectCCFormGroup.get("reason"))?null:a.touched)||(null==(a=t.rejectCCFormGroup.get("reason"))?null:a.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.rejectCCFormGroup.get("reason"))||null==o.errors?null:o.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(s=t.rejectCCFormGroup.get("reason"))||null==s.errors?null:s.errors.minlength),e.\u0275\u0275advance(6),e.\u0275\u0275property("disabled",!t.rejectCCFormGroup.valid)}}let pe=(()=>{class r{constructor(t,n,a){this.creditCardService=t,this.modalService=n,this.toast=a,this.ccList=[],this.total=0,this.page=1,this.pageSize=10,this.searchText="",this.cc_selected=null,this.cardList=[]}getLatest5CreditCardNumbers(){this.creditCardService.getLatest5CreditCardNumbers().subscribe({next:t=>{t.status&&(this.cardList=t.data.cardNumbers.map(n=>n.card_number)||[])},error:t=>{console.error("Error fetching latest credit card numbers:",t),this.toast.error("Failed to fetch latest credit card numbers. Please try again.")}})}ngOnInit(){this.breadCrumbItems=[{label:"Credit Management"},{label:"Request for new card",active:!0}],this.getRequestedCreditCard(),this.getLatest5CreditCardNumbers();const t=new Date,n=new Date;n.setDate(t.getDate()+1),this.minDate=n.toISOString().split("T")[0],this.maxDate=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString().split("T")[0],this.approveCCFormGroup=new l.cw({card_number:new l.NI("",{nonNullable:!0,validators:[l.kI.required,l.kI.pattern(/^\d{16}$/)]}),approved_credit_limit:new l.NI({value:"1200",disabled:!0},{nonNullable:!0,validators:[l.kI.required,l.kI.min(100)]}),interest_rate:new l.NI(null,{nonNullable:!0,validators:[l.kI.required,l.kI.min(0),l.kI.max(100)]}),penalty:new l.NI(null,{nonNullable:!0,validators:[l.kI.min(0),l.kI.max(100)]}),start_date:new l.NI(null,{nonNullable:!0,validators:[l.kI.required]}),indirect_refer_per:new l.NI(null,{nonNullable:!0,validators:[l.kI.required,l.kI.min(0),l.kI.max(100)]}),direct_refer_per:new l.NI(null,{nonNullable:!0,validators:[l.kI.required,l.kI.min(0),l.kI.max(100)]}),franchise_refer_per:new l.NI(null,{nonNullable:!0,validators:[l.kI.required,l.kI.min(0),l.kI.max(100)]})}),this.rejectCCFormGroup=new l.cw({reason:new l.NI(null,{nonNullable:!0,validators:[l.kI.required,l.kI.minLength(10)]}),status:new l.NI("Rejected",{nonNullable:!0,validators:[l.kI.required]})})}getRequestedCreditCard(){this.creditCardService.getRequestedCreditCard(this.page,this.pageSize,this.searchText).subscribe({next:t=>{this.total=t?.data?.total||0,this.ccList=t?.data?.cc||[]},error:t=>{console.error("Error fetching requested credit card:",t)}})}approveCC(){if(this.approveCCFormGroup.invalid)return void this.toast.error("Please fill all required fields correctly.");const t=this.approveCCFormGroup.value,n={_id:this.cc_selected._id,approved_credit_limit:1200,interest_rate:t.interest_rate,start_date:t.start_date,card_number:t.card_number,franchise_refer_per:t.franchise_refer_per,penalty:t.penalty,indirect_refer_per:t.indirect_refer_per,direct_refer_per:t.direct_refer_per};this.creditCardService.approveCreditCard(n._id,n).subscribe({next:a=>{this.toast.success("Credit card approved successfully."),u().fire({title:"Credit Card Approved",text:`Credit card has been approved with a limit of \u20b9${n.approved_credit_limit}.`,icon:"success",confirmButtonText:"OK"}),this.approveCCFormGroup.reset(),this.modalService.dismissAll(),this.getRequestedCreditCard()},error:a=>{console.error("Error approving credit card:",a),this.toast.error("Failed to approve credit card. Please try again."),u().fire({title:"Approval Failed",text:"There was an error approving the credit card. Please try again later.",icon:"error",confirmButtonText:"OK"})}})}approveCreditCard(t,n){this.cc_selected=n,console.log("Selected credit card for approval:",this.cc_selected),this.approveCCFormGroup.reset(),this.approveCCFormGroup.patchValue({card_number:n.card_number,approved_credit_limit:1200}),this.modalService.open(t,{backdrop:"static"})}rejectCreditCardModal(t,n){this.cc_selected=n,this.modalService.open(t,{backdrop:"static"})}search(t){this.searchText=t,this.page=1,this.getRequestedCreditCard()}rejectCreditCard(){if(this.rejectCCFormGroup.invalid)return void this.toast.error("Please fill all required fields correctly.");const t=this.rejectCCFormGroup.value;console.log("Rejecting credit card with data:",t),this.creditCardService.rejectCreditCard(this.cc_selected._id,t).subscribe({next:n=>{this.toast.success("Credit card rejected successfully."),this.modalService.dismissAll(),this.getRequestedCreditCard()},error:n=>{console.error("Error rejecting credit card:",n),this.toast.error("Failed to reject credit card. Please try again.")}})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getRequestedCreditCard()}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(g),e.\u0275\u0275directiveInject(_.FF),e.\u0275\u0275directiveInject(b._W))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-request-new-card"]],decls:31,vars:9,consts:[[1,"container-fluid"],["title","Request for new Card",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","border-bottom"],[1,"row","mb-0"],[1,"col-sm-4"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","autocomplete","off","id","searchTableList","placeholder","Search...",1,"form-control",3,"keydown.enter"],[1,"bx","bx-search-alt","search-icon"],[1,"card-body"],[1,"table-responsive"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["id","basic-datatable","class","table table-bordered dt-responsive nowrap datatables no-footer dtr-inline",4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["role","document"],["ApproveFormModal",""],["RejectFormModal",""],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[4,"ngIf"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Approve",3,"click"],["href","javascript:void(0);",1,"btn","btn-sm","btn-soft-info"],[1,"mdi","mdi-close-circle-outline"],[1,"mx-1"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Reject",3,"click"],["href","javascript:void(0);",1,"btn","btn-sm","btn-soft-danger"],[1,"mdi","mdi-close"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],["novalidate","",3,"formGroup"],[1,"modal-body"],[1,"col-md-12"],[1,"mb-3"],["for","card_number",1,"form-label"],["id","card_number","formControlName","card_number","required","","placeholder","Enter card number",1,"form-control"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["for","approved_credit_limit",1,"form-label"],["type","number","id","approved_credit_limit","formControlName","approved_credit_limit","min","100","required","",1,"form-control"],[1,"mb-3","col-lg-6"],["for","interest_rate",1,"form-label"],["type","number","id","interest_rate","formControlName","interest_rate","min","0","max","100","required","",1,"form-control"],["for","penalty",1,"form-label"],["type","number","id","penalty","formControlName","penalty","min","0","max","100","required","",1,"form-control"],[1,"mb-3","col-md-6"],["for","start_date",1,"form-label"],["type","date","id","start_date","formControlName","start_date","required","",1,"form-control",3,"min"],[1,"col-md-6","mb-3"],["for","franchiseReferral",1,"form-label"],["type","number","id","franchiseReferral","formControlName","franchise_refer_per","placeholder","Enter indirect referral",1,"form-control"],["class","text-danger",4,"ngIf"],["for","indirectReferral",1,"form-label"],["type","number","id","indirectReferral","formControlName","indirect_refer_per","placeholder","Enter indirect referral",1,"form-control"],["for","directReferral",1,"form-label"],["type","number","id","directReferral","formControlName","direct_refer_per","placeholder","Enter direct referral",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","button",1,"btn","btn-primary","waves-effect","waves-light",3,"disabled","click"],[3,"value"],[1,"invalid-feedback"],[1,"text-danger"],["for","rejected_credit_limit",1,"form-label"],["id","rejected_credit_limit","formControlName","status","required","",1,"form-select"],["value","Rejected"],["value","Blocked"],["for","reason",1,"form-label"],["id","reason","formControlName","reason","rows","3","required","","minlength","10",1,"form-control"],["for",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"input",10),e.\u0275\u0275listener("keydown.enter",function(o){return n.search(o.target.value)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"i",11),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(12,"div",12)(13,"div",2)(14,"div",13),e.\u0275\u0275template(15,L,4,0,"div",14),e.\u0275\u0275template(16,D,17,1,"table",15),e.\u0275\u0275elementStart(17,"div",16)(18,"div",17)(19,"div",18),e.\u0275\u0275text(20,"Showing "),e.\u0275\u0275elementStart(21,"b"),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",17)(25,"div",19)(26,"ngb-pagination",20),e.\u0275\u0275listener("pageChange",function(o){return n.page=o})("pageChange",function(o){return n.pageChange(o)}),e.\u0275\u0275elementEnd()()()()()()()()()(),e.\u0275\u0275template(27,se,65,28,"ng-template",21,22,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(29,ce,29,8,"ng-template",21,23,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(14),e.\u0275\u0275property("ngIf",0===n.ccList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==n.ccList.length),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((n.page-1)*n.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",n.findPageShowing()," of ",n.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",n.total)("page",n.page)("pageSize",n.pageSize))},dependencies:[d.NgForOf,d.NgIf,C.V,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.Q7,l.wO,l.qQ,l.Fd,l.sg,l.u,_.N9,d.DatePipe]}),r})();function ue(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275element(1,"img",24),e.\u0275\u0275elementStart(2,"p",25),e.\u0275\u0275text(3,"No request found."),e.\u0275\u0275elementEnd()())}function _e(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",null==t||null==t.direct_user?null:t.direct_user.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t||null==t.direct_user?null:t.direct_user.user_id,")")}}function ge(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",null==t||null==t.indirect_user?null:t.indirect_user.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t||null==t.indirect_user?null:t.indirect_user.user_id,")")}}function Ce(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275element(6,"br"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275template(9,_e,4,2,"span",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275template(11,ge,4,2,"span",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td"),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"date"),e.\u0275\u0275element(21,"br"),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"date"),e.\u0275\u0275element(24,"br"),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"date"),e.\u0275\u0275element(27,"br"),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"td")(31,"span"),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"td"),e.\u0275\u0275element(34,"span",29),e.\u0275\u0275elementStart(35,"span",30),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2),p=e.\u0275\u0275reference(28);return e.\u0275\u0275resetView(s.rejectCreditCardModal(p,o))}),e.\u0275\u0275elementStart(36,"a",31),e.\u0275\u0275element(37,"i",32),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()}if(2&r){const t=i.$implicit,n=i.index,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((a.page-1)*a.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",null==t||null==t.user?null:t.user.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t||null==t.user?null:t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==t?null:t.direct_user),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==t?null:t.indirect_user),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.approved_credit_limit),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.card_number),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.interest_rate,"%"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" Requested On: ",e.\u0275\u0275pipeBind1(20,16,t.created_date)," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Approved On: ",t.approved_date?e.\u0275\u0275pipeBind1(23,18,t.approved_date):"N/A"," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Start Date: ",t.start_date?e.\u0275\u0275pipeBind1(26,20,t.start_date):"N/A"," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Expiry Date: ",t.expiry_date?e.\u0275\u0275pipeBind1(29,22,t.expiry_date):"N/A"," "),e.\u0275\u0275advance(3),e.\u0275\u0275classMapInterpolate1("badge bg-","Active"===t.status?"success":"Requested"===t.status?"warning":"danger",""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.status," ")}}function ve(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"table",26)(1,"thead")(2,"tr")(3,"th"),e.\u0275\u0275text(4,"S.No."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"th"),e.\u0275\u0275text(6,"User Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th"),e.\u0275\u0275text(8,"Parent Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"th"),e.\u0275\u0275text(10,"Indirect Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"th"),e.\u0275\u0275text(12,"Card Limit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th"),e.\u0275\u0275text(14,"Card Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"th"),e.\u0275\u0275text(16,"Interest Rate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"th"),e.\u0275\u0275text(18,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th"),e.\u0275\u0275text(20,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"th"),e.\u0275\u0275text(22,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(23,"tbody"),e.\u0275\u0275template(24,Ce,38,24,"ng-container",27),e.\u0275\u0275elementEnd()()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(24),e.\u0275\u0275property("ngForOf",t.ccList)}}function fe(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",50),e.\u0275\u0275text(1," Reason is required. "),e.\u0275\u0275elementEnd())}function he(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",50),e.\u0275\u0275text(1," Reason must be at least 10 characters. "),e.\u0275\u0275elementEnd())}function be(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",33)(1,"h5",34),e.\u0275\u0275text(2,"Reject Credit Card"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",35),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",36)(5,"div",37)(6,"div",2)(7,"div",38)(8,"div",39)(9,"label",40),e.\u0275\u0275text(10,"Rejected Credit Limit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"select",41)(12,"option",42),e.\u0275\u0275text(13,"Rejected"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"option",43),e.\u0275\u0275text(15,"Blocked"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",39)(17,"label",44),e.\u0275\u0275text(18,"Reason for Rejection"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"textarea",45),e.\u0275\u0275template(20,fe,2,0,"div",46),e.\u0275\u0275template(21,he,2,0,"div",46),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(22,"div",47)(23,"button",48),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Close click"))}),e.\u0275\u0275text(24,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"button",49),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.rejectCreditCard())}),e.\u0275\u0275text(26,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,a,o,s;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.rejectCCFormGroup),e.\u0275\u0275advance(7),e.\u0275\u0275classProp("is-invalid",(null==(n=t.rejectCCFormGroup.get("status"))?null:n.invalid)&&((null==(n=t.rejectCCFormGroup.get("status"))?null:n.touched)||(null==(n=t.rejectCCFormGroup.get("status"))?null:n.dirty))),e.\u0275\u0275advance(8),e.\u0275\u0275classProp("is-invalid",(null==(a=t.rejectCCFormGroup.get("reason"))?null:a.invalid)&&((null==(a=t.rejectCCFormGroup.get("reason"))?null:a.touched)||(null==(a=t.rejectCCFormGroup.get("reason"))?null:a.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.rejectCCFormGroup.get("reason"))||null==o.errors?null:o.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(s=t.rejectCCFormGroup.get("reason"))||null==s.errors?null:s.errors.minlength),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!t.rejectCCFormGroup.valid)}}let xe=(()=>{class r{constructor(t,n,a){this.creditCardService=t,this.modalService=n,this.toast=a,this.currentYear=(new Date).getFullYear(),this.ccList=[],this.total=0,this.page=1,this.pageSize=10,this.searchText="",this.cc_selected=null}ngOnInit(){this.breadCrumbItems=[{label:"Credit Management"},{label:"Assigned Card",active:!0}],this.getAssignedCreditCard(),this.rejectCCFormGroup=new l.cw({reason:new l.NI(null,{nonNullable:!0,validators:[l.kI.required,l.kI.minLength(10)]}),status:new l.NI("Rejected",{nonNullable:!0,validators:[l.kI.required]})})}getAssignedCreditCard(){this.creditCardService.getAssignedCreditCard(this.page,this.pageSize,this.searchText).subscribe({next:t=>{this.total=t?.data?.total||0,this.ccList=t?.data?.cc||[],console.log("Assigned Credit Cards:",this.ccList)},error:t=>{console.error("Error fetching requested credit card:",t)}})}rejectCreditCardModal(t,n){this.cc_selected=n,this.modalService.open(t,{backdrop:"static"})}search(t){this.searchText=t,this.page=1,this.getAssignedCreditCard()}rejectCreditCard(){if(this.rejectCCFormGroup.invalid)return void this.toast.error("Please fill all required fields correctly.");const t=this.rejectCCFormGroup.value;console.log("Rejecting credit card with data:",t),this.creditCardService.rejectCreditCard(this.cc_selected._id,t).subscribe({next:n=>{this.toast.success("Credit card rejected successfully."),this.modalService.dismissAll(),this.getAssignedCreditCard()},error:n=>{console.error("Error rejecting credit card:",n),this.toast.error("Failed to reject credit card. Please try again.")}})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getAssignedCreditCard()}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(g),e.\u0275\u0275directiveInject(_.FF),e.\u0275\u0275directiveInject(b._W))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-assigned-card-list"]],decls:29,vars:9,consts:[[1,"container-fluid"],["title","Assigned Cards",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","border-bottom"],[1,"row","mb-0"],[1,"col-sm-4"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","autocomplete","off","id","searchTableList","placeholder","Search...",1,"form-control",3,"keydown.enter"],[1,"bx","bx-search-alt","search-icon"],[1,"card-body"],[1,"table-responsive"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["id","basic-datatable","class","table table-bordered dt-responsive nowrap datatables no-footer dtr-inline",4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["role","document"],["RejectFormModal",""],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mx-1"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Reject",3,"click"],["href","javascript:void(0);",1,"btn","btn-sm","btn-soft-danger"],[1,"mdi","mdi-pencil-outline"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],["novalidate","",3,"formGroup"],[1,"modal-body"],[1,"col-md-12"],[1,"mb-3"],["for","rejected_credit_limit",1,"form-label"],["id","rejected_credit_limit","formControlName","status","required","",1,"form-select"],["value","Rejected"],["value","Blocked"],["for","reason",1,"form-label"],["id","reason","formControlName","reason","rows","3","required","","minlength","10",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","button",1,"btn","btn-primary","waves-effect","waves-light",3,"disabled","click"],[1,"invalid-feedback"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"input",10),e.\u0275\u0275listener("keydown.enter",function(o){return n.search(o.target.value)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"i",11),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(12,"div",12)(13,"div",2)(14,"div",13),e.\u0275\u0275template(15,ue,4,0,"div",14),e.\u0275\u0275template(16,ve,25,1,"table",15),e.\u0275\u0275elementStart(17,"div",16)(18,"div",17)(19,"div",18),e.\u0275\u0275text(20,"Showing "),e.\u0275\u0275elementStart(21,"b"),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",17)(25,"div",19)(26,"ngb-pagination",20),e.\u0275\u0275listener("pageChange",function(o){return n.page=o})("pageChange",function(o){return n.pageChange(o)}),e.\u0275\u0275elementEnd()()()()()()()()()(),e.\u0275\u0275template(27,be,27,8,"ng-template",21,22,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(14),e.\u0275\u0275property("ngIf",0===n.ccList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==n.ccList.length),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((n.page-1)*n.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",n.findPageShowing()," of ",n.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",n.total)("page",n.page)("pageSize",n.pageSize))},dependencies:[d.NgForOf,d.NgIf,C.V,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.Q7,l.wO,l.sg,l.u,_.N9,d.DatePipe]}),r})();function Se(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275element(6,"br"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275element(10,"br"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td")(17,"span"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"td"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td")(23,"ul",31)(24,"li",32),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.approveFundRequest(o._id))}),e.\u0275\u0275elementStart(25,"a",33),e.\u0275\u0275element(26,"i",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"li",35),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.rejectFundRequest(o._id))}),e.\u0275\u0275elementStart(28,"a",36),e.\u0275\u0275element(29,"i",37),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementContainerEnd()}if(2&r){const t=i.$implicit,n=i.index,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((a.page-1)*a.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",null==t.user_details?null:t.user_details.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t.user_details?null:t.user_details.user_id,")"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.card_number," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" Limit: \u20b9 ",t.approved_credit_limit," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.reason),e.\u0275\u0275advance(2),e.\u0275\u0275classMapInterpolate1("badge bg-","Approved"===t.status?"success":"Rejected"===t.status?"danger":"warning",""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.status),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,12,t.created_date))}}let ye=(()=>{class r{constructor(t){this.creditCardService=t,this.fundRequestList=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"Credit Management"},{label:"Request to use amount",active:!0}],this.searchFormGroup=new l.cw({search:new l.NI(""),status:new l.NI("Requested")}),this.getUserFundRequests()}search(){this.page=1,this.getUserFundRequests()}resetSearch(){this.searchFormGroup.reset(),this.page=1,this.getUserFundRequests()}getUserFundRequests(){const t=this.searchFormGroup.value,n=[];Object.keys(t).forEach(o=>{null!==t[o]&&""!==t[o]&&n.push(`${o}=${encodeURIComponent(t[o])}`)});const a=n.join("&");this.creditCardService.getUserFundRequests(this.page,this.pageSize,a).subscribe({next:o=>{this.total=o?.data?.total||0,this.fundRequestList=o?.data?.fundRequests||[]},error:o=>{console.error("Error fetching user fund requests:",o)}})}approveFundRequest(t){u().fire({title:"Are you sure?",text:"You want to approve this fund request?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, approve it!"}).then(n=>{n.isConfirmed&&this.creditCardService.approveUserFundRequest(t).subscribe({next:a=>{u().fire({title:"Approved!",text:"Fund request has been approved successfully.",icon:"success",confirmButtonText:"OK"}).then(()=>{this.getUserFundRequests()})},error:a=>{u().fire({title:"Error!",text:"There was an error approving the fund request.",icon:"error",confirmButtonText:"OK"}),console.error("Error approving fund request:",a)}})})}rejectFundRequest(t){u().fire({title:"Are you sure?",text:"You want to reject this fund request?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, reject it!"}).then(n=>{n.isConfirmed&&this.creditCardService.rejectUserFundRequest(t).subscribe({next:a=>{this.getUserFundRequests()},error:a=>{console.log("Error rejecting fund request:",a)}})})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getUserFundRequests()}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(g))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-user-amount"]],decls:61,vars:9,consts:[[1,"container-fluid"],["title","Fund Request",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"row","g-3"],[1,"col-lg-6"],["type","search","id","searchInput","placeholder","Search for User Id...","formControlName","search",1,"form-control"],[1,"col-lg-3"],["formControlName","status",1,"form-control","select2"],["value",""],["value","Approved"],["value","Requested"],["value","Rejected"],[1,"col-lg-2"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],[1,"col-lg-1"],["href","javascript:void(0);",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],[1,"card-body"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],[1,"list-unstyled","hstack","gap-1","mb-0"],["data-bs-toggle","tooltip","data-bs-placement","top","title","View",3,"click"],[1,"btn","btn-sm","btn-soft-primary"],[1,"mdi","mdi-check-circle-outline"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Edit",3,"click"],["href","javascript:void(0);",1,"btn","btn-sm","btn-soft-danger"],[1,"mdi","mdi-close-circle-outline"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",7)(8,"div",8),e.\u0275\u0275element(9,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",10)(11,"select",11)(12,"option",12),e.\u0275\u0275text(13,"Select Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"option",13),e.\u0275\u0275text(15,"Approved"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"option",14),e.\u0275\u0275text(17,"Requested"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"option",15),e.\u0275\u0275text(19,"Rejected"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"div",16)(21,"button",17),e.\u0275\u0275listener("click",function(){return n.search()}),e.\u0275\u0275element(22,"i",18),e.\u0275\u0275text(23," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",19)(25,"a",20),e.\u0275\u0275listener("click",function(){return n.resetSearch()}),e.\u0275\u0275element(26,"i",21),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(27,"div",22)(28,"div",2)(29,"div",23)(30,"table",24)(31,"thead")(32,"tr")(33,"th"),e.\u0275\u0275text(34,"S.No."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"th"),e.\u0275\u0275text(36,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"th"),e.\u0275\u0275text(38,"Card Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"th"),e.\u0275\u0275text(40,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"th"),e.\u0275\u0275text(42,"Reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"th"),e.\u0275\u0275text(44,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"th"),e.\u0275\u0275text(46,"Requested at"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"th"),e.\u0275\u0275text(48,"Actions"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(49,"tbody"),e.\u0275\u0275template(50,Se,30,14,"ng-container",25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"div",26)(52,"div",27)(53,"div",28),e.\u0275\u0275text(54,"Showing "),e.\u0275\u0275elementStart(55,"b"),e.\u0275\u0275text(56),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(57),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(58,"div",27)(59,"div",29)(60,"ngb-pagination",30),e.\u0275\u0275listener("pageChange",function(o){return n.page=o})("pageChange",function(o){return n.pageChange(o)}),e.\u0275\u0275elementEnd()()()()()()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",n.searchFormGroup),e.\u0275\u0275advance(44),e.\u0275\u0275property("ngForOf",n.fundRequestList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((n.page-1)*n.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",n.findPageShowing()," of ",n.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",n.total)("page",n.page)("pageSize",n.pageSize))},dependencies:[d.NgForOf,C.V,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.sg,l.u,_.N9,d.DatePipe]}),r})();var k=m(8386);function Ee(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"User ID is required."),e.\u0275\u0275elementEnd())}function Ie(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,Ee,2,0,"small",22),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext();let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.payFormGroup.get("user_id"))||null==n.errors?null:n.errors.required)}}function we(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",23)(1,"small")(2,"strong"),e.\u0275\u0275text(3,"Name:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"br"),e.\u0275\u0275elementStart(6,"small")(7,"strong"),e.\u0275\u0275text(8,"Outstanding Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"number"),e.\u0275\u0275elementEnd()()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.userDetails.name,""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" \u20b9",e.\u0275\u0275pipeBind1(10,2,t.totalPayableAmount),"")}}function Fe(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Amount is required."),e.\u0275\u0275elementEnd())}function Te(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Amount must be at least \u20b91."),e.\u0275\u0275elementEnd())}function Ne(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"number"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("Amount can be paid till \u20b9",e.\u0275\u0275pipeBind1(2,1,t.totalPayableAmount),".")}}function qe(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,Fe,2,0,"small",22),e.\u0275\u0275template(2,Te,2,0,"small",22),e.\u0275\u0275template(3,Ne,3,3,"small",22),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext();let n,a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.payFormGroup.get("amount"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.payFormGroup.get("amount"))||null==a.errors?null:a.errors.min),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.payFormGroup.get("amount"))||null==o.errors?null:o.errors.max)}}function Ae(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"option",24),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=i.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function Re(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Payment Method is required."),e.\u0275\u0275elementEnd())}function Ge(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,Re,2,0,"small",22),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext();let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.payFormGroup.get("payment_method"))||null==n.errors?null:n.errors.required)}}function ke(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Transanction Id is required."),e.\u0275\u0275elementEnd())}function Pe(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,ke,2,0,"small",22),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext();let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.payFormGroup.get("transaction_id"))||null==n.errors?null:n.errors.required)}}let je=(()=>{class r{constructor(t,n,a){this.userService=t,this.creditCardService=n,this.toast=a,this.userDetails=null,this.creditCardList=[],this.fundList=[],this.totalPayableAmount=0,this.paymentMethods=["Cash","Bank Transfer","Cash","Cheque"]}ngOnInit(){this.breadCrumbItems=[{label:"Credit Management"},{label:"Payable Amount",active:!0}],this.payFormGroup=new l.cw({user_id:new l.NI("",l.kI.required),card_id:new l.NI("",l.kI.required),transaction_id:new l.NI("",l.kI.required),payment_method:new l.NI("",l.kI.required),amount:new l.NI("",[l.kI.required,l.kI.min(1)])})}getUserDetails(){!this.payFormGroup.value.user_id||this.userService.getBasicUserProfile(this.payFormGroup.value.user_id).subscribe({next:t=>{t.status&&(this.userDetails=t?.data?.user,this.getAllActiveCards(this.userDetails._id))},error:t=>{console.error("Error fetching user details:",t)}})}getAllActiveCards(t){this.creditCardService.getActiveCreditCardsOfUser(t).subscribe({next:n=>{n.status&&(this.creditCardList=n.data.cc,this.creditCardList.length>0&&(this.payFormGroup.get("card_id")?.setValue(this.creditCardList[0]._id),this.getTotalPaybleAmount(this.creditCardList[0])))},error:n=>{console.error("Error fetching active cards:",n)}})}getTotalPaybleAmount(t){t&&t._id?this.creditCardService.getTotalPaybleAmount(t._id).subscribe({next:n=>{n.status&&(this.totalPayableAmount=n.data.outstanding,this.payFormGroup.get("amount")?.setValidators([l.kI.required,l.kI.min(1),l.kI.max(this.totalPayableAmount)]),this.payFormGroup.updateValueAndValidity())},error:n=>{console.error("Error fetching total payable amount:",n)}}):this.totalPayableAmount=0}payCreditCardFees(){if(this.payFormGroup.invalid)return;if(this.payFormGroup.value.amount<=0||this.payFormGroup.value.amount>this.totalPayableAmount)return void this.toast.warning("Please enter a valid amount to pay.");const t={userId:this.userDetails._id,card_id:this.payFormGroup.value.card_id,amount:this.payFormGroup.value.amount};console.log("Payment Payload:",t),this.creditCardService.payCreditCardFees(t).subscribe({next:n=>{n.status?(this.toast.success("Payment successful!"),u().fire({title:"Payment Successful",text:`Your payment of \u20b9${this.payFormGroup.value.amount} has been successfully processed.`,icon:"success",confirmButtonText:"OK"}),this.payFormGroup.reset(),this.totalPayableAmount=0):this.toast.error("Payment failed. Please try again.")},error:n=>{console.error("Error processing payment:",n),this.toast.error("An error occurred while processing the payment."),u().fire({title:"Payment Failed",text:"There was an error processing your payment. Please try again later.",icon:"error",confirmButtonText:"OK"})}})}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(k.i),e.\u0275\u0275directiveInject(g),e.\u0275\u0275directiveInject(b._W))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-payble-amount"]],decls:32,vars:9,consts:[[1,"container-fluid"],["title","Pay Amount",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-12",3,"formGroup"],[1,"mb-3","col-lg-12"],["for","userId",1,"form-label"],["type","text","id","userId","formControlName","user_id","placeholder","Enter user ID",1,"form-control",3,"blur"],["class","text-danger",4,"ngIf"],["class","mt-1",4,"ngIf"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter amount","min","1",1,"form-control"],[1,"mb-3","col-lg-6"],["for","payment_method",1,"form-label"],["id","payment_method","formControlName","payment_method",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],["for","transaction_id",1,"form-label"],["type","text","id","transaction_id","formControlName","transaction_id","placeholder","Enter Transanction Id","min","1",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"text-danger"],[4,"ngIf"],[1,"mt-1"],[3,"ngValue"]],template:function(t,n){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",2)(8,"div",7)(9,"label",8),e.\u0275\u0275text(10,"User ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"input",9),e.\u0275\u0275listener("blur",function(){return n.getUserDetails()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,Ie,2,1,"div",10),e.\u0275\u0275template(13,we,11,4,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",7)(15,"label",12),e.\u0275\u0275text(16,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"input",13),e.\u0275\u0275template(18,qe,4,3,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",14)(20,"label",15),e.\u0275\u0275text(21,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"select",16),e.\u0275\u0275template(23,Ae,2,2,"option",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(24,Ge,2,1,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",14)(26,"label",18),e.\u0275\u0275text(27,"Transanction Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(28,"input",19),e.\u0275\u0275template(29,Pe,2,1,"div",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"button",20),e.\u0275\u0275listener("click",function(){return n.payCreditCardFees()}),e.\u0275\u0275text(31,"Submit"),e.\u0275\u0275elementEnd()()()()()()()),2&t){let a,o,s,p;e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",n.payFormGroup),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==(a=n.payFormGroup.get("user_id"))?null:a.touched)&&(null==(a=n.payFormGroup.get("user_id"))?null:a.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.userDetails),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(o=n.payFormGroup.get("amount"))?null:o.touched)&&(null==(o=n.payFormGroup.get("amount"))?null:o.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.paymentMethods),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(s=n.payFormGroup.get("payment_method"))?null:s.touched)&&(null==(s=n.payFormGroup.get("payment_method"))?null:s.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(p=n.payFormGroup.get("transaction_id"))?null:p.touched)&&(null==(p=n.payFormGroup.get("transaction_id"))?null:p.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",n.payFormGroup.invalid)}},dependencies:[d.NgForOf,d.NgIf,C.V,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.qQ,l.sg,l.u,d.DecimalPipe]}),r})();function Le(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275element(1,"img",24),e.\u0275\u0275elementStart(2,"p",25),e.\u0275\u0275text(3,"No Transanction found."),e.\u0275\u0275elementEnd()())}function Ve(r,i){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"date"),e.\u0275\u0275element(7,"br"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275element(10,"br"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td")(15,"span",35),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"titlecase"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"td"),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&r){const t=i.$implicit,n=i.index,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((a.page-1)*a.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(6,9,t.createdAt,"medium")," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",null==t||null==t.user_details?null:t.user_details.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t||null==t.user_details?null:t.user_details.user_id,")"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.card_number),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass","expected"===t.type?"bg-primary":"bg-success"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,12,t.type)," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.description)}}function $e(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",26)(1,"table",27)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"S.No."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th",28),e.\u0275\u0275text(7,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Card Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Description"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"tbody"),e.\u0275\u0275template(19,Ve,22,14,"ng-container",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",30)(21,"div",31)(22,"div",32),e.\u0275\u0275text(23,"Showing "),e.\u0275\u0275elementStart(24,"b"),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",31)(28,"div",33)(29,"ngb-pagination",34),e.\u0275\u0275listener("pageChange",function(a){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.page=a)})("pageChange",function(a){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.pageChange(a))}),e.\u0275\u0275elementEnd()()()()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(19),e.\u0275\u0275property("ngForOf",t.transactionList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)("maxSize",2)("ellipses",!0)}}let De=(()=>{class r{constructor(t){this.creditCardService=t,this.transactionList=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"Credit Management"},{label:"Admin transanctions",active:!0}],this.getAdminTransactionList()}getAdminTransactionList(){this.creditCardService.getAdminCreditCardTransactions(this.page,this.pageSize).subscribe({next:t=>{this.transactionList=t.data.transactions,console.log("Transaction List:",this.transactionList),this.total=t.data.total},error:t=>{console.error("Error fetching transaction list:",t)}})}pageChange(t){this.page=t,this.getAdminTransactionList()}findPageShowing(){return(this.page-1)*this.pageSize+1}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(g))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-all-transanction"]],decls:28,vars:3,consts:[[1,"container-fluid"],["title","All Transanction",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","border-bottom"],[1,"row","g-3"],[1,"col-lg-6"],["type","search","id","searchInput","placeholder","Search for User Id...",1,"form-control"],[1,"col-lg-3"],[1,"form-control","select2"],["value",""],["value","Withdrawal"],["value","Deposit"],[1,"col-lg-2"],["type","button",1,"btn","btn-soft-secondary","w-100"],[1,"mdi","mdi-filter-outline","align-middle"],[1,"col-lg-1"],["href","javascript:void(0);",1,"btn","btn-light"],[1,"mdi","mdi-refresh"],[1,"card-body"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[2,"width","20%"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","maxSize","ellipses","pageChange"],[1,"badge",3,"ngClass"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e.\u0275\u0275element(8,"input",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",9)(10,"select",10)(11,"option",11),e.\u0275\u0275text(12,"Select Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"option",12),e.\u0275\u0275text(14,"Withdrawal"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"option",13),e.\u0275\u0275text(16,"Deposit"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",14)(18,"button",15),e.\u0275\u0275element(19,"i",16),e.\u0275\u0275text(20," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",17)(22,"a",18),e.\u0275\u0275element(23,"i",19),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(24,"div",20)(25,"div",2),e.\u0275\u0275template(26,Le,4,0,"div",21),e.\u0275\u0275template(27,$e,30,9,"div",22),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(25),e.\u0275\u0275property("ngIf",!n.transactionList||0===n.transactionList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.transactionList&&n.transactionList.length>0))},dependencies:[d.NgClass,d.NgForOf,d.NgIf,C.V,l.YN,l.Kr,_.N9,d.TitleCasePipe,d.DatePipe]}),r})();var ze=m(3089);function Me(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275element(1,"img",23),e.\u0275\u0275elementStart(2,"p",24),e.\u0275\u0275text(3,"No Card Number found."),e.\u0275\u0275elementEnd()())}function Ue(r,i){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275elementContainerEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.assigned_user.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",t.assigned_user.user_id,") ")}}function Be(r,i){1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementContainerEnd())}function Oe(r,i){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementContainerEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.assigned_on)," ")}}function Ye(r,i){1&r&&e.\u0275\u0275text(0,"-")}const Je=function(r,i){return{"badge-soft-success":r,"badge-soft-danger":i}};function Ke(r,i){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td")(7,"span",33),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275template(10,Ue,4,2,"ng-container",34),e.\u0275\u0275template(11,Be,2,0,"ng-container",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275template(13,Oe,3,3,"ng-container",35),e.\u0275\u0275template(14,Ye,1,0,"ng-template",null,36,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&r){const t=i.$implicit,n=i.index,a=e.\u0275\u0275reference(15),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((o.page-1)*o.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.card_number),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(8,Je,t.status,!t.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.status?"Active":"InActive"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.assigned_user),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.assigned_user),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.assigned_on)("ngIfElse",a)}}function We(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",25)(1,"table",26)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"S.No."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"Card Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Assigned To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Assigned On"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(14,"tbody"),e.\u0275\u0275template(15,Ke,16,11,"ng-container",27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",28)(17,"div",29)(18,"div",30),e.\u0275\u0275text(19,"Showing "),e.\u0275\u0275elementStart(20,"b"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",29)(24,"div",31)(25,"ngb-pagination",32),e.\u0275\u0275listener("pageChange",function(a){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.page=a)})("pageChange",function(a){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.pageChange(a))}),e.\u0275\u0275elementEnd()()()()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(15),e.\u0275\u0275property("ngForOf",t.pinList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}function Qe(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",56),e.\u0275\u0275text(1," Please select number of pins. "),e.\u0275\u0275elementEnd())}function Xe(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"h5",38),e.\u0275\u0275text(2,"Add Pins"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",39),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",40)(5,"div",41)(6,"div",42)(7,"label",43),e.\u0275\u0275text(8,"No of Pins to Create"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"select",44)(10,"option",45),e.\u0275\u0275text(11,"Choose..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"option",46),e.\u0275\u0275text(13,"5"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"option",47),e.\u0275\u0275text(15,"10"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"option",48),e.\u0275\u0275text(17,"20"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"option",49),e.\u0275\u0275text(19,"25"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"option",50),e.\u0275\u0275text(21,"50"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"option",51),e.\u0275\u0275text(23,"100"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(24,Qe,2,0,"div",52),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",53)(26,"button",54),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Close click"))}),e.\u0275\u0275text(27,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"button",55),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.createPins())}),e.\u0275\u0275text(29,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.addPinFormGroup),e.\u0275\u0275advance(20),e.\u0275\u0275property("ngIf",(null==(n=t.addPinFormGroup.get("no_of_pins"))?null:n.touched)&&(null==(n=t.addPinFormGroup.get("no_of_pins"))?null:n.hasError("required"))),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.addPinFormGroup.invalid)}}function He(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",60)(1,"small")(2,"strong"),e.\u0275\u0275text(3,"Name:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"br"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.userDetails.name,"")}}function Ze(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",56),e.\u0275\u0275text(1," Assigned To is required. "),e.\u0275\u0275elementEnd())}function et(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",56),e.\u0275\u0275text(1," User not found. Please enter a valid User ID. "),e.\u0275\u0275elementEnd())}function tt(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"h5",38),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",39),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",40)(5,"div",41)(6,"div",42)(7,"label",57),e.\u0275\u0275text(8,"Assigned To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",58),e.\u0275\u0275listener("blur",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.getUserDetails())})("ngModelChange",function(a){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.userIDText=a)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,He,6,1,"div",59),e.\u0275\u0275template(11,Ze,2,0,"div",52),e.\u0275\u0275template(12,et,2,0,"div",52),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",53)(14,"button",54),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(o.close("Close click"))}),e.\u0275\u0275text(15,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",55),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.assignPins())}),e.\u0275\u0275text(17,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,a;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Assign Pins (No of Pin Selected : ",t.pinSelected.length,") "),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t.assignFormGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",t.userIDText),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.userDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(n=t.assignFormGroup.get("assign_to"))?null:n.touched)&&(null==(n=t.assignFormGroup.get("assign_to"))||null==n.errors?null:n.errors.required)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(a=t.assignFormGroup.get("assign_to"))?null:a.touched)&&(null==(a=t.assignFormGroup.get("assign_to"))||null==a.errors?null:a.errors.userNotFound)),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.assignFormGroup.invalid)}}const nt=[{path:"list",component:(()=>{class r{constructor(t,n,a,o,s){this.modalService=t,this.toast=n,this.creditCardService=a,this.userService=o,this.pinService=s,this.searchTerm="",this.userIDText="",this.userDetails=null,this.pinList=[],this.total=0,this.page=1,this.pageSize=10,this.userList=[],this.pinSelected=[]}ngOnInit(){this.breadCrumbItems=[{label:"Card List Management"},{label:"Manage",active:!0}],this.addPinFormGroup=new l.cw({no_of_pins:new l.NI("",l.kI.required)}),this.assignFormGroup=new l.cw({assign_to:new l.NI("",l.kI.required)}),this.getPins()}getUserDetails(){this.userIDText?this.userService.getBasicUserProfile(this.userIDText).subscribe({next:t=>{t.status&&(this.userDetails=t?.data?.user,this.userDetails||this.assignFormGroup.get("assign_to")?.setErrors({userNotFound:!0}))},error:t=>{console.error("Error fetching user details:",t)}}):this.userDetails=null}openModal(t){this.modalService.open(t)}getPins(){this.creditCardService.getCreditCardNumberList(this.page,this.pageSize,this.searchTerm).subscribe(t=>{t&&t.data?(this.pinList=t?.data?.cardNumbers||[],this.total=t?.data?.total||0):this.pinList=[]},t=>{console.error("Error fetching pin list:",t),this.pinList=[]})}onSearch(t){this.searchTerm=t.target.value.toLowerCase(),this.page=1,this.getPins()}pinChecked(t){t.target.checked?this.pinSelected.push(t.target.value):this.pinSelected=this.pinSelected.filter(n=>n!==t.target.value),console.log("Selected Pins:",this.pinSelected)}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getPins()}createPins(){this.addPinFormGroup.invalid?this.toast.error("Please fill all required fields"):this.creditCardService.generateCreditCardNumber(this.addPinFormGroup.value.no_of_pins).subscribe({next:t=>{this.toast.success("Sahyog Card no created successfully"),this.addPinFormGroup.reset(),this.getPins(),this.modalService.dismissAll()},error:t=>{this.toast.error("Failed to create pins")}})}assignPins(){this.assignFormGroup.invalid||0===this.pinSelected.length?this.toast.error("Please select pins and assign to a user"):this.pinService.assignPins({assign_to:this.userDetails?._id,pins:this.pinSelected}).subscribe({next:n=>{this.toast.success("Pins assigned successfully"),this.assignFormGroup.reset(),this.pinSelected=[],this.modalService.dismissAll(),this.getPins()},error:n=>{this.toast.error("Failed to assign pins")}})}disablePin(t){u().fire({title:"Are you sure?",text:"You want to disable this pin?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, disable it!"}).then(n=>{n.isConfirmed&&this.pinService.inactivePin(t,{status:"Inactive"}).subscribe({next:a=>{this.getPins(),this.toast.success("Pin disabled successfully"),this.modalService.dismissAll()},error:a=>{this.toast.error("Failed to disable pin")}})})}enablePin(t){u().fire({title:"Are you sure?",text:"You want to enable this pin?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, enable it!"}).then(n=>{n.isConfirmed&&this.pinService.inactivePin(t,{status:"Active"}).subscribe({next:a=>{this.getPins(),this.toast.success("Pin disabled successfully"),this.modalService.dismissAll()},error:a=>{this.toast.error("Failed to disable pin")}})})}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(_.FF),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(g),e.\u0275\u0275directiveInject(k.i),e.\u0275\u0275directiveInject(ze.a))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-card-list"]],decls:25,vars:3,consts:[[1,"container-fluid"],["title","Card List",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","border-bottom"],[1,"row","mb-0"],[1,"col-sm-4"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","autocomplete","off","id","searchTableList","placeholder","Search...",1,"form-control",3,"keydown.enter"],[1,"bx","bx-search-alt","search-icon"],[1,"col-sm-8"],[1,"text-sm-end"],["type","button",1,"btn","btn-success","btn-rounded","mb-2","me-2",3,"click"],[1,"mdi","mdi-plus","mr-1"],[1,"card-body"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],["role","document"],["addPinModal",""],["assignModal",""],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],[1,"badge","font-size-11","m-1",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noDate",""],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"formGroup"],[1,"modal-body"],[1,"mb-3"],["for","noOfPins",1,"form-label"],["id","noOfPins","formControlName","no_of_pins",1,"form-select"],["value",""],["value","5"],["value","10"],["value","20"],["value","25"],["value","50"],["value","100"],["class","text-danger mt-1",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light",3,"disabled","click"],[1,"text-danger","mt-1"],["for","assignedTo",1,"form-label"],["type","text","id","messageTitle","formControlName","assign_to","placeholder","Enter User ID","required","",1,"form-control",3,"ngModel","blur","ngModelChange"],["class","mt-1",4,"ngIf"],[1,"mt-1"]],template:function(t,n){if(1&t){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"input",10),e.\u0275\u0275listener("keydown.enter",function(s){return n.onSearch(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"i",11),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(12,"div",12)(13,"div",13)(14,"button",14),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(a);const s=e.\u0275\u0275reference(22);return e.\u0275\u0275resetView(n.openModal(s))}),e.\u0275\u0275element(15,"i",15),e.\u0275\u0275text(16," Add Card Number "),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(17,"div",16)(18,"div",2),e.\u0275\u0275template(19,Me,4,0,"div",17),e.\u0275\u0275template(20,We,26,7,"div",18),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(21,Xe,30,3,"ng-template",19,20,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(23,tt,18,7,"ng-template",19,21,e.\u0275\u0275templateRefExtractor)}2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(18),e.\u0275\u0275property("ngIf",!n.pinList||0===n.pinList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==n.pinList.length))},dependencies:[d.NgClass,d.NgForOf,d.NgIf,C.V,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.Q7,l.sg,l.u,_.N9,d.DatePipe]}),r})()},{path:"request",component:pe},{path:"assigned-card-list",component:xe},{path:"request-amount",component:ye},{path:"payable-amount",component:je},{path:"all-transanction",component:De}];let rt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[G.Bz.forChild(nt),G.Bz]}),r})();var at=m(9668),lt=m(139);let it=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[d.CommonModule,at.v,lt.A0,rt,l.UX,_.jF]}),r})()}}]);
"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[96],{42096:(R,u,l)=>{l.r(u),l.d(u,{PinManagementModule:()=>Y});var d=l(36895),g=l(59158),o=l(24006),v=l(35226),_=l.n(v),e=l(94650),m=l(84029),x=l(97185),b=l(88386),p=l(92340),S=l(80529);let h=(()=>{class n{constructor(t){this.http=t}getPins(t,i=0,s=10,a=""){return this.http.get(`${p.N.api_url}pins?request=${t}&page=${i}&limit=${s}&search=${a}`)}createPin(t){return this.http.post(`${p.N.api_url}pins`,t)}assignPins(t){return this.http.put(`${p.N.api_url}pins/assignPins`,t)}inactivePin(t,i){return this.http.put(`${p.N.api_url}pins/inactivePin/${t}`,i)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(S.eN))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=l(29234);function C(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275element(1,"img",25),e.\u0275\u0275elementStart(2,"p",26),e.\u0275\u0275text(3,"No pins found."),e.\u0275\u0275elementEnd()())}function P(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext().$implicit,a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.disablePin(s._id))}),e.\u0275\u0275elementStart(1,"a",42),e.\u0275\u0275element(2,"i",43),e.\u0275\u0275elementEnd()()}}function y(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext().$implicit,a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.enablePin(s._id))}),e.\u0275\u0275elementStart(1,"a",44),e.\u0275\u0275element(2,"i",43),e.\u0275\u0275elementEnd()()}}const E=function(n,r,t){return{"badge-soft-primary":n,"badge-soft-success":r,"badge-soft-danger":t}};function w(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td")(3,"div",35)(4,"input",36),e.\u0275\u0275listener("change",function(s){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.pinChecked(s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"label",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td")(11,"span",38),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"td"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td")(17,"ul",39),e.\u0275\u0275template(18,P,3,0,"li",40),e.\u0275\u0275template(19,y,3,0,"li",40),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=r.$implicit,i=r.index,s=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.pin),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((s.page-1)*s.pageSize+i+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.pin),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(10,E,"Active"===t.status,"Assigned"===t.status,"Inactive"===t.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.status),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,8,t.created_date)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf","Active"===t.status),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Inactive"===t.status)}}function I(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",27)(1,"table",28)(2,"thead")(3,"tr"),e.\u0275\u0275element(4,"th"),e.\u0275\u0275elementStart(5,"th"),e.\u0275\u0275text(6,"S.No."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th"),e.\u0275\u0275text(8,"Pin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"th"),e.\u0275\u0275text(10,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"th"),e.\u0275\u0275text(12,"Generated On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th"),e.\u0275\u0275text(14,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"tbody"),e.\u0275\u0275template(16,w,20,14,"ng-container",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"div",30)(18,"div",31)(19,"div",32),e.\u0275\u0275text(20,"Showing "),e.\u0275\u0275elementStart(21,"b"),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",31)(25,"div",33)(26,"ngb-pagination",34),e.\u0275\u0275listener("pageChange",function(s){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.page=s)})("pageChange",function(s){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.pageChange(s))}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(16),e.\u0275\u0275property("ngForOf",t.pinList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}function A(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",64),e.\u0275\u0275text(1," Please select number of pins. "),e.\u0275\u0275elementEnd())}function T(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",45)(1,"h5",46),e.\u0275\u0275text(2,"Add Pins"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",47),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(a.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",48)(5,"div",49)(6,"div",50)(7,"label",51),e.\u0275\u0275text(8,"No of Pins to Create"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"select",52)(10,"option",53),e.\u0275\u0275text(11,"Choose..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"option",54),e.\u0275\u0275text(13,"5"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"option",55),e.\u0275\u0275text(15,"10"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"option",56),e.\u0275\u0275text(17,"20"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"option",57),e.\u0275\u0275text(19,"25"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"option",58),e.\u0275\u0275text(21,"50"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"option",59),e.\u0275\u0275text(23,"100"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(24,A,2,0,"div",60),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",61)(26,"button",62),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(a.close("Close click"))}),e.\u0275\u0275text(27,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"button",63),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.createPins())}),e.\u0275\u0275text(29,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext();let i;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.addPinFormGroup),e.\u0275\u0275advance(20),e.\u0275\u0275property("ngIf",(null==(i=t.addPinFormGroup.get("no_of_pins"))?null:i.touched)&&(null==(i=t.addPinFormGroup.get("no_of_pins"))?null:i.hasError("required"))),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.addPinFormGroup.invalid)}}function k(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",68)(1,"small")(2,"strong"),e.\u0275\u0275text(3,"Name:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"br"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.userDetails.name,"")}}function V(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",64),e.\u0275\u0275text(1," Assigned To is required. "),e.\u0275\u0275elementEnd())}function F(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",64),e.\u0275\u0275text(1," User not found. Please enter a valid User ID. "),e.\u0275\u0275elementEnd())}function M(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",45)(1,"h5",46),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",47),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(a.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",48)(5,"div",49)(6,"div",50)(7,"label",65),e.\u0275\u0275text(8,"Assigned To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",66),e.\u0275\u0275listener("blur",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.getUserDetails())})("ngModelChange",function(s){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.userIDText=s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,k,6,1,"div",67),e.\u0275\u0275template(11,V,2,0,"div",60),e.\u0275\u0275template(12,F,2,0,"div",60),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",61)(14,"button",62),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(a.close("Close click"))}),e.\u0275\u0275text(15,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",63),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.assignPins())}),e.\u0275\u0275text(17,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext();let i,s;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Assign Pins (No of Pin Selected : ",t.pinSelected.length,") "),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t.assignFormGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",t.userIDText),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.userDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(i=t.assignFormGroup.get("assign_to"))?null:i.touched)&&(null==(i=t.assignFormGroup.get("assign_to"))||null==i.errors?null:i.errors.required)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(s=t.assignFormGroup.get("assign_to"))?null:s.touched)&&(null==(s=t.assignFormGroup.get("assign_to"))||null==s.errors?null:s.errors.userNotFound)),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.assignFormGroup.invalid)}}function L(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275element(1,"img",16),e.\u0275\u0275elementStart(2,"p",17),e.\u0275\u0275text(3,"No assigned pin found."),e.\u0275\u0275elementEnd()())}function z(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",null==t.used_by_user[0]?null:t.used_by_user[0].name," (",null==t.used_by_user[0]?null:t.used_by_user[0].user_id,")")}}function D(n,r){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}const G=function(n,r,t){return{"bg-success":n,"bg-danger":r,"bg-info":t}};function j(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275template(12,z,2,2,"span",26),e.\u0275\u0275template(13,D,2,0,"span",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td")(18,"span",27),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=r.$implicit,i=r.index,s=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((s.page-1)*s.pageSize+i+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",null==t.assigned_user[0]?null:t.assigned_user[0].name," (",null==t.assigned_user[0]?null:t.assigned_user[0].user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,10,t.assigned_on)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.pin),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==t.used_by_user[0]?null:t.used_by_user[0].name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=t.used_by_user[0]&&t.used_by_user[0].name)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.used_on?e.\u0275\u0275pipeBind1(16,12,t.used_on):"-"),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(14,G,"Assigned"===t.status,"Inactive"===t.status,"Active"===t.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.status)}}function $(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",18)(1,"table",19)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"S.No."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"Assigned To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Assigned On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Pin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Used By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Used On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Status"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"tbody"),e.\u0275\u0275template(19,j,20,18,"ng-container",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",21)(21,"div",22)(22,"div",23),e.\u0275\u0275text(23,"Showing "),e.\u0275\u0275elementStart(24,"b"),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",22)(28,"div",24)(29,"ngb-pagination",25),e.\u0275\u0275listener("pageChange",function(s){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.page=s)})("pageChange",function(s){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.pageChange(s))}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(19),e.\u0275\u0275property("ngForOf",t.pinList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}const B=[{path:"add",component:(()=>{class n{constructor(t,i,s,a){this.modalService=t,this.toast=i,this.userService=s,this.pinService=a,this.searchTerm="",this.userIDText="",this.userDetails=null,this.pinList=[],this.total=0,this.page=1,this.pageSize=10,this.userList=[],this.pinSelected=[]}ngOnInit(){this.breadCrumbItems=[{label:"Pin Management"},{label:"Add Pins",active:!0}],this.addPinFormGroup=new o.cw({assign_to:new o.NI(""),no_of_pins:new o.NI("",o.kI.required)}),this.getAllUsers(),this.assignFormGroup=new o.cw({assign_to:new o.NI("",o.kI.required)}),this.getPins("unassigned")}getUserDetails(){console.log("User ID:",this.userIDText),this.userIDText?this.userService.getBasicUserProfile(this.userIDText).subscribe({next:t=>{t.status&&(this.userDetails=t?.data?.user,this.userDetails||this.assignFormGroup.get("assign_to")?.setErrors({userNotFound:!0}))},error:t=>{console.error("Error fetching user details:",t)}}):this.userDetails=null}getAllUsers(){this.userService.getAllUserIds().subscribe(t=>{t&&t.data&&(this.userList=t.data.users)})}openModal(t){this.modalService.open(t)}getPins(t){this.pinService.getPins(t,this.page,this.pageSize,this.searchTerm).subscribe(i=>{i&&i.data?(this.pinList=i?.data?.pins||[],this.total=i?.data?.total||0):this.pinList=[]},i=>{console.error("Error fetching pin list:",i),this.pinList=[]})}onSearch(t){this.searchTerm=t.target.value.toLowerCase(),this.page=1,this.getPins("unassigned")}pinChecked(t){t.target.checked?this.pinSelected.push(t.target.value):this.pinSelected=this.pinSelected.filter(i=>i!==t.target.value),console.log("Selected Pins:",this.pinSelected)}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getPins("unassigned")}createPins(){this.addPinFormGroup.invalid?this.toast.error("Please fill all required fields"):this.pinService.createPin(this.addPinFormGroup.value).subscribe({next:t=>{this.toast.success("Pins created successfully"),this.addPinFormGroup.reset(),this.getPins("unassigned"),this.modalService.dismissAll()},error:t=>{this.toast.error("Failed to create pins")}})}assignPins(){this.assignFormGroup.invalid||0===this.pinSelected.length?this.toast.error("Please select pins and assign to a user"):this.pinService.assignPins({assign_to:this.userDetails?._id,pins:this.pinSelected}).subscribe({next:i=>{this.toast.success("Pins assigned successfully"),this.assignFormGroup.reset(),this.pinSelected=[],this.modalService.dismissAll(),this.getPins("unassigned")},error:i=>{this.toast.error("Failed to assign pins")}})}disablePin(t){_().fire({title:"Are you sure?",text:"You want to disable this pin?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, disable it!"}).then(i=>{i.isConfirmed&&this.pinService.inactivePin(t,{status:"Inactive"}).subscribe({next:s=>{this.getPins("unassigned"),this.toast.success("Pin disabled successfully"),this.modalService.dismissAll()},error:s=>{this.toast.error("Failed to disable pin")}})})}enablePin(t){_().fire({title:"Are you sure?",text:"You want to enable this pin?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, enable it!"}).then(i=>{i.isConfirmed&&this.pinService.inactivePin(t,{status:"Active"}).subscribe({next:s=>{this.getPins("unassigned"),this.toast.success("Pin disabled successfully"),this.modalService.dismissAll()},error:s=>{this.toast.error("Failed to disable pin")}})})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(m.FF),e.\u0275\u0275directiveInject(x._W),e.\u0275\u0275directiveInject(b.i),e.\u0275\u0275directiveInject(h))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-add-pins"]],decls:28,vars:4,consts:[[1,"container-fluid"],["title","Add Pins",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","border-bottom"],[1,"row","mb-0"],[1,"col-sm-4"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","autocomplete","off","id","searchTableList","placeholder","Search...",1,"form-control",3,"keydown.enter"],[1,"bx","bx-search-alt","search-icon"],[1,"col-sm-8"],[1,"text-sm-end"],["type","button",1,"btn","btn-success","btn-rounded","mb-2","me-2",3,"click"],[1,"mdi","mdi-plus","mr-1"],["type","button",1,"btn","btn-light","btn-rounded","mb-2","me-2",3,"disabled","click"],[1,"bx","bx-user","mr-1"],[1,"card-body"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],["role","document"],["addPinModal",""],["assignModal",""],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],[1,"form-check","font-size-16"],["type","checkbox",1,"form-check-input",3,"value","change"],["for","transactionCheck1",1,"form-check-label"],[3,"ngClass"],[1,"list-unstyled","hstack","gap-1","mb-0"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Delete",3,"click",4,"ngIf"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Delete",3,"click"],["href","javascript:void(0);","data-bs-toggle","modal",1,"btn","btn-sm","btn-soft-danger"],[1,"mdi","mdi-book-edit-outline"],["href","javascript:void(0);","data-bs-toggle","modal",1,"btn","btn-sm","btn-soft-primary"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"formGroup"],[1,"modal-body"],[1,"mb-3"],["for","noOfPins",1,"form-label"],["id","noOfPins","formControlName","no_of_pins",1,"form-select"],["value",""],["value","5"],["value","10"],["value","20"],["value","25"],["value","50"],["value","100"],["class","text-danger mt-1",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light",3,"disabled","click"],[1,"text-danger","mt-1"],["for","assignedTo",1,"form-label"],["type","text","id","messageTitle","formControlName","assign_to","placeholder","Enter User ID","required","",1,"form-control",3,"ngModel","blur","ngModelChange"],["class","mt-1",4,"ngIf"],[1,"mt-1"]],template:function(t,i){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"input",10),e.\u0275\u0275listener("keydown.enter",function(c){return i.onSearch(c)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"i",11),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(12,"div",12)(13,"div",13)(14,"button",14),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(s);const c=e.\u0275\u0275reference(25);return e.\u0275\u0275resetView(i.openModal(c))}),e.\u0275\u0275element(15,"i",15),e.\u0275\u0275text(16," Add Pins "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",16),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(s);const c=e.\u0275\u0275reference(27);return e.\u0275\u0275resetView(i.openModal(c))}),e.\u0275\u0275element(18,"i",17),e.\u0275\u0275text(19," Assigned To "),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(20,"div",18)(21,"div",2),e.\u0275\u0275template(22,C,4,0,"div",19),e.\u0275\u0275template(23,I,27,7,"div",20),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(24,T,30,3,"ng-template",21,22,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(26,M,18,7,"ng-template",21,23,e.\u0275\u0275templateRefExtractor)}2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",i.breadCrumbItems),e.\u0275\u0275advance(16),e.\u0275\u0275property("disabled",0==i.pinSelected.length),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!i.pinList||0===i.pinList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==i.pinList.length))},dependencies:[d.NgClass,d.NgForOf,d.NgIf,f.V,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.Q7,o.sg,o.u,m.N9,d.DatePipe]}),n})()},{path:"list",component:(()=>{class n{constructor(t){this.pinService=t,this.pinList=[],this.total=0,this.page=1,this.pageSize=10,this.searchTerm=""}ngOnInit(){this.breadCrumbItems=[{label:"Pin Management"},{label:"Assigned Pins",active:!0}],this.getPins("assigned")}onSearch(t){this.searchTerm=t.target.value.toLowerCase(),this.page=1,this.getPins("assigned")}getPins(t){this.pinService.getPins(t,this.page,this.pageSize,this.searchTerm).subscribe(i=>{i&&i.data?(this.pinList=i?.data?.pins||[],this.total=i?.data?.total||0):this.pinList=[]},i=>{console.error("Error fetching pin list:",i),this.pinList=[]})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getPins("assigned")}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(h))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-assigned-pins"]],decls:16,vars:3,consts:[[1,"container-fluid"],["title","Assigned Pins",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","border-bottom"],[1,"row","mb-0"],[1,"col-sm-4"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","autocomplete","off","id","searchTableList","placeholder","Search...",1,"form-control",3,"keydown.enter"],[1,"bx","bx-search-alt","search-icon"],[1,"card-body"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],[4,"ngIf"],[1,"badge",3,"ngClass"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"input",10),e.\u0275\u0275listener("keydown.enter",function(a){return i.onSearch(a)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"i",11),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(12,"div",12)(13,"div",2),e.\u0275\u0275template(14,L,4,0,"div",13),e.\u0275\u0275template(15,$,30,7,"div",14),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",i.breadCrumbItems),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngIf",!i.pinList||0===i.pinList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==i.pinList.length))},dependencies:[d.NgClass,d.NgForOf,d.NgIf,f.V,m.N9,d.DatePipe]}),n})()}];let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[g.Bz.forChild(B),g.Bz]}),n})();var U=l(19668);let Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[d.CommonModule,U.v,o.UX,o.u5,m.jF,O]}),n})()}}]);
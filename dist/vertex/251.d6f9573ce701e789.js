"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[251],{8251:(cn,L,u)=>{u.r(L),u.d(L,{CreditCardModule:()=>mn});var c=u(6895),k=u(9158),o=u(4006),q=u(5226),g=u.n(q),e=u(4650),p=u(2340),N=u(529);let v=(()=>{class r{constructor(t){this.http=t}getRequestedCreditCard(t=0,n=10,a=""){return this.http.get(`${p.N.api_url}credit-cards/requested?page=${t}&limit=${n}&search=${a}`)}getAssignedCreditCard(t=0,n=10,a=""){return this.http.get(`${p.N.api_url}credit-cards/assigned?page=${t}&limit=${n}&search=${a}`)}approveCreditCard(t,n){return this.http.post(`${p.N.api_url}credit-cards/approve/${t}`,n)}rejectCreditCard(t,n={}){return this.http.post(`${p.N.api_url}credit-cards/reject/${t}`,n)}getUserFundRequests(t=0,n=10,a){return this.http.get(`${p.N.api_url}credit-cards/getUserFundRequests?page=${t}&limit=${n}&${a}`)}approveUserFundRequest(t,n){return this.http.post(`${p.N.api_url}credit-cards/approveUserFundRequest/${t}`,{amount:n})}rejectUserFundRequest(t){return this.http.get(`${p.N.api_url}credit-cards/rejectUserFundRequest/${t}`)}getAdminCreditCardTransactions(t=0,n=10,a=""){return this.http.get(`${p.N.api_url}credit-cards/getAdminCreditCardTransactions?page=${t}&limit=${n}&search=${a}`)}getUserCreditCardTransactions(t,n=0,a=10,l=""){return this.http.get(`${p.N.api_url}credit-cards/getUserCreditCardTransactions/${t}?page=${n}&limit=${a}&search=${l}`)}getActiveCreditCardsOfUser(t){return this.http.get(`${p.N.api_url}credit-cards/getActiveCreditCardsOfUser/${t}`)}getAllFundRequestsOfCreditCard(t){return this.http.get(`${p.N.api_url}credit-cards/getAllFundRequestsOfCreditCard/${t}`)}getTotalPaybleAmount(t){return this.http.get(`${p.N.api_url}credit-cards/totalPaybleAmount/${t}`)}payCreditCardFees(t){return this.http.post(`${p.N.api_url}credit-cards/payCreditCardFees`,t)}generateCreditCardNumber(t){return this.http.get(`${p.N.api_url}credit-cards/generateCreditCardNumber/${t}`)}getCreditCardNumberList(t=0,n=10,a=""){return this.http.get(`${p.N.api_url}credit-cards/getCreditCardNumberList?page=${t}&limit=${n}`)}exportCardList(t,n){return this.http.get(`${p.N.api_url}credit-cards/export-card-list?startDate=${t}&endDate=${n}`,{responseType:"blob"})}getLatest5CreditCardNumbers(){return this.http.get(`${p.N.api_url}credit-cards/getLatest5CreditCardNumbers`)}increaseCreditCardLimit(t,n){return this.http.post(`${p.N.api_url}credit-cards/increaseCreditCardLimit/${t}`,n)}getPenaltyRemovalRequests(t=0,n=10,a=""){return this.http.get(`${p.N.api_url}credit-cards/penalty-removal-requests?page=${t}&limit=${n}&search=${a}`)}approvePenaltyRemovalRequest(t,n){return this.http.post(`${p.N.api_url}credit-cards/penalty-removal-request/${t}/approve`,{penalty_removed:n})}rejectPenaltyRemovalRequest(t,n){return this.http.post(`${p.N.api_url}credit-cards/penalty-removal-request/${t}/reject`,{admin_response:n})}getCreditLimitHistory(t,n=1,a=10,l=""){return this.http.get(t?`${p.N.api_url}credit-cards/creditLimitHistory/${t}?page=${n}&limit=${a}&search=${l}`:`${p.N.api_url}credit-cards/creditLimitHistory?page=${n}&limit=${a}&search=${l}`)}getAllUsersCreditCardReport(t={}){const n=new URLSearchParams;return Object.keys(t).forEach(a=>{null!=t[a]&&""!==t[a]&&n.append(a,t[a])}),this.http.get(`${p.N.api_url}credit-cards/all-users-report?${n.toString()}`)}getUserComprehensiveReport(t,n){return this.http.get(n?`${p.N.api_url}credit-cards/comprehensive-report/${t}/${n}`:`${p.N.api_url}credit-cards/comprehensive-report/${t}`)}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275inject(N.eN))},r.\u0275prov=e.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var _=u(9061),O=u(9878),S=u(7185),C=u(9234);function G(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275element(1,"img",25),e.\u0275\u0275elementStart(2,"p",26),e.\u0275\u0275text(3,"No request found."),e.\u0275\u0275elementEnd()())}function j(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",null==t||null==t.direct_user?null:t.direct_user.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t||null==t.direct_user?null:t.direct_user.user_id,")")}}function V(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275element(6,"br"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275template(9,j,4,2,"span",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td")(14,"span"),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"td")(17,"span",30),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2),d=e.\u0275\u0275reference(28);return e.\u0275\u0275resetView(s.approveCreditCard(d,l))}),e.\u0275\u0275elementStart(18,"a",31),e.\u0275\u0275element(19,"i",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(20,"span",33),e.\u0275\u0275elementStart(21,"span",34),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2),d=e.\u0275\u0275reference(30);return e.\u0275\u0275resetView(s.rejectCreditCardModal(d,l))}),e.\u0275\u0275elementStart(22,"a",35),e.\u0275\u0275element(23,"i",36),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()}if(2&r){const t=i.$implicit,n=i.index,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((a.page-1)*a.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",null==t||null==t.user?null:t.user.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t||null==t.user?null:t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==t?null:t.direct_user),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,9,t.created_date)),e.\u0275\u0275advance(3),e.\u0275\u0275classMapInterpolate1("badge bg-","Active"===t.status?"success":"Requested"===t.status?"warning":"danger",""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.status," ")}}function U(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"table",27)(1,"thead")(2,"tr")(3,"th"),e.\u0275\u0275text(4,"S.No."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"th"),e.\u0275\u0275text(6,"User Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th"),e.\u0275\u0275text(8,"Parent Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"th"),e.\u0275\u0275text(10,"Reqested At"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"th"),e.\u0275\u0275text(12,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th"),e.\u0275\u0275text(14,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"tbody"),e.\u0275\u0275template(16,V,24,11,"ng-container",28),e.\u0275\u0275elementEnd()()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(16),e.\u0275\u0275property("ngForOf",t.ccList)}}function $(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1," Card number is required. "),e.\u0275\u0275elementEnd())}function D(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1," Card number must be 12 to 16 digits. "),e.\u0275\u0275elementEnd())}function z(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1," Credit limit is required. "),e.\u0275\u0275elementEnd())}function B(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1," Minimum credit limit is 100. "),e.\u0275\u0275elementEnd())}function H(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1," Interest rate is required. "),e.\u0275\u0275elementEnd())}function Y(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1," Interest rate cannot be negative. "),e.\u0275\u0275elementEnd())}function J(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1," Interest rate cannot exceed 100%. "),e.\u0275\u0275elementEnd())}function K(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1," Penalty is required. "),e.\u0275\u0275elementEnd())}function Q(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1," Penalty cannot be negative. "),e.\u0275\u0275elementEnd())}function W(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1," Penalty cannot exceed 100%. "),e.\u0275\u0275elementEnd())}function Z(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1," Start date is required. "),e.\u0275\u0275elementEnd())}function X(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Indirect referral amount is required."),e.\u0275\u0275elementEnd())}function ee(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function te(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",69),e.\u0275\u0275template(1,X,2,0,"small",29),e.\u0275\u0275template(2,ee,2,0,"small",29),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n,a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.approveCCFormGroup.get("franchise_refer_per"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.approveCCFormGroup.get("franchise_refer_per"))||null==a.errors?null:a.errors.min)}}function ne(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Indirect referral amount is required."),e.\u0275\u0275elementEnd())}function re(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function ae(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",69),e.\u0275\u0275template(1,ne,2,0,"small",29),e.\u0275\u0275template(2,re,2,0,"small",29),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n,a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.approveCCFormGroup.get("indirect_refer_per"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.approveCCFormGroup.get("indirect_refer_per"))||null==a.errors?null:a.errors.min)}}function le(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Direct referral % is required."),e.\u0275\u0275elementEnd())}function ie(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function oe(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",69),e.\u0275\u0275template(1,le,2,0,"small",29),e.\u0275\u0275template(2,ie,2,0,"small",29),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);let n,a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.approveCCFormGroup.get("direct_refer_per"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.approveCCFormGroup.get("direct_refer_per"))||null==a.errors?null:a.errors.min)}}function se(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"h5",38),e.\u0275\u0275text(2,"Approve Credit Card"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",39),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",40)(5,"div",41)(6,"div",2)(7,"div",42)(8,"div",43)(9,"label",44),e.\u0275\u0275text(10,"Card Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",45),e.\u0275\u0275template(12,$,2,0,"div",46),e.\u0275\u0275template(13,D,2,0,"div",46),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",43)(15,"label",47),e.\u0275\u0275text(16,"Approved Credit Limit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"input",48),e.\u0275\u0275template(18,z,2,0,"div",46),e.\u0275\u0275template(19,B,2,0,"div",46),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",2)(21,"div",49)(22,"label",50),e.\u0275\u0275text(23,"Interest Rate (%)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"input",51),e.\u0275\u0275template(25,H,2,0,"div",46),e.\u0275\u0275template(26,Y,2,0,"div",46),e.\u0275\u0275template(27,J,2,0,"div",46),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",49)(29,"label",52),e.\u0275\u0275text(30,"Penalty (In Rupees)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(31,"input",53),e.\u0275\u0275template(32,K,2,0,"div",46),e.\u0275\u0275template(33,Q,2,0,"div",46),e.\u0275\u0275template(34,W,2,0,"div",46),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"div",2)(36,"div",54)(37,"label",55),e.\u0275\u0275text(38,"Start Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"input",56),e.\u0275\u0275template(40,Z,2,0,"div",46),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",57)(42,"label",58),e.\u0275\u0275text(43,"Franchise Referral Rupees"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(44,"input",59),e.\u0275\u0275template(45,te,3,2,"div",60),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"div",2)(47,"div",57)(48,"label",61),e.\u0275\u0275text(49,"Indirect Referral Rupees"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(50,"input",62),e.\u0275\u0275template(51,ae,3,2,"div",60),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"div",57)(53,"label",63),e.\u0275\u0275text(54,"Direct Referral Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(55,"input",64),e.\u0275\u0275template(56,oe,3,2,"div",60),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(57,"div",65)(58,"button",66),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Close click"))}),e.\u0275\u0275text(59,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"button",67),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.approveCC())}),e.\u0275\u0275text(61,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,a,l,s,d,f,m,b,w,R,x,T,F,P,h,A,y,E,I;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.approveCCFormGroup),e.\u0275\u0275advance(7),e.\u0275\u0275classProp("is-invalid",(null==(n=t.approveCCFormGroup.get("card_number"))?null:n.invalid)&&((null==(n=t.approveCCFormGroup.get("card_number"))?null:n.touched)||(null==(n=t.approveCCFormGroup.get("card_number"))?null:n.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.approveCCFormGroup.get("card_number"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(l=t.approveCCFormGroup.get("card_number"))||null==l.errors?null:l.errors.pattern),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("is-invalid",(null==(s=t.approveCCFormGroup.get("approved_credit_limit"))?null:s.invalid)&&((null==(s=t.approveCCFormGroup.get("approved_credit_limit"))?null:s.touched)||(null==(s=t.approveCCFormGroup.get("approved_credit_limit"))?null:s.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(d=t.approveCCFormGroup.get("approved_credit_limit"))||null==d.errors?null:d.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(f=t.approveCCFormGroup.get("approved_credit_limit"))||null==f.errors?null:f.errors.min),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("is-invalid",(null==(m=t.approveCCFormGroup.get("interest_rate"))?null:m.invalid)&&((null==(m=t.approveCCFormGroup.get("interest_rate"))?null:m.touched)||(null==(m=t.approveCCFormGroup.get("interest_rate"))?null:m.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(b=t.approveCCFormGroup.get("interest_rate"))||null==b.errors?null:b.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(w=t.approveCCFormGroup.get("interest_rate"))||null==w.errors?null:w.errors.min),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(R=t.approveCCFormGroup.get("interest_rate"))||null==R.errors?null:R.errors.max),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("is-invalid",(null==(x=t.approveCCFormGroup.get("penalty"))?null:x.invalid)&&((null==(x=t.approveCCFormGroup.get("penalty"))?null:x.touched)||(null==(x=t.approveCCFormGroup.get("penalty"))?null:x.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(T=t.approveCCFormGroup.get("penalty"))||null==T.errors?null:T.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(F=t.approveCCFormGroup.get("penalty"))||null==F.errors?null:F.errors.min),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(P=t.approveCCFormGroup.get("penalty"))||null==P.errors?null:P.errors.max),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("is-invalid",(null==(h=t.approveCCFormGroup.get("start_date"))?null:h.invalid)&&((null==(h=t.approveCCFormGroup.get("start_date"))?null:h.touched)||(null==(h=t.approveCCFormGroup.get("start_date"))?null:h.dirty))),e.\u0275\u0275property("min",t.minDate)("max",t.maxDate)("value",t.minDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(A=t.approveCCFormGroup.get("start_date"))||null==A.errors?null:A.errors.required),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(y=t.approveCCFormGroup.get("franchise_refer_per"))?null:y.touched)&&(null==(y=t.approveCCFormGroup.get("franchise_refer_per"))?null:y.invalid)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==(E=t.approveCCFormGroup.get("indirect_refer_per"))?null:E.touched)&&(null==(E=t.approveCCFormGroup.get("indirect_refer_per"))?null:E.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(I=t.approveCCFormGroup.get("direct_refer_per"))?null:I.touched)&&(null==(I=t.approveCCFormGroup.get("direct_refer_per"))?null:I.invalid)),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!t.approveCCFormGroup.valid)}}function de(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1," Reason is required. "),e.\u0275\u0275elementEnd())}function me(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1," Reason must be at least 10 characters. "),e.\u0275\u0275elementEnd())}function ce(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"h5",38),e.\u0275\u0275text(2,"Reject Credit Card"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",39),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",40)(5,"div",41)(6,"div",2)(7,"div",42)(8,"div",43)(9,"label",70),e.\u0275\u0275text(10,"Rejected Credit Limit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"select",71)(12,"option",72),e.\u0275\u0275text(13,"Rejected"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"option",73),e.\u0275\u0275text(15,"Blocked"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",43)(17,"label",74),e.\u0275\u0275text(18,"Reason for Rejection"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"textarea",75),e.\u0275\u0275template(20,de,2,0,"div",46),e.\u0275\u0275template(21,me,2,0,"div",46),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",43),e.\u0275\u0275element(23,"label",76),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(24,"div",65)(25,"button",66),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Close click"))}),e.\u0275\u0275text(26,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"button",67),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.rejectCreditCard())}),e.\u0275\u0275text(28,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,a,l,s;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.rejectCCFormGroup),e.\u0275\u0275advance(7),e.\u0275\u0275classProp("is-invalid",(null==(n=t.rejectCCFormGroup.get("status"))?null:n.invalid)&&((null==(n=t.rejectCCFormGroup.get("status"))?null:n.touched)||(null==(n=t.rejectCCFormGroup.get("status"))?null:n.dirty))),e.\u0275\u0275advance(8),e.\u0275\u0275classProp("is-invalid",(null==(a=t.rejectCCFormGroup.get("reason"))?null:a.invalid)&&((null==(a=t.rejectCCFormGroup.get("reason"))?null:a.touched)||(null==(a=t.rejectCCFormGroup.get("reason"))?null:a.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(l=t.rejectCCFormGroup.get("reason"))||null==l.errors?null:l.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(s=t.rejectCCFormGroup.get("reason"))||null==s.errors?null:s.errors.minlength),e.\u0275\u0275advance(6),e.\u0275\u0275property("disabled",!t.rejectCCFormGroup.valid)}}let pe=(()=>{class r{constructor(t,n,a,l){this.creditCardService=t,this.modalService=n,this.settingsService=a,this.toast=l,this.ccList=[],this.total=0,this.page=1,this.pageSize=10,this.searchText="",this.cc_selected=null,this.cardList=[]}ngOnInit(){this.breadCrumbItems=[{label:"Credit Management"},{label:"Request for new card",active:!0}],this.getRequestedCreditCard();const t=new Date,n=new Date(t);n.setDate(t.getDate()+1),this.minDate=n.toISOString().split("T")[0];const a=new Date(t);a.setDate(t.getDate()+5),this.maxDate=a.toISOString().split("T")[0],this.approveCCFormGroup=new o.cw({card_number:new o.NI("",{nonNullable:!0,validators:[o.kI.required,o.kI.pattern(/^\d{16}$/)]}),approved_credit_limit:new o.NI({value:"1200",disabled:!0},{nonNullable:!0,validators:[o.kI.required,o.kI.min(100)]}),interest_rate:new o.NI(null,{nonNullable:!0,validators:[o.kI.required,o.kI.min(0),o.kI.max(100)]}),penalty:new o.NI(null,{nonNullable:!0,validators:[o.kI.min(0),o.kI.max(100)]}),start_date:new o.NI(null,{nonNullable:!0,validators:[o.kI.required]}),indirect_refer_per:new o.NI(null,{nonNullable:!0,validators:[o.kI.required,o.kI.min(0),o.kI.max(100)]}),direct_refer_per:new o.NI(null,{nonNullable:!0,validators:[o.kI.required,o.kI.min(0),o.kI.max(100)]}),franchise_refer_per:new o.NI(null,{nonNullable:!0,validators:[o.kI.required,o.kI.min(0),o.kI.max(100)]})}),this.settingsService.getGeneralSettings$().subscribe(l=>{l&&this.approveCCFormGroup.patchValue({penalty:l.sahyog_penalty||0,interest_rate:l.sahyog_card_rate||0,indirect_refer_per:l.credit_indirect_rs||0,direct_refer_per:l.credit_direct_rs||0,franchise_refer_per:l.credit_francise_rs||0})}),this.rejectCCFormGroup=new o.cw({reason:new o.NI(null,{nonNullable:!0,validators:[o.kI.required,o.kI.minLength(10)]}),status:new o.NI("Rejected",{nonNullable:!0,validators:[o.kI.required]})})}getRequestedCreditCard(){this.creditCardService.getRequestedCreditCard(this.page,this.pageSize,this.searchText).subscribe({next:t=>{this.total=t?.data?.total||0,this.ccList=t?.data?.cc||[]},error:t=>{console.error("Error fetching requested credit card:",t)}})}approveCC(){if(this.approveCCFormGroup.invalid)return void this.toast.error("Please fill all required fields correctly.");const t=this.approveCCFormGroup.value,n=new Date(t.start_date),a=new Date;if(a.setHours(0,0,0,0),n<=a)return void this.toast.error("Start date must be a future date.");const l={_id:this.cc_selected._id,approved_credit_limit:1200,interest_rate:t.interest_rate,start_date:t.start_date,card_number:t.card_number,franchise_refer_per:t.franchise_refer_per,penalty:t.penalty,indirect_refer_per:t.indirect_refer_per,direct_refer_per:t.direct_refer_per};this.creditCardService.approveCreditCard(l._id,l).subscribe({next:s=>{this.toast.success("Credit card approved successfully."),g().fire({title:"Credit Card Approved",text:`Credit card has been approved with a limit of \u20b9${l.approved_credit_limit}.`,icon:"success",confirmButtonText:"OK"}),this.approveCCFormGroup.reset(),this.modalService.dismissAll(),this.getRequestedCreditCard(),this.settingsService.getGeneralSettings$().subscribe(d=>{d&&this.approveCCFormGroup.patchValue({penalty:d.sahyog_penalty||0,interest_rate:d.sahyog_card_rate||0,indirect_refer_per:d.credit_indirect_rs||0,direct_refer_per:d.credit_direct_rs||0,franchise_refer_per:d.credit_francise_rs||0})})},error:s=>{console.error("Error approving credit card:",s),this.toast.error("Failed to approve credit card. Please try again."),g().fire({title:"Approval Failed",text:"There was an error approving the credit card. Please try again later.",icon:"error",confirmButtonText:"OK"})}})}approveCreditCard(t,n){this.cc_selected=n,this.approveCCFormGroup.patchValue({card_number:n.card_number,approved_credit_limit:1200}),this.modalService.open(t,{backdrop:"static"})}rejectCreditCardModal(t,n){this.cc_selected=n,this.modalService.open(t,{backdrop:"static"})}search(t){this.searchText=t,this.page=1,this.getRequestedCreditCard()}rejectCreditCard(){if(this.rejectCCFormGroup.invalid)return void this.toast.error("Please fill all required fields correctly.");const t=this.rejectCCFormGroup.value;console.log("Rejecting credit card with data:",t),this.creditCardService.rejectCreditCard(this.cc_selected._id,t).subscribe({next:n=>{this.toast.success("Credit card rejected successfully."),this.modalService.dismissAll(),this.getRequestedCreditCard()},error:n=>{console.error("Error rejecting credit card:",n),this.toast.error("Failed to reject credit card. Please try again.")}})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getRequestedCreditCard()}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(v),e.\u0275\u0275directiveInject(_.FF),e.\u0275\u0275directiveInject(O.g),e.\u0275\u0275directiveInject(S._W))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-request-new-card"]],decls:31,vars:9,consts:[[1,"container-fluid"],["title","Request for new Card",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","border-bottom"],[1,"row","mb-0"],[1,"col-sm-4"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","autocomplete","off","id","searchTableList","placeholder","Search...",1,"form-control",3,"keydown.enter"],[1,"bx","bx-search-alt","search-icon"],[1,"card-body"],[1,"table-responsive"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["id","basic-datatable","class","table table-bordered dt-responsive nowrap datatables no-footer dtr-inline",4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["role","document"],["ApproveFormModal",""],["RejectFormModal",""],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[4,"ngIf"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Approve",3,"click"],["href","javascript:void(0);",1,"btn","btn-sm","btn-soft-info"],[1,"mdi","mdi-close-circle-outline"],[1,"mx-1"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Reject",3,"click"],["href","javascript:void(0);",1,"btn","btn-sm","btn-soft-danger"],[1,"mdi","mdi-close"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],["novalidate","",3,"formGroup"],[1,"modal-body"],[1,"col-md-12"],[1,"mb-3"],["for","card_number",1,"form-label"],["type","text","formControlName","card_number","placeholder","Enter card number","required","",1,"form-control","mt-2"],["class","invalid-feedback",4,"ngIf"],["for","approved_credit_limit",1,"form-label"],["type","number","id","approved_credit_limit","formControlName","approved_credit_limit","min","100","required","",1,"form-control"],[1,"mb-3","col-lg-6"],["for","interest_rate",1,"form-label"],["type","number","id","interest_rate","formControlName","interest_rate","min","0","max","100","required","",1,"form-control"],["for","penalty",1,"form-label"],["type","number","id","penalty","formControlName","penalty","min","0","max","100","required","",1,"form-control"],[1,"mb-3","col-md-6"],["for","start_date",1,"form-label"],["type","date","id","start_date","formControlName","start_date","required","",1,"form-control",3,"min","max","value"],[1,"col-md-6","mb-3"],["for","franchiseReferral",1,"form-label"],["type","number","id","franchiseReferral","formControlName","franchise_refer_per","placeholder","Enter indirect referral",1,"form-control"],["class","text-danger",4,"ngIf"],["for","indirectReferral",1,"form-label"],["type","number","id","indirectReferral","formControlName","indirect_refer_per","placeholder","Enter indirect referral",1,"form-control"],["for","directReferral",1,"form-label"],["type","number","id","directReferral","formControlName","direct_refer_per","placeholder","Enter direct referral",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","button",1,"btn","btn-primary","waves-effect","waves-light",3,"disabled","click"],[1,"invalid-feedback"],[1,"text-danger"],["for","rejected_credit_limit",1,"form-label"],["id","rejected_credit_limit","formControlName","status","required","",1,"form-select"],["value","Rejected"],["value","Blocked"],["for","reason",1,"form-label"],["id","reason","formControlName","reason","rows","3","required","","minlength","10",1,"form-control"],["for",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"input",10),e.\u0275\u0275listener("keydown.enter",function(l){return n.search(l.target.value)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"i",11),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(12,"div",12)(13,"div",2)(14,"div",13),e.\u0275\u0275template(15,G,4,0,"div",14),e.\u0275\u0275template(16,U,17,1,"table",15),e.\u0275\u0275elementStart(17,"div",16)(18,"div",17)(19,"div",18),e.\u0275\u0275text(20,"Showing "),e.\u0275\u0275elementStart(21,"b"),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",17)(25,"div",19)(26,"ngb-pagination",20),e.\u0275\u0275listener("pageChange",function(l){return n.page=l})("pageChange",function(l){return n.pageChange(l)}),e.\u0275\u0275elementEnd()()()()()()()()()(),e.\u0275\u0275template(27,se,62,29,"ng-template",21,22,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(29,ce,29,8,"ng-template",21,23,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(14),e.\u0275\u0275property("ngIf",0===n.ccList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==n.ccList.length),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((n.page-1)*n.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",n.findPageShowing()," of ",n.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",n.total)("page",n.page)("pageSize",n.pageSize))},dependencies:[c.NgForOf,c.NgIf,C.V,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.Q7,o.wO,o.qQ,o.Fd,o.sg,o.u,_.N9,c.DatePipe]}),r})();function ue(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",27),e.\u0275\u0275element(1,"img",28),e.\u0275\u0275elementStart(2,"p",29),e.\u0275\u0275text(3,"No request found."),e.\u0275\u0275elementEnd()())}function _e(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",null==t||null==t.direct_user?null:t.direct_user.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t||null==t.direct_user?null:t.direct_user.user_id,")")}}function ge(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",null==t||null==t.indirect_user?null:t.indirect_user.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t||null==t.indirect_user?null:t.indirect_user.user_id,")")}}function ve(r,i){1&r&&e.\u0275\u0275element(0,"br")}function Ce(r,i){1&r&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275text(1," Penalty Request Pending "),e.\u0275\u0275elementEnd())}function fe(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"li",38),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext().$implicit,l=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(32);return e.\u0275\u0275resetView(l.approvePenaltyRequest(s,a))}),e.\u0275\u0275elementStart(2,"a",44),e.\u0275\u0275element(3,"i",45),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"li",38),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext().$implicit,l=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(34);return e.\u0275\u0275resetView(l.rejectPenaltyRequest(s,a))}),e.\u0275\u0275elementStart(5,"a",46),e.\u0275\u0275element(6,"i",47),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}}function xe(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275element(6,"br"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275template(9,_e,4,2,"span",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275template(11,ge,4,2,"span",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td"),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"date"),e.\u0275\u0275element(21,"br"),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"date"),e.\u0275\u0275element(24,"br"),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"date"),e.\u0275\u0275element(27,"br"),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"td")(31,"span"),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(33,ve,1,0,"br",32),e.\u0275\u0275template(34,Ce,2,0,"span",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"td")(36,"ul",34)(37,"li",35),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2),d=e.\u0275\u0275reference(30);return e.\u0275\u0275resetView(s.rejectCreditCardModal(d,l))}),e.\u0275\u0275elementStart(38,"a",36),e.\u0275\u0275element(39,"i",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"li",38),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2),d=e.\u0275\u0275reference(28);return e.\u0275\u0275resetView(s.increaseCCLimit(d,l))}),e.\u0275\u0275elementStart(41,"a",39),e.\u0275\u0275element(42,"i",40),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"li",38),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2),d=e.\u0275\u0275reference(36);return e.\u0275\u0275resetView(s.showCreditLimitHistory(d,l))}),e.\u0275\u0275elementStart(44,"a",41),e.\u0275\u0275element(45,"i",42),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(46,fe,7,0,"ng-container",32),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&r){const t=i.$implicit,n=i.index,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((a.page-1)*a.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",null==t||null==t.user?null:t.user.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t||null==t.user?null:t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==t?null:t.direct_user),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==t?null:t.indirect_user),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.approved_credit_limit,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.card_number),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.interest_rate,"%"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" Requested On: ",e.\u0275\u0275pipeBind1(20,19,t.created_date)," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Approved On: ",t.approved_date?e.\u0275\u0275pipeBind1(23,21,t.approved_date):"N/A"," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Start Date: ",t.start_date?e.\u0275\u0275pipeBind1(26,23,t.start_date):"N/A"," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Expiry Date: ",t.expiry_date?e.\u0275\u0275pipeBind1(29,25,t.expiry_date):"N/A"," "),e.\u0275\u0275advance(3),e.\u0275\u0275classMapInterpolate1("badge bg-","Active"===t.status?"success":"Requested"===t.status?"warning":"danger",""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.status," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.hasPenaltyRequest(t)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.hasPenaltyRequest(t)),e.\u0275\u0275advance(12),e.\u0275\u0275property("ngIf",a.hasPenaltyRequest(t))}}function he(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"table",30)(1,"thead")(2,"tr")(3,"th"),e.\u0275\u0275text(4,"S.No."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"th"),e.\u0275\u0275text(6,"User Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th"),e.\u0275\u0275text(8,"Parent Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"th"),e.\u0275\u0275text(10,"Indirect Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"th"),e.\u0275\u0275text(12,"Card Limit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th"),e.\u0275\u0275text(14,"Card Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"th"),e.\u0275\u0275text(16,"Interest Rate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"th"),e.\u0275\u0275text(18,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th"),e.\u0275\u0275text(20,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"th"),e.\u0275\u0275text(22,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(23,"tbody"),e.\u0275\u0275template(24,xe,47,27,"ng-container",31),e.\u0275\u0275elementEnd()()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(24),e.\u0275\u0275property("ngForOf",t.ccList)}}function be(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",61),e.\u0275\u0275text(1," Card limit is required. "),e.\u0275\u0275elementEnd())}function Se(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",61),e.\u0275\u0275text(1," Card limit must be at least 500. "),e.\u0275\u0275elementEnd())}function ye(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",48)(1,"h5",49),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",50),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",51)(5,"div",52)(6,"div",2)(7,"div",53)(8,"div",54)(9,"label",55),e.\u0275\u0275text(10,"Increase Card Limit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",56),e.\u0275\u0275template(12,be,2,0,"div",57),e.\u0275\u0275template(13,Se,2,0,"div",57),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(14,"div",58)(15,"button",59),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Close click"))}),e.\u0275\u0275text(16,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",60),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.increaseCreditCardLimit())}),e.\u0275\u0275text(18,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,a,l;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Increase Sahyog Card Limit (Current Limit : ",t.cc_selected.approved_credit_limit,")"),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t.increaseCCFormGroup),e.\u0275\u0275advance(7),e.\u0275\u0275classProp("is-invalid",(null==(n=t.increaseCCFormGroup.get("approved_credit_limit"))?null:n.invalid)&&((null==(n=t.increaseCCFormGroup.get("approved_credit_limit"))?null:n.touched)||(null==(n=t.increaseCCFormGroup.get("approved_credit_limit"))?null:n.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.increaseCCFormGroup.get("approved_credit_limit"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(l=t.increaseCCFormGroup.get("approved_credit_limit"))||null==l.errors?null:l.errors.min),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!t.increaseCCFormGroup.valid)}}function Ee(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",61),e.\u0275\u0275text(1," Reason is required. "),e.\u0275\u0275elementEnd())}function Ie(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",61),e.\u0275\u0275text(1," Reason must be at least 10 characters. "),e.\u0275\u0275elementEnd())}function we(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",48)(1,"h5",49),e.\u0275\u0275text(2,"Reject Credit Card"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",50),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",51)(5,"div",52)(6,"div",2)(7,"div",53)(8,"div",54)(9,"label",62),e.\u0275\u0275text(10,"Rejected Credit Limit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"select",63)(12,"option",64),e.\u0275\u0275text(13,"Rejected"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"option",65),e.\u0275\u0275text(15,"Blocked"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",54)(17,"label",66),e.\u0275\u0275text(18,"Reason for Rejection"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"textarea",67),e.\u0275\u0275template(20,Ee,2,0,"div",57),e.\u0275\u0275template(21,Ie,2,0,"div",57),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(22,"div",58)(23,"button",59),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Close click"))}),e.\u0275\u0275text(24,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"button",60),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.rejectCreditCard())}),e.\u0275\u0275text(26,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,a,l,s;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.rejectCCFormGroup),e.\u0275\u0275advance(7),e.\u0275\u0275classProp("is-invalid",(null==(n=t.rejectCCFormGroup.get("status"))?null:n.invalid)&&((null==(n=t.rejectCCFormGroup.get("status"))?null:n.touched)||(null==(n=t.rejectCCFormGroup.get("status"))?null:n.dirty))),e.\u0275\u0275advance(8),e.\u0275\u0275classProp("is-invalid",(null==(a=t.rejectCCFormGroup.get("reason"))?null:a.invalid)&&((null==(a=t.rejectCCFormGroup.get("reason"))?null:a.touched)||(null==(a=t.rejectCCFormGroup.get("reason"))?null:a.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(l=t.rejectCCFormGroup.get("reason"))||null==l.errors?null:l.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(s=t.rejectCCFormGroup.get("reason"))||null==s.errors?null:s.errors.minlength),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!t.rejectCCFormGroup.valid)}}function Re(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",61),e.\u0275\u0275text(1," Penalty amount is required. "),e.\u0275\u0275elementEnd())}function Te(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",61),e.\u0275\u0275text(1," Penalty amount must be 0 or greater. "),e.\u0275\u0275elementEnd())}function Fe(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"p",75)(1,"strong"),e.\u0275\u0275text(2,"Reason:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(3);let n;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",null==(n=t.getPenaltyRequestForCard(t.cc_selected))?null:n.reason,"")}}function Pe(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"p",75)(1,"strong"),e.\u0275\u0275text(2,"Requested On:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(3);let n;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,1,null==(n=t.getPenaltyRequestForCard(t.cc_selected))?null:n.request_date),"")}}function Ae(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",54)(1,"label",73),e.\u0275\u0275text(2,"Request Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",74)(4,"p",75)(5,"strong"),e.\u0275\u0275text(6,"User:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"p",75)(9,"strong"),e.\u0275\u0275text(10,"Card:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"p",75)(13,"strong"),e.\u0275\u0275text(14,"Current Penalty:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,Fe,4,1,"p",76),e.\u0275\u0275template(17,Pe,5,3,"p",76),e.\u0275\u0275elementEnd()()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate2(" ",null==t.cc_selected||null==t.cc_selected.user?null:t.cc_selected.user.name," (",null==t.cc_selected||null==t.cc_selected.user?null:t.cc_selected.user.user_id,")"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.cc_selected?null:t.cc_selected.card_number,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" \u20b9",(null==t.cc_selected?null:t.cc_selected.penalty)||0,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.getPenaltyRequestForCard(t.cc_selected)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.getPenaltyRequestForCard(t.cc_selected))}}function Le(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",48)(1,"h5",68),e.\u0275\u0275text(2,"Approve Penalty Removal Request"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",50),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",51)(5,"div",52)(6,"div",2)(7,"div",53)(8,"div",54)(9,"label",69),e.\u0275\u0275text(10,"Penalty Amount to Remove (\u20b9)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",70),e.\u0275\u0275template(12,Re,2,0,"div",57),e.\u0275\u0275template(13,Te,2,0,"div",57),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Ae,18,6,"div",71),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",58)(16,"button",59),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Close click"))}),e.\u0275\u0275text(17,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"button",72),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.approvePenaltyRemovalRequest())}),e.\u0275\u0275text(19,"Approve Request"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,a,l,s;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.penaltyActionFormGroup),e.\u0275\u0275advance(7),e.\u0275\u0275classProp("is-invalid",(null==(n=t.penaltyActionFormGroup.get("penalty_removed"))?null:n.invalid)&&((null==(n=t.penaltyActionFormGroup.get("penalty_removed"))?null:n.touched)||(null==(n=t.penaltyActionFormGroup.get("penalty_removed"))?null:n.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.penaltyActionFormGroup.get("penalty_removed"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(l=t.penaltyActionFormGroup.get("penalty_removed"))||null==l.errors?null:l.errors.min),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.cc_selected),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!(null!=(s=t.penaltyActionFormGroup.get("penalty_removed"))&&s.valid))}}function ke(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",61),e.\u0275\u0275text(1," Reason for rejection is required. "),e.\u0275\u0275elementEnd())}function Me(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",61),e.\u0275\u0275text(1," Reason must be at least 10 characters. "),e.\u0275\u0275elementEnd())}function qe(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"p",75)(1,"strong"),e.\u0275\u0275text(2,"Reason:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(3);let n;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",null==(n=t.getPenaltyRequestForCard(t.cc_selected))?null:n.reason,"")}}function Ne(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"p",75)(1,"strong"),e.\u0275\u0275text(2,"Requested On:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(3);let n;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,1,null==(n=t.getPenaltyRequestForCard(t.cc_selected))?null:n.request_date),"")}}function Oe(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",54)(1,"label",73),e.\u0275\u0275text(2,"Request Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",74)(4,"p",75)(5,"strong"),e.\u0275\u0275text(6,"User:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"p",75)(9,"strong"),e.\u0275\u0275text(10,"Card:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"p",75)(13,"strong"),e.\u0275\u0275text(14,"Current Penalty:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,qe,4,1,"p",76),e.\u0275\u0275template(17,Ne,5,3,"p",76),e.\u0275\u0275elementEnd()()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate2(" ",null==t.cc_selected||null==t.cc_selected.user?null:t.cc_selected.user.name," (",null==t.cc_selected||null==t.cc_selected.user?null:t.cc_selected.user.user_id,")"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.cc_selected?null:t.cc_selected.card_number,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" \u20b9",(null==t.cc_selected?null:t.cc_selected.penalty)||0,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.getPenaltyRequestForCard(t.cc_selected)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.getPenaltyRequestForCard(t.cc_selected))}}function Ge(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",48)(1,"h5",77),e.\u0275\u0275text(2,"Reject Penalty Removal Request"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",50),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",51)(5,"div",52)(6,"div",2)(7,"div",53)(8,"div",54)(9,"label",78),e.\u0275\u0275text(10,"Reason for Rejection"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"textarea",79),e.\u0275\u0275template(12,ke,2,0,"div",57),e.\u0275\u0275template(13,Me,2,0,"div",57),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Oe,18,6,"div",71),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",58)(16,"button",59),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Close click"))}),e.\u0275\u0275text(17,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"button",80),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.rejectPenaltyRemovalRequest())}),e.\u0275\u0275text(19,"Reject Request"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,a,l,s;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.penaltyActionFormGroup),e.\u0275\u0275advance(7),e.\u0275\u0275classProp("is-invalid",(null==(n=t.penaltyActionFormGroup.get("admin_response"))?null:n.invalid)&&((null==(n=t.penaltyActionFormGroup.get("admin_response"))?null:n.touched)||(null==(n=t.penaltyActionFormGroup.get("admin_response"))?null:n.dirty))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.penaltyActionFormGroup.get("admin_response"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(l=t.penaltyActionFormGroup.get("admin_response"))||null==l.errors?null:l.errors.minlength),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.cc_selected),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!(null!=(s=t.penaltyActionFormGroup.get("admin_response"))&&s.valid))}}function je(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",85)(1,"div",53)(2,"div",86)(3,"div",12)(4,"h6",87),e.\u0275\u0275text(5,"Card Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",2)(7,"div",88)(8,"p",75)(9,"strong"),e.\u0275\u0275text(10,"Card Number:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"p",75)(13,"strong"),e.\u0275\u0275text(14,"User:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",88)(17,"p",75)(18,"strong"),e.\u0275\u0275text(19,"Current Limit:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"p",75)(22,"strong"),e.\u0275\u0275text(23,"Status:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd()()()()()()()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate1(" ",null==t.cc_selected?null:t.cc_selected.card_number,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2(" ",null==t.cc_selected||null==t.cc_selected.user?null:t.cc_selected.user.name," (",null==t.cc_selected||null==t.cc_selected.user?null:t.cc_selected.user.user_id,")"),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" \u20b9",null==t.cc_selected?null:t.cc_selected.approved_credit_limit,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.cc_selected?null:t.cc_selected.status,"")}}function Ve(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",89)(1,"div",90)(2,"span",91),e.\u0275\u0275text(3,"Loading..."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"p",92),e.\u0275\u0275text(5,"Loading limit history..."),e.\u0275\u0275elementEnd()())}function Ue(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",89),e.\u0275\u0275element(1,"img",93),e.\u0275\u0275elementStart(2,"p",94),e.\u0275\u0275text(3,"No limit history found for this card."),e.\u0275\u0275elementEnd()())}function $e(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"p",75)(1,"strong"),e.\u0275\u0275text(2,"Reason:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.reason," ")}}function De(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"p",75)(1,"strong"),e.\u0275\u0275text(2,"Details:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.reason_details," ")}}function ze(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"p",75)(1,"strong"),e.\u0275\u0275text(2,"Updated by:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275elementStart(4,"span",103),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate2(" ",t.updated_by_details.name," (",t.updated_by_details.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.updated_by_role)}}function Be(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" on ",e.\u0275\u0275pipeBind2(2,1,t.approval_date,"medium"),"")}}function He(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"p",75)(1,"strong"),e.\u0275\u0275text(2,"Status:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",101),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Be,3,4,"span",32),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275classMap("Approved"===t.status?"bg-success":"Rejected"===t.status?"bg-danger":"bg-warning"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.status," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.approval_date)}}function Ye(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",97)(1,"div",98),e.\u0275\u0275element(2,"i"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",99)(4,"div",100)(5,"div")(6,"h6",75)(7,"span",101),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"p",102),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"p",75)(15,"strong"),e.\u0275\u0275text(16,"Old Limit:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"number"),e.\u0275\u0275elementStart(19,"strong"),e.\u0275\u0275text(20,"New Limit:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,$e,4,1,"p",76),e.\u0275\u0275template(24,De,4,1,"p",76),e.\u0275\u0275template(25,ze,6,3,"p",76),e.\u0275\u0275template(26,He,6,4,"p",76),e.\u0275\u0275elementEnd()()()()),2&r){const t=i.$implicit,n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275classMap(n.getChangeTypeIcon(t.change_type)),e.\u0275\u0275advance(5),e.\u0275\u0275classMap("Increase"===t.change_type?"bg-success":"bg-danger"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.change_type," "),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" \u20b9",e.\u0275\u0275pipeBind1(10,13,t.amount_changed)," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(13,15,t.created_date,"medium")," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" \u20b9",e.\u0275\u0275pipeBind1(18,18,t.old_limit)," \u2192 "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" \u20b9",e.\u0275\u0275pipeBind1(22,20,t.new_limit)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.reason),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.reason_details),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.updated_by_details),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.approval_required)}}function Je(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",95),e.\u0275\u0275template(1,Ye,27,22,"div",96),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.limitHistory)}}function Ke(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",48)(1,"h5",81),e.\u0275\u0275text(2,"Credit Limit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",50),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",52),e.\u0275\u0275template(5,je,25,5,"div",82),e.\u0275\u0275elementStart(6,"div",2)(7,"div",53),e.\u0275\u0275template(8,Ve,6,0,"div",83),e.\u0275\u0275template(9,Ue,4,0,"div",83),e.\u0275\u0275template(10,Je,2,1,"div",84),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(11,"div",58)(12,"button",59),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Close click"))}),e.\u0275\u0275text(13,"Close"),e.\u0275\u0275elementEnd()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.cc_selected),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.limitHistoryLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.limitHistoryLoading&&0===t.limitHistory.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.limitHistoryLoading&&t.limitHistory.length>0)}}let Qe=(()=>{class r{constructor(t,n,a){this.creditCardService=t,this.modalService=n,this.toast=a,this.currentYear=(new Date).getFullYear(),this.ccList=[],this.total=0,this.page=1,this.pageSize=10,this.searchText="",this.cc_selected=null,this.limitHistory=[],this.limitHistoryLoading=!1}ngOnInit(){this.breadCrumbItems=[{label:"Credit Management"},{label:"Assigned Card",active:!0}],this.getAssignedCreditCard(),this.rejectCCFormGroup=new o.cw({reason:new o.NI(null,{nonNullable:!0,validators:[o.kI.required,o.kI.minLength(10)]}),status:new o.NI("Rejected",{nonNullable:!0,validators:[o.kI.required]})}),this.increaseCCFormGroup=new o.cw({approved_credit_limit:new o.NI(null,{nonNullable:!0,validators:[o.kI.required,o.kI.min(500)]})}),this.penaltyActionFormGroup=new o.cw({penalty_removed:new o.NI(null,{nonNullable:!0,validators:[o.kI.required,o.kI.min(0)]}),admin_response:new o.NI(null,{nonNullable:!0,validators:[o.kI.required,o.kI.minLength(10)]})})}getAssignedCreditCard(){this.creditCardService.getAssignedCreditCard(this.page,this.pageSize,this.searchText).subscribe({next:t=>{this.total=t?.data?.total||0,this.ccList=t?.data?.cc||[],console.log("Assigned Credit Cards:",this.ccList)},error:t=>{console.error("Error fetching requested credit card:",t)}})}hasPenaltyRequest(t){return t.has_pending_penalty_request||!1}getPenaltyRequestForCard(t){return t.penalty_removal_requests&&t.penalty_removal_requests.length>0?t.penalty_removal_requests[0]:null}approvePenaltyRequest(t,n){this.getPenaltyRequestForCard(n)&&(this.cc_selected=n,this.penaltyActionFormGroup.reset(),this.modalService.open(t,{backdrop:"static"}))}rejectPenaltyRequest(t,n){this.getPenaltyRequestForCard(n)&&(this.cc_selected=n,this.penaltyActionFormGroup.reset(),this.modalService.open(t,{backdrop:"static"}))}increaseCCLimit(t,n){this.cc_selected=n,this.increaseCCFormGroup.reset(),this.modalService.open(t,{backdrop:"static"})}rejectCreditCardModal(t,n){this.cc_selected=n,this.modalService.open(t,{backdrop:"static"})}search(t){this.searchText=t,this.page=1,this.getAssignedCreditCard()}rejectCreditCard(){if(this.rejectCCFormGroup.invalid)return void this.toast.error("Please fill all required fields correctly.");const t=this.rejectCCFormGroup.value;console.log("Rejecting credit card with data:",t),this.creditCardService.rejectCreditCard(this.cc_selected._id,t).subscribe({next:n=>{this.toast.success("Credit card rejected successfully."),this.modalService.dismissAll(),this.getAssignedCreditCard()},error:n=>{console.error("Error rejecting credit card:",n),this.toast.error("Failed to reject credit card. Please try again.")}})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getAssignedCreditCard()}increaseCreditCardLimit(){if(this.increaseCCFormGroup.invalid)return void this.toast.error("Please fill all required fields correctly.");const t=this.increaseCCFormGroup.value;console.log("Increasing credit card limit with data:",t),this.creditCardService.increaseCreditCardLimit(this.cc_selected._id,t).subscribe({next:n=>{this.toast.success("Credit card limit increased successfully."),this.modalService.dismissAll(),this.getAssignedCreditCard()},error:n=>{console.error("Error increasing credit card limit:",n),this.toast.error("Failed to increase credit card limit. Please try again.")}})}approvePenaltyRemovalRequest(){if(this.penaltyActionFormGroup.get("penalty_removed")?.invalid)return void this.toast.error("Please enter a valid penalty amount.");const t=this.getPenaltyRequestForCard(this.cc_selected);if(!t)return void this.toast.error("No penalty request found.");const n=this.penaltyActionFormGroup.get("penalty_removed")?.value;this.creditCardService.approvePenaltyRemovalRequest(t._id,n).subscribe({next:a=>{this.toast.success("Penalty removal request approved successfully."),this.modalService.dismissAll(),this.getAssignedCreditCard()},error:a=>{console.error("Error approving penalty removal request:",a),this.toast.error("Failed to approve penalty removal request. Please try again.")}})}rejectPenaltyRemovalRequest(){if(this.penaltyActionFormGroup.get("admin_response")?.invalid)return void this.toast.error("Please provide a reason for rejection.");const t=this.getPenaltyRequestForCard(this.cc_selected);if(!t)return void this.toast.error("No penalty request found.");const n=this.penaltyActionFormGroup.get("admin_response")?.value;this.creditCardService.rejectPenaltyRemovalRequest(t._id,n).subscribe({next:a=>{this.toast.success("Penalty removal request rejected successfully."),this.modalService.dismissAll(),this.getAssignedCreditCard()},error:a=>{console.error("Error rejecting penalty removal request:",a),this.toast.error("Failed to reject penalty removal request. Please try again.")}})}showCreditLimitHistory(t,n){this.cc_selected=n,this.modalService.open(t,{size:"lg"}),this.getCreditLimitHistoryByCard()}getCreditLimitHistoryByCard(){this.limitHistoryLoading=!0,this.creditCardService.getCreditLimitHistory(this.cc_selected._id).subscribe({next:t=>{this.limitHistory=t.data.history||[],this.limitHistoryLoading=!1},error:t=>{console.error("Error fetching credit limit history:",t),this.toast.error("Failed to load credit limit history."),this.limitHistoryLoading=!1}})}getChangeTypeIcon(t){return"Increase"===t?"bx bx-trending-up text-success":"bx bx-trending-down text-danger"}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(v),e.\u0275\u0275directiveInject(_.FF),e.\u0275\u0275directiveInject(S._W))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-assigned-card-list"]],decls:37,vars:9,consts:[[1,"container-fluid"],["title","Assigned Cards",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","border-bottom"],[1,"row","mb-0"],[1,"col-sm-4"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","autocomplete","off","id","searchTableList","placeholder","Search...",1,"form-control",3,"keydown.enter"],[1,"bx","bx-search-alt","search-icon"],[1,"card-body"],[1,"table-responsive"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["id","basic-datatable","class","table table-bordered dt-responsive nowrap datatables no-footer dtr-inline",4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["role","document"],["cardLimitModal",""],["RejectFormModal",""],["approvePenaltyModal",""],["rejectPenaltyModal",""],["creditLimitHistoryModal",""],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","badge bg-warning mt-1",4,"ngIf"],[1,"list-inline","font-size-20","contact-links","mb-0"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"list-inline-item","px-2",3,"click"],["href","javascript:void(0);","tooltip","Reject Card"],[1,"bx","bx-x"],[1,"list-inline-item","px-2",3,"click"],["href","javascript:void(0);","tooltip","Increase Limit"],[1,"bx","bx-up-arrow"],["href","javascript:void(0);","tooltip","Limit History"],[1,"bx","bx-history"],[1,"badge","bg-warning","mt-1"],["href","javascript:void(0);","tooltip","Approve Penalty Request"],[1,"bx","bx-check","text-success"],["href","javascript:void(0);","tooltip","Reject Penalty Request"],[1,"bx","bx-x","text-danger"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],["novalidate","",3,"formGroup"],[1,"modal-body"],[1,"col-md-12"],[1,"mb-3"],["for","approved_credit_limit",1,"form-label"],["type","number","id","approved_credit_limit","formControlName","approved_credit_limit","min","500","required","",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","button",1,"btn","btn-primary","waves-effect","waves-light",3,"disabled","click"],[1,"invalid-feedback"],["for","rejected_credit_limit",1,"form-label"],["id","rejected_credit_limit","formControlName","status","required","",1,"form-select"],["value","Rejected"],["value","Blocked"],["for","reason",1,"form-label"],["id","reason","formControlName","reason","rows","3","required","","minlength","10",1,"form-control"],["id","approvePenaltyModalLabel",1,"modal-title"],["for","penalty_removed",1,"form-label"],["type","number","id","penalty_removed","formControlName","penalty_removed","min","0","step","0.01","required","",1,"form-control"],["class","mb-3",4,"ngIf"],["type","button",1,"btn","btn-success","waves-effect","waves-light",3,"disabled","click"],[1,"form-label"],[1,"border","p-3","bg-light"],[1,"mb-1"],["class","mb-1",4,"ngIf"],["id","rejectPenaltyModalLabel",1,"modal-title"],["for","admin_response",1,"form-label"],["id","admin_response","formControlName","admin_response","rows","3","required","","minlength","10",1,"form-control"],["type","button",1,"btn","btn-danger","waves-effect","waves-light",3,"disabled","click"],["id","creditLimitHistoryModalLabel",1,"modal-title"],["class","row mb-3",4,"ngIf"],["class","text-center py-4",4,"ngIf"],["class","timeline",4,"ngIf"],[1,"row","mb-3"],[1,"card","border"],[1,"card-title"],[1,"col-md-6"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],["src","assets/img/not-found.png","width","100px","alt","",1,"mb-3"],[1,"text-muted"],[1,"timeline"],["class","timeline-item",4,"ngFor","ngForOf"],[1,"timeline-item"],[1,"timeline-marker"],[1,"timeline-content"],[1,"d-flex","justify-content-between","align-items-start"],[1,"badge"],[1,"mb-1","text-muted","small"],[1,"badge","bg-secondary","ms-1"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"input",10),e.\u0275\u0275listener("keydown.enter",function(l){return n.search(l.target.value)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"i",11),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(12,"div",12)(13,"div",2)(14,"div",13),e.\u0275\u0275template(15,ue,4,0,"div",14),e.\u0275\u0275template(16,he,25,1,"table",15),e.\u0275\u0275elementStart(17,"div",16)(18,"div",17)(19,"div",18),e.\u0275\u0275text(20,"Showing "),e.\u0275\u0275elementStart(21,"b"),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",17)(25,"div",19)(26,"ngb-pagination",20),e.\u0275\u0275listener("pageChange",function(l){return n.page=l})("pageChange",function(l){return n.pageChange(l)}),e.\u0275\u0275elementEnd()()()()()()()()()(),e.\u0275\u0275template(27,ye,19,7,"ng-template",21,22,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(29,we,27,8,"ng-template",21,23,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(31,Le,20,7,"ng-template",21,24,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(33,Ge,20,7,"ng-template",21,25,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(35,Ke,14,4,"ng-template",21,26,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(14),e.\u0275\u0275property("ngIf",0===n.ccList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==n.ccList.length),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((n.page-1)*n.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",n.findPageShowing()," of ",n.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",n.total)("page",n.page)("pageSize",n.pageSize))},dependencies:[c.NgForOf,c.NgIf,C.V,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.Q7,o.wO,o.qQ,o.sg,o.u,_.N9,c.DecimalPipe,c.DatePipe],styles:['.timeline[_ngcontent-%COMP%]{position:relative;padding-left:30px}.timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;left:15px;top:0;bottom:0;width:2px;background:#e9ecef}.timeline-item[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.timeline-marker[_ngcontent-%COMP%]{position:absolute;left:-22px;top:5px;width:14px;height:14px;border-radius:50%;background:#fff;border:2px solid #e9ecef;display:flex;align-items:center;justify-content:center}.timeline-marker[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:8px}.timeline-content[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:15px;border-left:3px solid #007bff}.timeline-item[_ngcontent-%COMP%]:last-child   .timeline-content[_ngcontent-%COMP%]{margin-bottom:0}']}),r})();function We(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275element(6,"br"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275element(10,"br"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td")(17,"span"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"td"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td")(23,"ul",33)(24,"li",34),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(),d=e.\u0275\u0275reference(62);return e.\u0275\u0275resetView(s.selectedFundFn(d,l))}),e.\u0275\u0275elementStart(25,"a",35),e.\u0275\u0275element(26,"i",36),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"li",37),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.rejectFundRequest(l._id))}),e.\u0275\u0275elementStart(28,"a",38),e.\u0275\u0275element(29,"i",39),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementContainerEnd()}if(2&r){const t=i.$implicit,n=i.index,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((a.page-1)*a.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",null==t.user_details?null:t.user_details.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t.user_details?null:t.user_details.user_id,")"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.card_number," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" Limit: \u20b9 ",t.approved_credit_limit," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.reason),e.\u0275\u0275advance(2),e.\u0275\u0275classMapInterpolate1("badge bg-","Approved"===t.status?"success":"Rejected"===t.status?"danger":"warning",""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.status),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,12,t.created_date))}}function Ze(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",40)(1,"h5",41),e.\u0275\u0275text(2,"Approve Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",42),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",43)(5,"form",44),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.submitApprovedAmount())}),e.\u0275\u0275elementStart(6,"div",43)(7,"p"),e.\u0275\u0275text(8,"User: "),e.\u0275\u0275elementStart(9,"b"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"p"),e.\u0275\u0275text(12,"Card Number: "),e.\u0275\u0275elementStart(13,"b"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",45)(16,"label",46),e.\u0275\u0275text(17,"Approve Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"input",47),e.\u0275\u0275listener("ngModelChange",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.approvedAmount=a)}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"div",48)(20,"button",49),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.dismiss("Cross click"))}),e.\u0275\u0275text(21,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"button",50),e.\u0275\u0275text(23,"Save"),e.\u0275\u0275elementEnd()()()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(null==t.selectedFund||null==t.selectedFund.user_details?null:t.selectedFund.user_details.name),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(null==t.selectedFund?null:t.selectedFund.card_number),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",t.approvedAmount)}}let Xe=(()=>{class r{constructor(t,n){this.creditCardService=t,this.modalService=n,this.fundRequestList=[],this.total=0,this.page=1,this.pageSize=10,this.approvedAmount=0}ngOnInit(){this.breadCrumbItems=[{label:"Credit Management"},{label:"Request to use amount",active:!0}],this.searchFormGroup=new o.cw({search:new o.NI(""),status:new o.NI("Requested")}),this.getUserFundRequests()}search(){this.page=1,this.getUserFundRequests()}resetSearch(){this.searchFormGroup.reset(),this.page=1,this.getUserFundRequests()}getUserFundRequests(){const t=this.searchFormGroup.value,n=[];Object.keys(t).forEach(l=>{null!==t[l]&&""!==t[l]&&n.push(`${l}=${encodeURIComponent(t[l])}`)});const a=n.join("&");this.creditCardService.getUserFundRequests(this.page,this.pageSize,a).subscribe({next:l=>{this.total=l?.data?.total||0,this.fundRequestList=l?.data?.fundRequests||[]},error:l=>{console.error("Error fetching user fund requests:",l)}})}rejectFundRequest(t){g().fire({title:"Are you sure?",text:"You want to reject this fund request?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, reject it!"}).then(n=>{n.isConfirmed&&this.creditCardService.rejectUserFundRequest(t).subscribe({next:a=>{this.getUserFundRequests()},error:a=>{console.log("Error rejecting fund request:",a)}})})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getUserFundRequests()}selectedFundFn(t,n){this.modalService.open(t),this.selectedFund=n,this.approvedAmount=n?.amount||0}submitApprovedAmount(){this.approvedAmount>0&&this.creditCardService.approveUserFundRequest(this.selectedFund._id,this.approvedAmount).subscribe({next:t=>{g().fire({title:"Approved!",text:"Fund request has been approved successfully.",icon:"success",confirmButtonText:"OK"}).then(()=>{this.getUserFundRequests(),this.modalService.dismissAll(),this.approvedAmount=0,this.selectedFund=null})},error:t=>{g().fire({title:"Error!",text:"There was an error approving the fund request.",icon:"error",confirmButtonText:"OK"}),console.error("Error approving fund request:",t)}})}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(v),e.\u0275\u0275directiveInject(_.FF))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-user-amount"]],decls:63,vars:9,consts:[[1,"container-fluid"],["title","Fund Request",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"row","g-3"],[1,"col-lg-6"],["type","search","id","searchInput","placeholder","Search for User Id...","formControlName","search",1,"form-control"],[1,"col-lg-3"],["formControlName","status",1,"form-control","select2"],["value",""],["value","Approved"],["value","Requested"],["value","Rejected"],[1,"col-lg-2"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],[1,"col-lg-1"],["href","javascript:void(0);",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],[1,"card-body"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["role","document"],["approvedAmountModal",""],[1,"list-unstyled","hstack","gap-1","mb-0"],["data-bs-toggle","tooltip","data-bs-placement","top","title","View",3,"click"],[1,"btn","btn-sm","btn-soft-primary"],[1,"mdi","mdi-check-circle-outline"],["data-bs-toggle","tooltip","data-bs-placement","top","title","Edit",3,"click"],["href","javascript:void(0);",1,"btn","btn-sm","btn-soft-danger"],[1,"mdi","mdi-close-circle-outline"],[1,"modal-header"],["id","approvedAmountModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],["for","approvedAmountInput",1,"form-label"],["type","number","id","approvedAmountInput","name","approvedAmount","required","","min","0",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",7)(8,"div",8),e.\u0275\u0275element(9,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",10)(11,"select",11)(12,"option",12),e.\u0275\u0275text(13,"Select Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"option",13),e.\u0275\u0275text(15,"Approved"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"option",14),e.\u0275\u0275text(17,"Requested"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"option",15),e.\u0275\u0275text(19,"Rejected"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"div",16)(21,"button",17),e.\u0275\u0275listener("click",function(){return n.search()}),e.\u0275\u0275element(22,"i",18),e.\u0275\u0275text(23," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",19)(25,"a",20),e.\u0275\u0275listener("click",function(){return n.resetSearch()}),e.\u0275\u0275element(26,"i",21),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(27,"div",22)(28,"div",2)(29,"div",23)(30,"table",24)(31,"thead")(32,"tr")(33,"th"),e.\u0275\u0275text(34,"S.No."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"th"),e.\u0275\u0275text(36,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"th"),e.\u0275\u0275text(38,"Card Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"th"),e.\u0275\u0275text(40,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"th"),e.\u0275\u0275text(42,"Reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"th"),e.\u0275\u0275text(44,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"th"),e.\u0275\u0275text(46,"Requested at"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"th"),e.\u0275\u0275text(48,"Actions"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(49,"tbody"),e.\u0275\u0275template(50,We,30,14,"ng-container",25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"div",26)(52,"div",27)(53,"div",28),e.\u0275\u0275text(54,"Showing "),e.\u0275\u0275elementStart(55,"b"),e.\u0275\u0275text(56),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(57),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(58,"div",27)(59,"div",29)(60,"ngb-pagination",30),e.\u0275\u0275listener("pageChange",function(l){return n.page=l})("pageChange",function(l){return n.pageChange(l)}),e.\u0275\u0275elementEnd()()()()()()()()()(),e.\u0275\u0275template(61,Ze,24,3,"ng-template",31,32,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",n.searchFormGroup),e.\u0275\u0275advance(44),e.\u0275\u0275property("ngForOf",n.fundRequestList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((n.page-1)*n.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",n.findPageShowing()," of ",n.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",n.total)("page",n.page)("pageSize",n.pageSize))},dependencies:[c.NgForOf,C.V,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.Q7,o.qQ,o.On,o.F,o.sg,o.u,_.N9,c.DatePipe]}),r})();var M=u(8386);function et(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"User ID is required."),e.\u0275\u0275elementEnd())}function tt(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,et,2,0,"small",22),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext();let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.payFormGroup.get("user_id"))||null==n.errors?null:n.errors.required)}}function nt(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",23)(1,"small")(2,"strong"),e.\u0275\u0275text(3,"Name:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"br"),e.\u0275\u0275elementStart(6,"small")(7,"strong"),e.\u0275\u0275text(8,"Outstanding Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"number"),e.\u0275\u0275elementEnd()()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.userDetails.name,""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" \u20b9",e.\u0275\u0275pipeBind1(10,2,t.totalPayableAmount),"")}}function rt(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Amount is required."),e.\u0275\u0275elementEnd())}function at(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Amount must be at least \u20b91."),e.\u0275\u0275elementEnd())}function lt(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"number"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("Amount can be paid till \u20b9",e.\u0275\u0275pipeBind1(2,1,t.totalPayableAmount),".")}}function it(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,rt,2,0,"small",22),e.\u0275\u0275template(2,at,2,0,"small",22),e.\u0275\u0275template(3,lt,3,3,"small",22),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext();let n,a,l;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.payFormGroup.get("amount"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.payFormGroup.get("amount"))||null==a.errors?null:a.errors.min),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(l=t.payFormGroup.get("amount"))||null==l.errors?null:l.errors.max)}}function ot(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"option",24),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=i.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function st(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Payment Method is required."),e.\u0275\u0275elementEnd())}function dt(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,st,2,0,"small",22),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext();let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.payFormGroup.get("payment_method"))||null==n.errors?null:n.errors.required)}}function mt(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Transanction Id is required."),e.\u0275\u0275elementEnd())}function ct(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,mt,2,0,"small",22),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext();let n;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(n=t.payFormGroup.get("transaction_id"))||null==n.errors?null:n.errors.required)}}let pt=(()=>{class r{constructor(t,n,a){this.userService=t,this.creditCardService=n,this.toast=a,this.userDetails=null,this.creditCardList=[],this.fundList=[],this.totalPayableAmount=0,this.paymentMethods=["Cash","Bank Transfer","Cash","Cheque"]}ngOnInit(){this.breadCrumbItems=[{label:"Credit Management"},{label:"Payable Amount",active:!0}],this.payFormGroup=new o.cw({user_id:new o.NI("",o.kI.required),card_id:new o.NI("",o.kI.required),transaction_id:new o.NI("",o.kI.required),payment_method:new o.NI("",o.kI.required),amount:new o.NI("",[o.kI.required,o.kI.min(1)])})}getUserDetails(){!this.payFormGroup.value.user_id||this.userService.getBasicUserProfile(this.payFormGroup.value.user_id).subscribe({next:t=>{t.status&&(this.userDetails=t?.data?.user,this.getAllActiveCards(this.userDetails._id))},error:t=>{console.error("Error fetching user details:",t)}})}getAllActiveCards(t){this.creditCardService.getActiveCreditCardsOfUser(t).subscribe({next:n=>{n.status&&(this.creditCardList=n.data.cc,this.creditCardList.length>0&&(this.payFormGroup.get("card_id")?.setValue(this.creditCardList[0]._id),this.getTotalPaybleAmount(this.creditCardList[0])))},error:n=>{console.error("Error fetching active cards:",n)}})}getTotalPaybleAmount(t){t&&t._id?this.creditCardService.getTotalPaybleAmount(t._id).subscribe({next:n=>{n.status&&(this.totalPayableAmount=n.data.outstanding,this.payFormGroup.get("amount")?.setValidators([o.kI.required,o.kI.min(1),o.kI.max(this.totalPayableAmount)]),this.payFormGroup.updateValueAndValidity())},error:n=>{console.error("Error fetching total payable amount:",n)}}):this.totalPayableAmount=0}payCreditCardFees(){if(this.payFormGroup.invalid)return;if(this.payFormGroup.value.amount<=0||this.payFormGroup.value.amount>this.totalPayableAmount)return void this.toast.warning("Please enter a valid amount to pay.");const t={userId:this.userDetails._id,card_id:this.payFormGroup.value.card_id,amount:this.payFormGroup.value.amount};console.log("Payment Payload:",t),this.creditCardService.payCreditCardFees(t).subscribe({next:n=>{n.status?(this.toast.success("Payment successful!"),g().fire({title:"Payment Successful",text:`Your payment of \u20b9${this.payFormGroup.value.amount} has been successfully processed.`,icon:"success",confirmButtonText:"OK"}),this.payFormGroup.reset(),this.totalPayableAmount=0):this.toast.error("Payment failed. Please try again.")},error:n=>{console.error("Error processing payment:",n),this.toast.error("An error occurred while processing the payment."),g().fire({title:"Payment Failed",text:"There was an error processing your payment. Please try again later.",icon:"error",confirmButtonText:"OK"})}})}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(M.i),e.\u0275\u0275directiveInject(v),e.\u0275\u0275directiveInject(S._W))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-payble-amount"]],decls:32,vars:9,consts:[[1,"container-fluid"],["title","Pay Amount",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-12",3,"formGroup"],[1,"mb-3","col-lg-12"],["for","userId",1,"form-label"],["type","text","id","userId","formControlName","user_id","placeholder","Enter user ID",1,"form-control",3,"blur"],["class","text-danger",4,"ngIf"],["class","mt-1",4,"ngIf"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter amount","min","1",1,"form-control"],[1,"mb-3","col-lg-6"],["for","payment_method",1,"form-label"],["id","payment_method","formControlName","payment_method",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],["for","transaction_id",1,"form-label"],["type","text","id","transaction_id","formControlName","transaction_id","placeholder","Enter Transanction Id","min","1",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"text-danger"],[4,"ngIf"],[1,"mt-1"],[3,"ngValue"]],template:function(t,n){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",2)(8,"div",7)(9,"label",8),e.\u0275\u0275text(10,"User ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"input",9),e.\u0275\u0275listener("blur",function(){return n.getUserDetails()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,tt,2,1,"div",10),e.\u0275\u0275template(13,nt,11,4,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",7)(15,"label",12),e.\u0275\u0275text(16,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"input",13),e.\u0275\u0275template(18,it,4,3,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",14)(20,"label",15),e.\u0275\u0275text(21,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"select",16),e.\u0275\u0275template(23,ot,2,2,"option",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(24,dt,2,1,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",14)(26,"label",18),e.\u0275\u0275text(27,"Transanction Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(28,"input",19),e.\u0275\u0275template(29,ct,2,1,"div",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"button",20),e.\u0275\u0275listener("click",function(){return n.payCreditCardFees()}),e.\u0275\u0275text(31,"Submit"),e.\u0275\u0275elementEnd()()()()()()()),2&t){let a,l,s,d;e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",n.payFormGroup),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==(a=n.payFormGroup.get("user_id"))?null:a.touched)&&(null==(a=n.payFormGroup.get("user_id"))?null:a.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.userDetails),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(l=n.payFormGroup.get("amount"))?null:l.touched)&&(null==(l=n.payFormGroup.get("amount"))?null:l.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.paymentMethods),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(s=n.payFormGroup.get("payment_method"))?null:s.touched)&&(null==(s=n.payFormGroup.get("payment_method"))?null:s.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(d=n.payFormGroup.get("transaction_id"))?null:d.touched)&&(null==(d=n.payFormGroup.get("transaction_id"))?null:d.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",n.payFormGroup.invalid)}},dependencies:[c.NgForOf,c.NgIf,C.V,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.qQ,o.sg,o.u,c.DecimalPipe]}),r})();function ut(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275element(1,"img",24),e.\u0275\u0275elementStart(2,"p",25),e.\u0275\u0275text(3,"No Transanction found."),e.\u0275\u0275elementEnd()())}function _t(r,i){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"date"),e.\u0275\u0275element(7,"br"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275element(10,"br"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td")(15,"span",35),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"titlecase"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"td"),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&r){const t=i.$implicit,n=i.index,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((a.page-1)*a.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(6,9,t.createdAt,"medium")," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",null==t||null==t.user_details?null:t.user_details.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",null==t||null==t.user_details?null:t.user_details.user_id,")"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.card_number),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass","expected"===t.type?"bg-primary":"bg-success"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,12,t.type)," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.description)}}function gt(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",26)(1,"table",27)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"S.No."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th",28),e.\u0275\u0275text(7,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Card Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Description"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"tbody"),e.\u0275\u0275template(19,_t,22,14,"ng-container",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",30)(21,"div",31)(22,"div",32),e.\u0275\u0275text(23,"Showing "),e.\u0275\u0275elementStart(24,"b"),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",31)(28,"div",33)(29,"ngb-pagination",34),e.\u0275\u0275listener("pageChange",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.page=a)})("pageChange",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.pageChange(a))}),e.\u0275\u0275elementEnd()()()()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(19),e.\u0275\u0275property("ngForOf",t.transactionList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)("maxSize",2)("ellipses",!0)}}let vt=(()=>{class r{constructor(t){this.creditCardService=t,this.transactionList=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"Credit Management"},{label:"Admin transanctions",active:!0}],this.getAdminTransactionList()}getAdminTransactionList(){this.creditCardService.getAdminCreditCardTransactions(this.page,this.pageSize).subscribe({next:t=>{this.transactionList=t.data.transactions,console.log("Transaction List:",this.transactionList),this.total=t.data.total},error:t=>{console.error("Error fetching transaction list:",t)}})}pageChange(t){this.page=t,this.getAdminTransactionList()}findPageShowing(){return(this.page-1)*this.pageSize+1}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(v))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-all-transanction"]],decls:28,vars:3,consts:[[1,"container-fluid"],["title","All Transanction",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","border-bottom"],[1,"row","g-3"],[1,"col-lg-6"],["type","search","id","searchInput","placeholder","Search for User Id...",1,"form-control"],[1,"col-lg-3"],[1,"form-control","select2"],["value",""],["value","Withdrawal"],["value","Deposit"],[1,"col-lg-2"],["type","button",1,"btn","btn-soft-secondary","w-100"],[1,"mdi","mdi-filter-outline","align-middle"],[1,"col-lg-1"],["href","javascript:void(0);",1,"btn","btn-light"],[1,"mdi","mdi-refresh"],[1,"card-body"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[2,"width","20%"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","maxSize","ellipses","pageChange"],[1,"badge",3,"ngClass"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e.\u0275\u0275element(8,"input",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",9)(10,"select",10)(11,"option",11),e.\u0275\u0275text(12,"Select Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"option",12),e.\u0275\u0275text(14,"Withdrawal"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"option",13),e.\u0275\u0275text(16,"Deposit"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",14)(18,"button",15),e.\u0275\u0275element(19,"i",16),e.\u0275\u0275text(20," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",17)(22,"a",18),e.\u0275\u0275element(23,"i",19),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(24,"div",20)(25,"div",2),e.\u0275\u0275template(26,ut,4,0,"div",21),e.\u0275\u0275template(27,gt,30,9,"div",22),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(25),e.\u0275\u0275property("ngIf",!n.transactionList||0===n.transactionList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.transactionList&&n.transactionList.length>0))},dependencies:[c.NgClass,c.NgForOf,c.NgIf,C.V,o.YN,o.Kr,_.N9,c.TitleCasePipe,c.DatePipe]}),r})();var Ct=u(2164),ft=u(3089);function xt(r,i){1&r&&e.\u0275\u0275element(0,"i",28)}function ht(r,i){1&r&&e.\u0275\u0275element(0,"i",29)}function bt(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275element(1,"img",31),e.\u0275\u0275elementStart(2,"p",32),e.\u0275\u0275text(3,"No Card Number found."),e.\u0275\u0275elementEnd()())}function St(r,i){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275elementContainerEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.assigned_user.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" (",t.assigned_user.user_id,") ")}}function yt(r,i){1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementContainerEnd())}function Et(r,i){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementContainerEnd()),2&r){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.assigned_on)," ")}}function It(r,i){1&r&&e.\u0275\u0275text(0,"-")}const wt=function(r,i,t){return{"badge-soft-warning":r,"badge-soft-success":i,"badge-soft-danger":t}};function Rt(r,i){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td")(7,"span",41),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275template(13,St,4,2,"ng-container",42),e.\u0275\u0275template(14,yt,2,0,"ng-container",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275template(16,Et,3,3,"ng-container",43),e.\u0275\u0275template(17,It,1,0,"ng-template",null,44,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&r){const t=i.$implicit,n=i.index,a=e.\u0275\u0275reference(18),l=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((l.page-1)*l.pageSize+n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.card_number),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(11,wt,t.assigned_on,!t.assigned_on&&t.status,!t.assigned_on&&!t.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.assigned_on?"Used":t.status?"Active":"InActive"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,9,t.created_date)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.assigned_user),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.assigned_user),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.assigned_on)("ngIfElse",a)}}function Tt(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",33)(1,"table",34)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"S.No."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"Card Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Assigned To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Assigned On"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"tbody"),e.\u0275\u0275template(17,Rt,19,15,"ng-container",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",36)(19,"div",37)(20,"div",38),e.\u0275\u0275text(21,"Showing "),e.\u0275\u0275elementStart(22,"b"),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",37)(26,"div",39)(27,"ngb-pagination",40),e.\u0275\u0275listener("pageChange",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.page=a)})("pageChange",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.pageChange(a))}),e.\u0275\u0275elementEnd()()()()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(17),e.\u0275\u0275property("ngForOf",t.pinList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}function Ft(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",64),e.\u0275\u0275text(1," Please select number of pins. "),e.\u0275\u0275elementEnd())}function Pt(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",45)(1,"h5",46),e.\u0275\u0275text(2,"Add Pins"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",47),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",48)(5,"div",49)(6,"div",50)(7,"label",51),e.\u0275\u0275text(8,"No of Pins to Create"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"select",52)(10,"option",53),e.\u0275\u0275text(11,"Choose..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"option",54),e.\u0275\u0275text(13,"5"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"option",55),e.\u0275\u0275text(15,"10"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"option",56),e.\u0275\u0275text(17,"20"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"option",57),e.\u0275\u0275text(19,"25"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"option",58),e.\u0275\u0275text(21,"50"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"option",59),e.\u0275\u0275text(23,"100"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(24,Ft,2,0,"div",60),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",61)(26,"button",62),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Close click"))}),e.\u0275\u0275text(27,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"button",63),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.createPins())}),e.\u0275\u0275text(29,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.addPinFormGroup),e.\u0275\u0275advance(20),e.\u0275\u0275property("ngIf",(null==(n=t.addPinFormGroup.get("no_of_pins"))?null:n.touched)&&(null==(n=t.addPinFormGroup.get("no_of_pins"))?null:n.hasError("required"))),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.addPinFormGroup.invalid)}}function At(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",68)(1,"small")(2,"strong"),e.\u0275\u0275text(3,"Name:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"br"),e.\u0275\u0275elementEnd()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.userDetails.name,"")}}function Lt(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",64),e.\u0275\u0275text(1," Assigned To is required. "),e.\u0275\u0275elementEnd())}function kt(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",64),e.\u0275\u0275text(1," User not found. Please enter a valid User ID. "),e.\u0275\u0275elementEnd())}function Mt(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",45)(1,"h5",46),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",47),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",48)(5,"div",49)(6,"div",50)(7,"label",65),e.\u0275\u0275text(8,"Assigned To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",66),e.\u0275\u0275listener("blur",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.getUserDetails())})("ngModelChange",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.userIDText=a)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,At,6,1,"div",67),e.\u0275\u0275template(11,Lt,2,0,"div",60),e.\u0275\u0275template(12,kt,2,0,"div",60),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",61)(14,"button",62),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.close("Close click"))}),e.\u0275\u0275text(15,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",63),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.assignPins())}),e.\u0275\u0275text(17,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&r){const t=e.\u0275\u0275nextContext();let n,a;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Assign Pins (No of Pin Selected : ",t.pinSelected.length,") "),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t.assignFormGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",t.userIDText),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.userDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(n=t.assignFormGroup.get("assign_to"))?null:n.touched)&&(null==(n=t.assignFormGroup.get("assign_to"))||null==n.errors?null:n.errors.required)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(a=t.assignFormGroup.get("assign_to"))?null:a.touched)&&(null==(a=t.assignFormGroup.get("assign_to"))||null==a.errors?null:a.errors.userNotFound)),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.assignFormGroup.invalid)}}function Nt(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",3)(1,"div",37)(2,"div",5)(3,"div",13)(4,"div",38)(5,"div",39)(6,"p",40),e.\u0275\u0275text(7,"Total Credit Cards"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"h4",41),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"number"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",42),e.\u0275\u0275element(12,"i",43),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(13,"div",37)(14,"div",5)(15,"div",13)(16,"div",38)(17,"div",39)(18,"p",40),e.\u0275\u0275text(19,"Total Credit Limit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"h4",41),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",44),e.\u0275\u0275element(23,"i",45),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(24,"div",37)(25,"div",5)(26,"div",13)(27,"div",38)(28,"div",39)(29,"p",40),e.\u0275\u0275text(30,"Total Outstanding"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"h4",41),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",46),e.\u0275\u0275element(34,"i",47),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(35,"div",37)(36,"div",5)(37,"div",13)(38,"div",38)(39,"div",39)(40,"p",40),e.\u0275\u0275text(41,"Overall Utilization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"h4",41),e.\u0275\u0275text(43),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",48),e.\u0275\u0275element(45,"i",49),e.\u0275\u0275elementEnd()()()()()()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,4,t.summary.totalCards)),e.\u0275\u0275advance(12),e.\u0275\u0275textInterpolate(t.formatCurrency(t.summary.totalCreditLimit)),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(t.formatCurrency(t.summary.totalOutstandingAmount)),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate1("",t.summary.overallUtilizationRate,"%")}}function Ot(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",3)(1,"div",50)(2,"div",5)(3,"div",13)(4,"div",38)(5,"div",39)(6,"p",40),e.\u0275\u0275text(7,"High Risk Cards"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"h4",51),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"number"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",52),e.\u0275\u0275element(12,"i",53),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(13,"div",50)(14,"div",5)(15,"div",13)(16,"div",38)(17,"div",39)(18,"p",40),e.\u0275\u0275text(19,"Cards with Outstanding"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"h4",54),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"number"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",46),e.\u0275\u0275element(24,"i",55),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(25,"div",50)(26,"div",5)(27,"div",13)(28,"div",38)(29,"div",39)(30,"p",40),e.\u0275\u0275text(31,"Cards with Penalty"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"h4",51),e.\u0275\u0275text(33),e.\u0275\u0275pipe(34,"number"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"div",52),e.\u0275\u0275element(36,"i",56),e.\u0275\u0275elementEnd()()()()()()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,3,t.summary.highRiskCards)),e.\u0275\u0275advance(12),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(22,5,t.summary.cardsWithOutstanding)),e.\u0275\u0275advance(12),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(34,7,t.summary.cardsWithPenalty))}}function Gt(r,i){1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Export CSV"),e.\u0275\u0275elementEnd())}function jt(r,i){1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Exporting..."),e.\u0275\u0275elementEnd())}function Vt(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function Ut(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function $t(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function Dt(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=i.$implicit;e.\u0275\u0275property("value",t.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.label)}}function zt(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",58)(1,"div",59)(2,"span",60),e.\u0275\u0275text(3,"Loading..."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"p",61),e.\u0275\u0275text(5,"Loading reports..."),e.\u0275\u0275elementEnd()())}function Bt(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"p",69),e.\u0275\u0275text(1," Interest: "),e.\u0275\u0275elementStart(2,"span",46),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&r){const t=e.\u0275\u0275nextContext().$implicit,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.formatCurrency(t.outstandingInterest))}}function Ht(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"p",77),e.\u0275\u0275text(1," Penalty: "),e.\u0275\u0275elementStart(2,"span",52),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&r){const t=e.\u0275\u0275nextContext().$implicit,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.formatCurrency(t.outstandingPenalty))}}function Yt(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small",44),e.\u0275\u0275text(1,"\u2713 No Outstanding"),e.\u0275\u0275elementEnd())}function Jt(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small",46),e.\u0275\u0275text(1,"\u26a0 Has Outstanding"),e.\u0275\u0275elementEnd())}function Kt(r,i){1&r&&(e.\u0275\u0275elementStart(0,"small",52),e.\u0275\u0275text(1,"\u26a0 Overdue"),e.\u0275\u0275elementEnd())}function Qt(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td")(2,"div")(3,"h6",66),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"p",67),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"p",67),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"span",68),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(11,"td")(12,"div")(13,"h6",66),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",67),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"p",67),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"span",68),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"td")(22,"div")(23,"p",66)(24,"strong"),e.\u0275\u0275text(25,"Used:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"p",66)(28,"strong"),e.\u0275\u0275text(29,"Available:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"p",41)(32,"strong"),e.\u0275\u0275text(33,"Utilization:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(34),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(35,"td")(36,"div")(37,"p",66)(38,"strong"),e.\u0275\u0275text(39,"Total:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"p",69),e.\u0275\u0275text(42),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(43,Bt,4,1,"p",70),e.\u0275\u0275template(44,Ht,4,1,"p",71),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"td")(46,"div")(47,"span",72),e.\u0275\u0275text(48),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"div",73),e.\u0275\u0275template(50,Yt,2,0,"small",74),e.\u0275\u0275template(51,Jt,2,0,"small",75),e.\u0275\u0275template(52,Kt,2,0,"small",76),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(53,"td")(54,"div")(55,"p",69),e.\u0275\u0275text(56),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"p",69),e.\u0275\u0275text(58),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(59,"p",77),e.\u0275\u0275text(60),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(61,"td")(62,"button",78),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(2),d=e.\u0275\u0275reference(100);return e.\u0275\u0275resetView(s.viewUserDetails(l.userId,l.cardId,d))}),e.\u0275\u0275element(63,"i",79),e.\u0275\u0275text(64," View Details "),e.\u0275\u0275elementEnd()()()}if(2&r){const t=i.$implicit,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.userName),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("ID: ",t.userIdDisplay,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.userEmail),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.getStatusClass(t.userStatus)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.userStatus),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.cardNumber),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Limit: ",n.formatCurrency(t.approvedLimit),""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Rate: ",t.interestRate,"%"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.getStatusClass(t.cardStatus)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.cardStatus),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",n.formatCurrency(t.totalCredit),""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",n.formatCurrency(t.availableCredit),""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.creditUtilization,"%"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",n.formatCurrency(t.totalOutstanding),""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Principal: ",n.formatCurrency(t.outstandingPrincipal),""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.outstandingInterest>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.outstandingPenalty>0),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",n.getRiskLevelClass(t.riskLevel)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.riskLevel," Risk"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.hasOutstandingAmount),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.hasOutstandingAmount&&!t.hasOverdueAmount),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.hasOverdueAmount),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("Transactions: ",t.totalTransactions,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Age: ",t.accountAge," days"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Last Activity: ",n.formatDate(t.lastTransactionDate),""),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",n.loadingDetail)}}function Wt(r,i){1&r&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",80),e.\u0275\u0275element(2,"i",81),e.\u0275\u0275elementStart(3,"p",82),e.\u0275\u0275text(4,"No credit card reports found"),e.\u0275\u0275elementEnd()()())}function Zt(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div",62)(1,"table",63)(2,"thead",64)(3,"tr")(4,"th"),e.\u0275\u0275text(5,"User Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"Card Info"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Credit Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Outstanding"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Risk & Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Activity"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Actions"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"tbody"),e.\u0275\u0275template(19,Qt,65,26,"tr",65),e.\u0275\u0275template(20,Wt,5,0,"tr",12),e.\u0275\u0275elementEnd()()()),2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(19),e.\u0275\u0275property("ngForOf",t.creditCardReports),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0===t.creditCardReports.length)}}function Xt(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",83)(1,"div",84)(2,"div")(3,"p",85),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(5,"div",84)(6,"div",86)(7,"ngb-pagination",87),e.\u0275\u0275listener("pageChange",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.currentPage=a)})("pageChange",function(a){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onPageChange(a))}),e.\u0275\u0275elementEnd()()()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate3(" Showing ",t.paginationStartIndex," to ",t.paginationEndIndex," of ",t.totalRecords," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("page",t.currentPage)("pageSize",t.limit)("collectionSize",t.totalRecords)("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function en(r,i){1&r&&(e.\u0275\u0275elementStart(0,"div",58),e.\u0275\u0275element(1,"div",59),e.\u0275\u0275elementStart(2,"p",61),e.\u0275\u0275text(3,"Loading detailed report..."),e.\u0275\u0275elementEnd()())}function tn(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td")(4,"span",101),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()()),2&r){const t=i.$implicit,n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.formatDate(t.created_date)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass","credit"===t.transaction_type?"bg-info":"payment"===t.transaction_type?"bg-success":"interest"===t.transaction_type?"bg-warning":"penalty"===t.transaction_type?"bg-danger":"bg-secondary"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.transaction_type," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.formatCurrency(t.amount)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.description||"N/A")}}function nn(r,i){1&r&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",103),e.\u0275\u0275text(2,"No recent transactions"),e.\u0275\u0275elementEnd()())}function rn(r,i){if(1&r&&(e.\u0275\u0275elementStart(0,"div")(1,"div",94)(2,"div",95)(3,"div",5)(4,"div",6)(5,"h5",96),e.\u0275\u0275text(6,"User Information"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",13)(8,"table",97)(9,"tr")(10,"td")(11,"strong"),e.\u0275\u0275text(12,"Name:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"td"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"tr")(16,"td")(17,"strong"),e.\u0275\u0275text(18,"User ID:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"td"),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"tr")(22,"td")(23,"strong"),e.\u0275\u0275text(24,"Email:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"td"),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"tr")(28,"td")(29,"strong"),e.\u0275\u0275text(30,"Phone:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"td"),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"tr")(34,"td")(35,"strong"),e.\u0275\u0275text(36,"Status:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"td")(38,"span",68),e.\u0275\u0275text(39),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(40,"div",95)(41,"div",5)(42,"div",6)(43,"h5",96),e.\u0275\u0275text(44,"Card Information"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"div",13)(46,"table",97)(47,"tr")(48,"td")(49,"strong"),e.\u0275\u0275text(50,"Card Number:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"td"),e.\u0275\u0275text(52),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(53,"tr")(54,"td")(55,"strong"),e.\u0275\u0275text(56,"Status:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(57,"td")(58,"span",68),e.\u0275\u0275text(59),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(60,"tr")(61,"td")(62,"strong"),e.\u0275\u0275text(63,"Credit Limit:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(64,"td"),e.\u0275\u0275text(65),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(66,"tr")(67,"td")(68,"strong"),e.\u0275\u0275text(69,"Interest Rate:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(70,"td"),e.\u0275\u0275text(71),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(72,"tr")(73,"td")(74,"strong"),e.\u0275\u0275text(75,"Start Date:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(76,"td"),e.\u0275\u0275text(77),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(78,"div",98)(79,"div",6)(80,"h5",96),e.\u0275\u0275text(81,"Financial Summary"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(82,"div",13)(83,"div",3)(84,"div",99)(85,"h6"),e.\u0275\u0275text(86,"Credit Usage"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(87,"table",97)(88,"tr")(89,"td"),e.\u0275\u0275text(90,"Credit Limit:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(91,"td")(92,"strong"),e.\u0275\u0275text(93),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(94,"tr")(95,"td"),e.\u0275\u0275text(96,"Credit Used:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(97,"td")(98,"strong"),e.\u0275\u0275text(99),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(100,"tr")(101,"td"),e.\u0275\u0275text(102,"Available Credit:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(103,"td")(104,"strong"),e.\u0275\u0275text(105),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(106,"tr")(107,"td"),e.\u0275\u0275text(108,"Utilization:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(109,"td")(110,"strong"),e.\u0275\u0275text(111),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(112,"div",99)(113,"h6"),e.\u0275\u0275text(114,"Outstanding Amounts"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(115,"table",97)(116,"tr")(117,"td"),e.\u0275\u0275text(118,"Total Outstanding:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(119,"td")(120,"strong",42),e.\u0275\u0275text(121),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(122,"tr")(123,"td"),e.\u0275\u0275text(124,"Principal:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(125,"td"),e.\u0275\u0275text(126),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(127,"tr")(128,"td"),e.\u0275\u0275text(129,"Interest:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(130,"td")(131,"span",46),e.\u0275\u0275text(132),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(133,"tr")(134,"td"),e.\u0275\u0275text(135,"Penalty:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(136,"td")(137,"span",52),e.\u0275\u0275text(138),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(139,"div",99)(140,"h6"),e.\u0275\u0275text(141,"Payment History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(142,"table",97)(143,"tr")(144,"td"),e.\u0275\u0275text(145,"Total Payments:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(146,"td")(147,"strong"),e.\u0275\u0275text(148),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(149,"tr")(150,"td"),e.\u0275\u0275text(151,"Payment Ratio:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(152,"td"),e.\u0275\u0275text(153),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(154,"tr")(155,"td"),e.\u0275\u0275text(156,"Interest Paid:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(157,"td"),e.\u0275\u0275text(158),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(159,"tr")(160,"td"),e.\u0275\u0275text(161,"Penalty Paid:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(162,"td"),e.\u0275\u0275text(163),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(164,"div",94)(165,"div",95)(166,"div",5)(167,"div",6)(168,"h5",96),e.\u0275\u0275text(169,"Account Health"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(170,"div",13)(171,"div",100)(172,"strong"),e.\u0275\u0275text(173,"Risk Level: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(174,"span",68),e.\u0275\u0275text(175),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(176,"table",97)(177,"tr")(178,"td"),e.\u0275\u0275text(179,"Account Active:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(180,"td")(181,"span",101),e.\u0275\u0275text(182),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(183,"tr")(184,"td"),e.\u0275\u0275text(185,"Has Outstanding:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(186,"td")(187,"span",101),e.\u0275\u0275text(188),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(189,"tr")(190,"td"),e.\u0275\u0275text(191,"Has Overdue:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(192,"td")(193,"span",101),e.\u0275\u0275text(194),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(195,"tr")(196,"td"),e.\u0275\u0275text(197,"Account Age:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(198,"td"),e.\u0275\u0275text(199),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(200,"div",95)(201,"div",5)(202,"div",6)(203,"h5",96),e.\u0275\u0275text(204,"Transaction Statistics"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(205,"div",13)(206,"table",97)(207,"tr")(208,"td"),e.\u0275\u0275text(209,"Total Transactions:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(210,"td")(211,"strong"),e.\u0275\u0275text(212),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(213,"tr")(214,"td"),e.\u0275\u0275text(215,"Credit Transactions:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(216,"td"),e.\u0275\u0275text(217),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(218,"tr")(219,"td"),e.\u0275\u0275text(220,"Payment Transactions:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(221,"td"),e.\u0275\u0275text(222),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(223,"tr")(224,"td"),e.\u0275\u0275text(225,"Interest Transactions:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(226,"td"),e.\u0275\u0275text(227),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(228,"tr")(229,"td"),e.\u0275\u0275text(230,"Penalty Transactions:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(231,"td"),e.\u0275\u0275text(232),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(233,"tr")(234,"td"),e.\u0275\u0275text(235,"First Transaction:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(236,"td"),e.\u0275\u0275text(237),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(238,"tr")(239,"td"),e.\u0275\u0275text(240,"Last Transaction:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(241,"td"),e.\u0275\u0275text(242),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(243,"div",5)(244,"div",6)(245,"h5",96),e.\u0275\u0275text(246,"Recent Transactions (Last 10)"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(247,"div",13)(248,"div",62)(249,"table",102)(250,"thead")(251,"tr")(252,"th"),e.\u0275\u0275text(253,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(254,"th"),e.\u0275\u0275text(255,"Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(256,"th"),e.\u0275\u0275text(257,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(258,"th"),e.\u0275\u0275text(259,"Description"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(260,"tbody"),e.\u0275\u0275template(261,tn,10,5,"tr",65),e.\u0275\u0275template(262,nn,3,0,"tr",12),e.\u0275\u0275elementEnd()()()()()()),2&r){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(14),e.\u0275\u0275textInterpolate(t.selectedUserReport.userInfo.name),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.selectedUserReport.userInfo.userIdDisplay),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.selectedUserReport.userInfo.email),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.selectedUserReport.userInfo.phone),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",t.getStatusClass(t.selectedUserReport.userInfo.userStatus)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.selectedUserReport.userInfo.userStatus),e.\u0275\u0275advance(13),e.\u0275\u0275textInterpolate(t.selectedUserReport.cardInfo.cardNumber),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",t.getStatusClass(t.selectedUserReport.cardInfo.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.selectedUserReport.cardInfo.status),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedUserReport.cardInfo.approvedLimit)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1("",t.selectedUserReport.cardInfo.interestRate,"%"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.formatDate(t.selectedUserReport.cardInfo.startDate)),e.\u0275\u0275advance(16),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedUserReport.financialSummary.creditLimit)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedUserReport.financialSummary.totalCreditUsed)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedUserReport.financialSummary.availableCredit)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.selectedUserReport.financialSummary.creditUtilization),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedUserReport.financialSummary.totalOutstanding)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedUserReport.financialSummary.outstandingPrincipal)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedUserReport.financialSummary.outstandingInterest)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedUserReport.financialSummary.outstandingPenalty)),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedUserReport.financialSummary.totalPaymentsMade)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selectedUserReport.financialSummary.paymentToDebtRatio),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedUserReport.financialSummary.totalInterestPaid)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.formatCurrency(t.selectedUserReport.financialSummary.totalPenaltyPaid)),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngClass",t.getRiskLevelClass(t.selectedUserReport.accountHealth.riskLevel)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.selectedUserReport.accountHealth.riskLevel," "),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",t.selectedUserReport.accountHealth.isActive?"bg-success":"bg-danger"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.selectedUserReport.accountHealth.isActive?"Yes":"No"),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",t.selectedUserReport.accountHealth.hasOutstanding?"bg-warning":"bg-success"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.selectedUserReport.accountHealth.hasOutstanding?"Yes":"No"),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",t.selectedUserReport.accountHealth.hasOverdue?"bg-danger":"bg-success"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.selectedUserReport.accountHealth.hasOverdue?"Yes":"No"),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",t.selectedUserReport.accountHealth.accountAge," days"),e.\u0275\u0275advance(13),e.\u0275\u0275textInterpolate(t.selectedUserReport.transactionStats.totalTransactions),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selectedUserReport.transactionStats.creditTransactions),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selectedUserReport.transactionStats.paymentTransactions),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selectedUserReport.transactionStats.interestTransactions),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selectedUserReport.transactionStats.penaltyTransactions),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.formatDate(t.selectedUserReport.transactionStats.firstTransactionDate)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.formatDate(t.selectedUserReport.transactionStats.lastTransactionDate)),e.\u0275\u0275advance(19),e.\u0275\u0275property("ngForOf",t.selectedUserReport.recentActivity.recentTransactions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0===(null==t.selectedUserReport.recentActivity.recentTransactions?null:t.selectedUserReport.recentActivity.recentTransactions.length))}}function an(r,i){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",88)(1,"h4",89),e.\u0275\u0275text(2,"Comprehensive Credit Card Report"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",90),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.dismiss())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",91),e.\u0275\u0275template(5,en,4,0,"div",33),e.\u0275\u0275template(6,rn,263,42,"div",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",92)(8,"button",93),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(l.dismiss())}),e.\u0275\u0275text(9,"Close"),e.\u0275\u0275elementEnd()()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.loadingDetail),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.selectedUserReport&&!t.loadingDetail)}}const ln=[{path:"list",component:(()=>{class r{constructor(t,n,a,l,s){this.modalService=t,this.toast=n,this.creditCardService=a,this.userService=l,this.pinService=s,this.searchTerm="",this.userIDText="",this.userDetails=null,this.pinList=[],this.total=0,this.page=1,this.pageSize=10,this.userList=[],this.dateRangeOptions={mode:"range",dateFormat:"Y-m-d",maxDate:new Date,defaultDate:[new Date(Date.now()-2592e6),new Date],placeholder:"Select date range for export",allowInput:!0,onChange:(d,f,m)=>{2===d.length&&(this.selectedDateRange=d)}},this.selectedDateRange=[],this.exportLoading=!1,this.pinSelected=[]}ngOnInit(){this.breadCrumbItems=[{label:"Card List Management"},{label:"Manage",active:!0}],this.addPinFormGroup=new o.cw({no_of_pins:new o.NI("",o.kI.required)}),this.assignFormGroup=new o.cw({assign_to:new o.NI("",o.kI.required)}),this.getPins()}ngAfterViewInit(){const t=document.getElementById("dateRangePicker");t&&(this.dateRangePicker=(0,Ct.Z)(t,this.dateRangeOptions))}getUserDetails(){this.userIDText?this.userService.getBasicUserProfile(this.userIDText).subscribe({next:t=>{t.status&&(this.userDetails=t?.data?.user,this.userDetails||this.assignFormGroup.get("assign_to")?.setErrors({userNotFound:!0}))},error:t=>{console.error("Error fetching user details:",t)}}):this.userDetails=null}openModal(t){this.modalService.open(t)}getPins(){this.creditCardService.getCreditCardNumberList(this.page,this.pageSize,this.searchTerm).subscribe(t=>{t&&t.data?(this.pinList=t?.data?.cardNumbers||[],this.total=t?.data?.total||0):this.pinList=[]},t=>{console.error("Error fetching pin list:",t),this.pinList=[]})}onSearch(t){this.searchTerm=t.target.value.toLowerCase(),this.page=1,this.getPins()}pinChecked(t){t.target.checked?this.pinSelected.push(t.target.value):this.pinSelected=this.pinSelected.filter(n=>n!==t.target.value),console.log("Selected Pins:",this.pinSelected)}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getPins()}exportCardList(){if(2!==this.selectedDateRange.length)return void this.toast.error("Please select a valid date range for export");this.exportLoading=!0;const t=this.formatDate(this.selectedDateRange[0]),n=this.formatDate(this.selectedDateRange[1]);this.creditCardService.exportCardList(t,n).subscribe(a=>{const l=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=window.URL.createObjectURL(l),d=document.createElement("a");d.href=s,d.download=`card_list_${t}_to_${n}.xlsx`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(s),this.toast.success("Card list exported successfully"),this.exportLoading=!1},a=>{console.error("Error exporting card list:",a),this.toast.error("Failed to export card list"),this.exportLoading=!1})}formatDate(t){return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}createPins(){this.addPinFormGroup.invalid?this.toast.error("Please fill all required fields"):this.creditCardService.generateCreditCardNumber(this.addPinFormGroup.value.no_of_pins).subscribe({next:t=>{this.toast.success("Sahyog Card no created successfully"),this.addPinFormGroup.reset(),this.getPins(),this.modalService.dismissAll()},error:t=>{this.toast.error("Failed to create pins")}})}assignPins(){this.assignFormGroup.invalid||0===this.pinSelected.length?this.toast.error("Please select pins and assign to a user"):this.pinService.assignPins({assign_to:this.userDetails?._id,pins:this.pinSelected}).subscribe({next:n=>{this.toast.success("Pins assigned successfully"),this.assignFormGroup.reset(),this.pinSelected=[],this.modalService.dismissAll(),this.getPins()},error:n=>{this.toast.error("Failed to assign pins")}})}disablePin(t){g().fire({title:"Are you sure?",text:"You want to disable this pin?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, disable it!"}).then(n=>{n.isConfirmed&&this.pinService.inactivePin(t,{status:"Inactive"}).subscribe({next:a=>{this.getPins(),this.toast.success("Pin disabled successfully"),this.modalService.dismissAll()},error:a=>{this.toast.error("Failed to disable pin")}})})}enablePin(t){g().fire({title:"Are you sure?",text:"You want to enable this pin?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, enable it!"}).then(n=>{n.isConfirmed&&this.pinService.inactivePin(t,{status:"Active"}).subscribe({next:a=>{this.getPins(),this.toast.success("Pin disabled successfully"),this.modalService.dismissAll()},error:a=>{this.toast.error("Failed to disable pin")}})})}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(_.FF),e.\u0275\u0275directiveInject(S._W),e.\u0275\u0275directiveInject(v),e.\u0275\u0275directiveInject(M.i),e.\u0275\u0275directiveInject(ft.a))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-card-list"]],decls:32,vars:6,consts:[[1,"container-fluid"],["title","Card List",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body","border-bottom"],[1,"row","mb-0"],[1,"col-sm-4"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","autocomplete","off","id","searchTableList","placeholder","Search...",1,"form-control",3,"keydown.enter"],[1,"bx","bx-search-alt","search-icon"],[1,"col-sm-8"],[1,"text-sm-end"],[1,"d-flex","justify-content-end","align-items-center","gap-2"],[1,"input-group","mb-2",2,"width","300px"],["type","text","id","dateRangePicker","placeholder","Select date range for export",1,"form-control"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],["class","bx bx-download",4,"ngIf"],["class","bx bx-loader-alt bx-spin",4,"ngIf"],["type","button",1,"btn","btn-success","btn-rounded","mb-2","me-2",3,"click"],[1,"mdi","mdi-plus","mr-1"],[1,"card-body"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],["role","document"],["addPinModal",""],["assignModal",""],[1,"bx","bx-download"],[1,"bx","bx-loader-alt","bx-spin"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],[1,"badge","font-size-11","m-1",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noDate",""],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"formGroup"],[1,"modal-body"],[1,"mb-3"],["for","noOfPins",1,"form-label"],["id","noOfPins","formControlName","no_of_pins",1,"form-select"],["value",""],["value","5"],["value","10"],["value","20"],["value","25"],["value","50"],["value","100"],["class","text-danger mt-1",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light",3,"disabled","click"],[1,"text-danger","mt-1"],["for","assignedTo",1,"form-label"],["type","text","id","messageTitle","formControlName","assign_to","placeholder","Enter User ID","required","",1,"form-control",3,"ngModel","blur","ngModelChange"],["class","mt-1",4,"ngIf"],[1,"mt-1"]],template:function(t,n){if(1&t){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"input",10),e.\u0275\u0275listener("keydown.enter",function(s){return n.onSearch(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"i",11),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(12,"div",12)(13,"div",13)(14,"div",14)(15,"div",15),e.\u0275\u0275element(16,"input",16),e.\u0275\u0275elementStart(17,"button",17),e.\u0275\u0275listener("click",function(){return n.exportCardList()}),e.\u0275\u0275template(18,xt,1,0,"i",18),e.\u0275\u0275template(19,ht,1,0,"i",19),e.\u0275\u0275text(20," Export Excel "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"button",20),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(a);const s=e.\u0275\u0275reference(29);return e.\u0275\u0275resetView(n.openModal(s))}),e.\u0275\u0275element(22,"i",21),e.\u0275\u0275text(23," Add Card Number "),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(24,"div",22)(25,"div",2),e.\u0275\u0275template(26,bt,4,0,"div",23),e.\u0275\u0275template(27,Tt,28,7,"div",24),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(28,Pt,30,3,"ng-template",25,26,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(30,Mt,18,7,"ng-template",25,27,e.\u0275\u0275templateRefExtractor)}2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(16),e.\u0275\u0275property("disabled",n.exportLoading||2!==n.selectedDateRange.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.exportLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.exportLoading),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",!n.pinList||0===n.pinList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==n.pinList.length))},dependencies:[c.NgClass,c.NgForOf,c.NgIf,C.V,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.Q7,o.sg,o.u,_.N9,c.DatePipe]}),r})()},{path:"request",component:pe},{path:"assigned-card-list",component:Qe},{path:"request-amount",component:Xe},{path:"payable-amount",component:pt},{path:"all-transanction",component:vt},{path:"reports",component:(()=>{class r{constructor(t,n){this.creditCardService=t,this.modalService=n,this.creditCardReports=[],this.summary={},this.currentPage=1,this.totalPages=0,this.totalRecords=0,this.limit=20,this.loading=!1,this.loadingDetail=!1,this.filters={search:"",status:"",riskLevel:"",creditLimitMin:"",creditLimitMax:"",outstandingMin:"",outstandingMax:"",utilizationMin:"",utilizationMax:"",hasOutstanding:"",hasOverdue:"",hasPenalty:"",userStatus:"",sortBy:"created_date",sortOrder:"desc",includeZeroBalance:!0},this.statusOptions=["Active","Inactive","Blocked","Pending"],this.riskLevelOptions=["High","Medium","Low"],this.userStatusOptions=["Active","Inactive","Blocked"],this.sortOptions=[{value:"created_date",label:"Card Creation Date"},{value:"userName",label:"User Name"},{value:"totalOutstanding",label:"Outstanding Amount"},{value:"creditUtilization",label:"Credit Utilization"},{value:"approvedLimit",label:"Credit Limit"},{value:"lastTransactionDate",label:"Last Transaction"}],this.selectedUserReport=null,this.isExporting=!1}ngOnInit(){this.breadCrumbItems=[{label:"Sahyog Card"},{label:"Reports",active:!0}],this.loadReports()}loadReports(t=1){this.loading=!0,this.currentPage=t;const n={...this.filters,page:this.currentPage,limit:this.limit};this.creditCardService.getAllUsersCreditCardReport(n).subscribe({next:a=>{"success"===a.status&&(console.log("Report Response:",a),this.creditCardReports=a.data,this.summary=a.summary,this.totalPages=a.pagination.totalPages,this.totalRecords=a.pagination.totalRecords),this.loading=!1},error:a=>{console.error("Error loading reports:",a),this.loading=!1}})}onFilterChange(){this.currentPage=1,this.loadReports()}clearFilters(){this.filters={search:"",status:"",riskLevel:"",creditLimitMin:"",creditLimitMax:"",outstandingMin:"",outstandingMax:"",utilizationMin:"",utilizationMax:"",hasOutstanding:"",hasOverdue:"",hasPenalty:"",userStatus:"",sortBy:"created_date",sortOrder:"desc",includeZeroBalance:!0},this.loadReports()}onPageChange(t){this.loadReports(t)}viewUserDetails(t,n,a){this.loadingDetail=!0,this.selectedUserReport=null,this.creditCardService.getUserComprehensiveReport(t,n).subscribe({next:l=>{"success"===l.status&&(this.selectedUserReport=l.data,this.modalService.open(a,{size:"xl",scrollable:!0})),this.loadingDetail=!1},error:l=>{console.error("Error loading user details:",l),this.loadingDetail=!1}})}getRiskLevelClass(t){switch(t){case"High":return"badge bg-danger";case"Medium":return"badge bg-warning";case"Low":return"badge bg-success";default:return"badge bg-secondary"}}getStatusClass(t){switch(t){case"Active":return"badge bg-success";case"Inactive":default:return"badge bg-secondary";case"Blocked":return"badge bg-danger";case"Pending":return"badge bg-warning"}}formatCurrency(t){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:3}).format(t||0)}formatDate(t){return t?new Date(t).toLocaleDateString("en-IN"):"N/A"}get paginationEndIndex(){return Math.min(this.currentPage*this.limit,this.totalRecords)}get paginationStartIndex(){return(this.currentPage-1)*this.limit+1}exportReport(){this.isExporting=!0;const t={...this.filters,limit:1e4,page:1};this.creditCardService.getAllUsersCreditCardReport(t).subscribe({next:n=>{"success"===n.status&&this.downloadCSV(n.data),this.isExporting=!1},error:n=>{console.error("Error exporting report:",n),this.isExporting=!1}})}downloadCSV(t){const l=[["User ID","User Name","Email","Phone","User Status","Card Number","Card Status","Credit Limit","Interest Rate","Total Credit Used","Total Payments","Available Credit","Credit Utilization %","Outstanding Principal","Outstanding Interest","Outstanding Penalty","Total Outstanding","Risk Level","Total Transactions","Account Age (Days)","Last Transaction Date"],...t.map(m=>[m.userIdDisplay,m.userName,m.userEmail,m.userPhone,m.userStatus,m.cardNumber,m.cardStatus,m.approvedLimit,m.interestRate,m.totalCredit,m.totalPayments,m.availableCredit,m.creditUtilization,m.outstandingPrincipal,m.outstandingInterest,m.outstandingPenalty,m.totalOutstanding,m.riskLevel,m.totalTransactions,m.accountAge,this.formatDate(m.lastTransactionDate)])].map(m=>m.map(b=>`"${b}"`).join(",")).join("\n"),s=new Blob([l],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),f=URL.createObjectURL(s);d.setAttribute("href",f),d.setAttribute("download",`credit_card_report_${(new Date).toISOString().split("T")[0]}.csv`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(v),e.\u0275\u0275directiveInject(_.FF))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-reports"]],decls:101,vars:25,consts:[[1,"container-fluid"],["title","Sahyog Card Reports",3,"breadcrumbItems"],["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"d-flex","align-items-center"],[1,"card-title","mb-0","flex-grow-1"],[1,"flex-shrink-0"],["type","button",1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"ri-download-line","me-1"],[4,"ngIf"],[1,"card-body"],[1,"row","mb-3"],[1,"col-xl-3","col-lg-4","col-md-6","mb-2"],[1,"form-label"],["type","text","placeholder","Name, Email, Card Number...",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-xl-2","col-lg-3","col-md-6","mb-2"],[1,"form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","gap-2"],["value","desc"],["value","asc"],["type","number","placeholder","Min Amount",1,"form-control",3,"ngModel","ngModelChange"],["type","number","placeholder","Max Amount",1,"form-control",3,"ngModel","ngModelChange"],["type","number","placeholder","Min Outstanding",1,"form-control",3,"ngModel","ngModelChange"],["type","number","placeholder","Max Outstanding",1,"form-control",3,"ngModel","ngModelChange"],["value","true"],["value","false"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"ri-refresh-line","me-1"],["class","text-center py-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","row mt-3",4,"ngIf"],["userDetailModal",""],[1,"col-xl-3","col-md-6"],[1,"d-flex"],[1,"flex-1","overflow-hidden"],[1,"text-truncate","font-size-14","mb-2"],[1,"mb-0"],[1,"text-primary"],[1,"ri-bank-card-line","font-size-24"],[1,"text-success"],[1,"ri-money-rupee-circle-line","font-size-24"],[1,"text-warning"],[1,"ri-alert-line","font-size-24"],[1,"text-info"],[1,"ri-pie-chart-line","font-size-24"],[1,"col-xl-4","col-md-4"],[1,"mb-0","text-danger"],[1,"text-danger"],[1,"ri-error-warning-line","font-size-24"],[1,"mb-0","text-warning"],[1,"ri-time-line","font-size-24"],[1,"ri-close-circle-line","font-size-24"],[3,"value"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[1,"mt-2"],[1,"table-responsive"],[1,"table","table-nowrap","table-hover","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"mb-1"],[1,"text-muted","mb-0","font-size-12"],[3,"ngClass"],[1,"mb-1","font-size-12"],["class","mb-1 font-size-12",4,"ngIf"],["class","mb-0 font-size-12",4,"ngIf"],[1,"mb-2",3,"ngClass"],[1,"mt-1"],["class","text-success",4,"ngIf"],["class","text-warning",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"mb-0","font-size-12"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"disabled","click"],[1,"ri-eye-line","me-1"],["colspan","7",1,"text-center","py-4"],[1,"ri-inbox-line","font-size-48","text-muted"],[1,"mt-2","text-muted"],[1,"row","mt-3"],[1,"col-sm-6"],[1,"mb-sm-0"],[1,"float-sm-end"],[3,"page","pageSize","collectionSize","maxSize","rotate","boundaryLinks","pageChange"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body",2,"max-height","80vh","overflow-y","auto"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"row","mb-4"],[1,"col-md-6"],[1,"card-title","mb-0"],[1,"table","table-borderless","table-sm"],[1,"card","mb-4"],[1,"col-md-4"],[1,"mb-3"],[1,"badge",3,"ngClass"],[1,"table","table-sm"],["colspan","4",1,"text-center","text-muted"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275template(2,Nt,46,6,"div",2),e.\u0275\u0275template(3,Ot,37,9,"div",2),e.\u0275\u0275elementStart(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h4",8),e.\u0275\u0275text(10,"Credit Card Reports"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",9)(12,"button",10),e.\u0275\u0275listener("click",function(){return n.exportReport()}),e.\u0275\u0275element(13,"i",11),e.\u0275\u0275template(14,Gt,2,0,"span",12),e.\u0275\u0275template(15,jt,2,0,"span",12),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(16,"div",13)(17,"div",14)(18,"div",15)(19,"label",16),e.\u0275\u0275text(20,"Search"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"input",17),e.\u0275\u0275listener("ngModelChange",function(l){return n.filters.search=l})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",18)(23,"label",16),e.\u0275\u0275text(24,"Card Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"select",19),e.\u0275\u0275listener("ngModelChange",function(l){return n.filters.status=l})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementStart(26,"option",20),e.\u0275\u0275text(27,"All Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(28,Vt,2,2,"option",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",18)(30,"label",16),e.\u0275\u0275text(31,"Risk Level"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"select",19),e.\u0275\u0275listener("ngModelChange",function(l){return n.filters.riskLevel=l})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementStart(33,"option",20),e.\u0275\u0275text(34,"All Risk Levels"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(35,Ut,2,2,"option",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",18)(37,"label",16),e.\u0275\u0275text(38,"User Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"select",19),e.\u0275\u0275listener("ngModelChange",function(l){return n.filters.userStatus=l})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementStart(40,"option",20),e.\u0275\u0275text(41,"All Users"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(42,$t,2,2,"option",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"div",15)(44,"label",16),e.\u0275\u0275text(45,"Sort By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",22)(47,"select",19),e.\u0275\u0275listener("ngModelChange",function(l){return n.filters.sortBy=l})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275template(48,Dt,2,2,"option",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"select",19),e.\u0275\u0275listener("ngModelChange",function(l){return n.filters.sortOrder=l})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementStart(50,"option",23),e.\u0275\u0275text(51,"Desc"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"option",24),e.\u0275\u0275text(53,"Asc"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(54,"div",14)(55,"div",18)(56,"label",16),e.\u0275\u0275text(57,"Min Credit Limit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(58,"input",25),e.\u0275\u0275listener("ngModelChange",function(l){return n.filters.creditLimitMin=l})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"div",18)(60,"label",16),e.\u0275\u0275text(61,"Max Credit Limit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"input",26),e.\u0275\u0275listener("ngModelChange",function(l){return n.filters.creditLimitMax=l})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(63,"div",18)(64,"label",16),e.\u0275\u0275text(65,"Min Outstanding"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"input",27),e.\u0275\u0275listener("ngModelChange",function(l){return n.filters.outstandingMin=l})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(67,"div",18)(68,"label",16),e.\u0275\u0275text(69,"Max Outstanding"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(70,"input",28),e.\u0275\u0275listener("ngModelChange",function(l){return n.filters.outstandingMax=l})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(71,"div",18)(72,"label",16),e.\u0275\u0275text(73,"Has Outstanding"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"select",19),e.\u0275\u0275listener("ngModelChange",function(l){return n.filters.hasOutstanding=l})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementStart(75,"option",20),e.\u0275\u0275text(76,"All"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(77,"option",29),e.\u0275\u0275text(78,"Yes"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(79,"option",30),e.\u0275\u0275text(80,"No"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(81,"div",18)(82,"label",16),e.\u0275\u0275text(83,"Has Penalty"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(84,"select",19),e.\u0275\u0275listener("ngModelChange",function(l){return n.filters.hasPenalty=l})("ngModelChange",function(){return n.onFilterChange()}),e.\u0275\u0275elementStart(85,"option",20),e.\u0275\u0275text(86,"All"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(87,"option",29),e.\u0275\u0275text(88,"Yes"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(89,"option",30),e.\u0275\u0275text(90,"No"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(91,"div",14)(92,"div",4)(93,"button",31),e.\u0275\u0275listener("click",function(){return n.clearFilters()}),e.\u0275\u0275element(94,"i",32),e.\u0275\u0275text(95," Clear Filters "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(96,zt,6,0,"div",33),e.\u0275\u0275template(97,Zt,21,2,"div",34),e.\u0275\u0275template(98,Xt,8,9,"div",35),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(99,an,10,2,"ng-template",null,36,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.summary.totalCards),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.summary.totalCards),e.\u0275\u0275advance(9),e.\u0275\u0275property("disabled",n.isExporting),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!n.isExporting),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isExporting),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngModel",n.filters.search),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.status),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.statusOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.riskLevel),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.riskLevelOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.userStatus),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.userStatusOptions),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",n.filters.sortBy),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.sortOptions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",n.filters.sortOrder),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngModel",n.filters.creditLimitMin),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.creditLimitMax),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.outstandingMin),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.outstandingMax),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",n.filters.hasOutstanding),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngModel",n.filters.hasPenalty),e.\u0275\u0275advance(12),e.\u0275\u0275property("ngIf",n.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.totalPages>1))},dependencies:[c.NgClass,c.NgForOf,c.NgIf,C.V,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.On,_.N9,c.DecimalPipe],styles:[".table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:none;font-weight:600;color:#495057;font-size:.875rem}.table-responsive[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;padding:1rem .75rem}.filter-section[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:.375rem;padding:1.5rem;margin-bottom:1.5rem}.card[_ngcontent-%COMP%]{border:1px solid #e9ecef;border-radius:.375rem;box-shadow:0 .125rem .25rem #00000013}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #e9ecef;padding:1rem 1.25rem}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#495057;font-weight:600}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.25rem}.summary-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-left:4px solid}.summary-cards[_ngcontent-%COMP%]   .card.border-primary[_ngcontent-%COMP%]{border-left-color:#007bff}.summary-cards[_ngcontent-%COMP%]   .card.border-success[_ngcontent-%COMP%]{border-left-color:#28a745}.summary-cards[_ngcontent-%COMP%]   .card.border-warning[_ngcontent-%COMP%]{border-left-color:#ffc107}.summary-cards[_ngcontent-%COMP%]   .card.border-info[_ngcontent-%COMP%]{border-left-color:#17a2b8}.summary-cards[_ngcontent-%COMP%]   .card.border-danger[_ngcontent-%COMP%]{border-left-color:#dc3545}.badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500}.badge.bg-success[_ngcontent-%COMP%]{background-color:#198754!important}.badge.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#000}.badge.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.badge.bg-info[_ngcontent-%COMP%]{background-color:#0dcaf0!important;color:#000}.btn[_ngcontent-%COMP%]{border-radius:.375rem}.btn.btn-sm[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:.875rem}.modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{max-width:90vw}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e9ecef}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{color:#495057;font-weight:600}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1.5rem}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.font-size-12[_ngcontent-%COMP%]{font-size:.75rem!important}.font-size-14[_ngcontent-%COMP%]{font-size:.875rem!important}.font-size-24[_ngcontent-%COMP%]{font-size:1.5rem!important}.font-size-48[_ngcontent-%COMP%]{font-size:3rem!important}.risk-high[_ngcontent-%COMP%]{color:#dc3545;font-weight:600}.risk-medium[_ngcontent-%COMP%]{color:#ffc107;font-weight:600}.risk-low[_ngcontent-%COMP%]{color:#198754;font-weight:600}.spinner-border[_ngcontent-%COMP%]{width:2rem;height:2rem}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{font-size:.875rem}.card-body[_ngcontent-%COMP%]{padding:1rem}.modal-dialog[_ngcontent-%COMP%]{max-width:95vw;margin:.5rem}}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.text-truncate-custom[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:200px}"]}),r})()}];let on=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[k.Bz.forChild(ln),k.Bz]}),r})();var sn=u(9668),dn=u(150);let mn=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[c.CommonModule,sn.v,o.u5,dn.A0,on,o.UX,_.jF,_.bz]}),r})()}}]);
"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[483],{6483:(M,u,l)=>{l.r(u),l.d(u,{NoticeModule:()=>T});var m=l(6895),r=l(4006),p=l(9158),f=l(5226),v=l.n(f),t=l(4650),d=l(2340),g=l(529);let h=(()=>{class n{constructor(e){this.http=e}getAllNotices(){return this.http.get(`${d.N.api_url}notices`)}getActiveNotices(){return this.http.get(`${d.N.api_url}notices/active`)}createNotice(e){return this.http.post(`${d.N.api_url}notices`,e)}updateNotice(e,i){return this.http.put(`${d.N.api_url}notices/${e}`,i)}deleteNotice(e){return this.http.delete(`${d.N.api_url}notices/${e}`)}toggleNoticeStatus(e){return this.http.patch(`${d.N.api_url}notices/${e}/toggle`,{})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(g.eN))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var N=l(7185),b=l(9234);function x(n,o){1&n&&(t.\u0275\u0275elementStart(0,"div",27),t.\u0275\u0275text(1," Title is required "),t.\u0275\u0275elementEnd())}function C(n,o){1&n&&(t.\u0275\u0275elementStart(0,"div",27),t.\u0275\u0275text(1," Title cannot exceed 500 characters "),t.\u0275\u0275elementEnd())}function S(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",28),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.cancelEdit())}),t.\u0275\u0275element(1,"i",29),t.\u0275\u0275text(2," Cancel "),t.\u0275\u0275elementEnd()}}function y(n,o){1&n&&(t.\u0275\u0275elementStart(0,"div",30)(1,"div",31)(2,"span",32),t.\u0275\u0275text(3,"Loading..."),t.\u0275\u0275elementEnd()()())}function _(n,o){1&n&&(t.\u0275\u0275elementStart(0,"div",33),t.\u0275\u0275element(1,"i",34),t.\u0275\u0275elementStart(2,"p",35),t.\u0275\u0275text(3,"No notices found"),t.\u0275\u0275elementEnd()())}function E(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr")(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td")(4,"div",44),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"td")(7,"span",45),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"td")(10,"small"),t.\u0275\u0275text(11),t.\u0275\u0275pipe(12,"date"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(13,"td")(14,"div",46)(15,"button",47),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,c=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(c.editNotice(a))}),t.\u0275\u0275element(16,"i",48),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"button",49),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,c=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(c.toggleStatus(a))}),t.\u0275\u0275element(18,"i",50),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"button",51),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,c=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(c.deleteNotice(a))}),t.\u0275\u0275element(20,"i",52),t.\u0275\u0275elementEnd()()()()}if(2&n){const e=o.$implicit,i=o.index;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(i+1),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.title),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",e.status?"bg-success":"bg-secondary"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.status?"Active":"Inactive"," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(12,8,e.created_date,"dd/MM/yyyy HH:mm")),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngClass",e.status?"btn-soft-warning":"btn-soft-success")("title",e.status?"Deactivate":"Activate"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",e.status?"mdi-eye-off":"mdi-eye")}}function I(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"div",36)(1,"table",37)(2,"thead",38)(3,"tr")(4,"th",39),t.\u0275\u0275text(5,"#"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"th"),t.\u0275\u0275text(7,"Title"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"th",40),t.\u0275\u0275text(9,"Status"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"th",41),t.\u0275\u0275text(11,"Created"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"th",42),t.\u0275\u0275text(13,"Actions"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(14,"tbody"),t.\u0275\u0275template(15,E,21,11,"tr",43),t.\u0275\u0275elementEnd()()()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(15),t.\u0275\u0275property("ngForOf",e.notices)}}const F=function(n){return{"is-invalid":n}},w=[{path:"",component:(()=>{class n{constructor(e,i){this.noticeService=e,this.toast=i,this.notices=[],this.loading=!1,this.isEditing=!1,this.editingId=null}ngOnInit(){this.breadCrumbItems=[{label:"Masters"},{label:"Notices",active:!0}],this.noticeForm=new r.cw({title:new r.NI("",[r.kI.required,r.kI.maxLength(500)]),status:new r.NI(!0)}),this.loadNotices()}loadNotices(){this.loading=!0,this.noticeService.getAllNotices().subscribe({next:e=>{e.status&&(this.notices=e.data),this.loading=!1},error:e=>{this.toast.error("Failed to load notices"),this.loading=!1}})}onSubmit(){if(this.noticeForm.invalid)return void this.noticeForm.markAllAsTouched();const e=this.noticeForm.value;this.isEditing&&this.editingId?this.noticeService.updateNotice(this.editingId,e).subscribe({next:i=>{i.status&&(this.toast.success("Notice updated successfully"),this.resetForm(),this.loadNotices())},error:i=>{this.toast.error(i.error?.message||"Failed to update notice")}}):this.noticeService.createNotice(e).subscribe({next:i=>{i.status&&(this.toast.success("Notice created successfully"),this.resetForm(),this.loadNotices())},error:i=>{this.toast.error(i.error?.message||"Failed to create notice")}})}editNotice(e){this.isEditing=!0,this.editingId=e._id,this.noticeForm.patchValue({title:e.title,status:e.status})}cancelEdit(){this.resetForm()}resetForm(){this.isEditing=!1,this.editingId=null,this.noticeForm.reset({title:"",status:!0})}toggleStatus(e){this.noticeService.toggleNoticeStatus(e._id).subscribe({next:i=>{i.status&&(this.toast.success(i.message),this.loadNotices())},error:i=>{this.toast.error("Failed to toggle status")}})}deleteNotice(e){v().fire({title:"Are you sure?",text:"You want to delete this notice?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(i=>{i.isConfirmed&&this.noticeService.deleteNotice(e._id).subscribe({next:s=>{s.status&&(this.toast.success("Notice deleted successfully"),this.loadNotices())},error:s=>{this.toast.error("Failed to delete notice")}})})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(h),t.\u0275\u0275directiveInject(N._W))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-notice-list"]],decls:42,vars:15,consts:[[1,"container-fluid"],["title","Manage Notices",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-4"],[1,"card"],[1,"card-body"],[1,"card-title","mb-4"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["id","title","formControlName","title","rows","4","placeholder","Enter notice title/content",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-label","d-block"],[1,"form-check","form-check-inline"],["type","radio","id","active","formControlName","status",1,"form-check-input",3,"value"],["for","active",1,"form-check-label"],["type","radio","id","inactive","formControlName","status",1,"form-check-input",3,"value"],["for","inactive",1,"form-check-label"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-primary"],[1,"mdi","mdi-content-save","me-1"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],[1,"col-lg-8"],["class","text-center py-4",4,"ngIf"],["class","text-center py-4 text-muted",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"invalid-feedback"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mdi","mdi-close","me-1"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-center","py-4","text-muted"],[1,"mdi","mdi-bell-off","mdi-48px"],[1,"mt-2"],[1,"table-responsive"],[1,"table","table-hover","mb-0"],[1,"table-light"],[2,"width","50px"],[2,"width","100px"],[2,"width","150px"],[2,"width","120px"],[4,"ngFor","ngForOf"],[1,"text-wrap",2,"max-width","400px"],[1,"badge",3,"ngClass"],[1,"d-flex","gap-1"],["title","Edit",1,"btn","btn-sm","btn-soft-primary",3,"click"],[1,"mdi","mdi-pencil"],[1,"btn","btn-sm",3,"ngClass","title","click"],[1,"mdi",3,"ngClass"],["title","Delete",1,"btn","btn-sm","btn-soft-danger",3,"click"],[1,"mdi","mdi-delete"]],template:function(e,i){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"app-page-title",1),t.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"form",7),t.\u0275\u0275listener("ngSubmit",function(){return i.onSubmit()}),t.\u0275\u0275elementStart(9,"div",8)(10,"label",9),t.\u0275\u0275text(11,"Notice Title "),t.\u0275\u0275elementStart(12,"span",10),t.\u0275\u0275text(13,"*"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"textarea",11),t.\u0275\u0275text(15,"              "),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,x,2,0,"div",12),t.\u0275\u0275template(17,C,2,0,"div",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"div",8)(19,"label",13),t.\u0275\u0275text(20,"Status"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"div",14),t.\u0275\u0275element(22,"input",15),t.\u0275\u0275elementStart(23,"label",16),t.\u0275\u0275text(24,"Active"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(25,"div",14),t.\u0275\u0275element(26,"input",17),t.\u0275\u0275elementStart(27,"label",18),t.\u0275\u0275text(28,"Inactive"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(29,"div",19)(30,"button",20),t.\u0275\u0275element(31,"i",21),t.\u0275\u0275text(32),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(33,S,3,0,"button",22),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(34,"div",23)(35,"div",4)(36,"div",5)(37,"h4",6),t.\u0275\u0275text(38,"All Notices"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(39,y,4,0,"div",24),t.\u0275\u0275template(40,_,4,0,"div",25),t.\u0275\u0275template(41,I,16,1,"div",26),t.\u0275\u0275elementEnd()()()()()),2&e){let s,a,c;t.\u0275\u0275advance(1),t.\u0275\u0275property("breadcrumbItems",i.breadCrumbItems),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(i.isEditing?"Edit Notice":"Add New Notice"),t.\u0275\u0275advance(1),t.\u0275\u0275property("formGroup",i.noticeForm),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(13,F,(null==(s=i.noticeForm.get("title"))?null:s.touched)&&(null==(s=i.noticeForm.get("title"))?null:s.invalid))),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==(a=i.noticeForm.get("title"))||null==a.errors?null:a.errors.required),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(c=i.noticeForm.get("title"))||null==c.errors?null:c.errors.maxlength),t.\u0275\u0275advance(5),t.\u0275\u0275property("value",!0),t.\u0275\u0275advance(4),t.\u0275\u0275property("value",!1),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",i.isEditing?"Update":"Save"," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.isEditing),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",i.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!i.loading&&0===i.notices.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!i.loading&&i.notices.length>0)}},dependencies:[m.NgClass,m.NgForOf,m.NgIf,r._Y,r.Fj,r._,r.JJ,r.JL,r.sg,r.u,b.V,m.DatePipe]}),n})()}];let k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[p.Bz.forChild(w),p.Bz]}),n})();var L=l(9668);let T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[m.CommonModule,r.u5,r.UX,k,L.v]}),n})()}}]);
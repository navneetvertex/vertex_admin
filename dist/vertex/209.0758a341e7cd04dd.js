"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[209],{5209:(Ct,I,d)=>{d.r(I),d.d(I,{LoanModule:()=>St});var c=d(6895),g=d(9158),l=d(4006),A=d(5226),h=d.n(A),V=d(5933),e=d(4650),p=d(2340),j=d(529);let x=(()=>{class n{constructor(t){this.http=t}getLoanList(t=0,a=10,o){return this.http.get(`${p.N.api_url}loans?${o}&page=${t}&limit=${a}`)}updateLoanStatus(t,a){return this.http.put(`${p.N.api_url}loans/${t}`,a)}getUserTransaction(t=0,a=10,o){return this.http.get(`${p.N.api_url}loans/user-transanction?${o}&page=${t}&limit=${a}`)}getAdminTransaction(t=0,a=10,o){return this.http.get(`${p.N.api_url}loans/admin-transanction?${o}&page=${t}&limit=${a}`)}getAllUserActiveLoans(t){return this.http.get(`${p.N.api_url}loans/getAllUserActiveLoans/${t}`)}getTotalPaymentAmount(t){return this.http.get(`${p.N.api_url}loans/getTotalPaymentAmount/${t}`)}recordPayment(t){return this.http.post(`${p.N.api_url}loans/record-payment`,t)}getLoanSchedule(t){return this.http.get(`${p.N.api_url}loans/schedule/${t}`)}getPersonalLoanSchedule(t){return this.http.get(`${p.N.api_url}loans/personal/schedule/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(j.eN))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=d(9061),S=d(9234);function B(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=r.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function M(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",31),e.\u0275\u0275element(1,"img",32),e.\u0275\u0275elementStart(2,"p",33),e.\u0275\u0275text(3,"No Loan found in the current filter."),e.\u0275\u0275elementEnd()())}const $=function(n,r,t,a){return{"badge-soft-primary":n,"badge-soft-warning":r,"badge-soft-danger":t,"badge-soft-secondary":a}};function D(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"a",46),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction4(2,$,"Approved"===t.status||"Completed"===t.status,"Requested"===t.status,"Rejected"===t.status||"Defaulted"===t.status,"Pending"===t.status)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.status," ")}}function z(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",47),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(45);return e.\u0275\u0275resetView(i.openLoanModal(s,o))}),e.\u0275\u0275elementStart(1,"a",48),e.\u0275\u0275element(2,"i",49),e.\u0275\u0275elementEnd()()}}function O(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",50)(1,"a",51),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(47);return e.\u0275\u0275resetView(i.viewGuaranteedLoan(s,o))}),e.\u0275\u0275element(2,"i",52),e.\u0275\u0275elementEnd()()}}function U(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"li",50)(1,"a",51),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2),s=e.\u0275\u0275reference(47);return e.\u0275\u0275resetView(i.viewPersonalLoan(s,o))}),e.\u0275\u0275element(2,"i",52),e.\u0275\u0275elementEnd()()}}function J(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td"),e.\u0275\u0275template(19,D,2,7,"a",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td")(21,"ul",43),e.\u0275\u0275template(22,z,3,0,"li",44),e.\u0275\u0275template(23,O,3,0,"li",45),e.\u0275\u0275template(24,U,3,0,"li",45),e.\u0275\u0275elementEnd()()()),2&n){const t=r.$implicit,a=r.index,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((o.page-1)*o.pageSize+a+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.loan_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.user.name," (",t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.requested_loan_amount,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.duration," ","Daily"===t.interval?"day(s)":"month(s)"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.interval),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,14,t.start_date)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.purpose),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.status),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","Pending"===t.status),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Pending"!==t.status&&"Rejected"!==t.status&&"Garanteed"===t.loan_type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Pending"!==t.status&&"Rejected"!==t.status&&"Personal"===t.loan_type)}}function K(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",34)(1,"table",35)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"Loan Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Loan Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Duration"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"EMI Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Start Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"th"),e.\u0275\u0275text(19,"Purpose"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"th"),e.\u0275\u0275text(21,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"th"),e.\u0275\u0275text(23,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"tbody"),e.\u0275\u0275template(25,J,25,16,"tr",36),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",37)(27,"div",38)(28,"div",39),e.\u0275\u0275text(29,"Showing "),e.\u0275\u0275elementStart(30,"b"),e.\u0275\u0275text(31),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",38)(34,"div",40)(35,"ngb-pagination",41),e.\u0275\u0275listener("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.page=o)})("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.pageChange(o))}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(25),e.\u0275\u0275property("ngForOf",t.loanList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}function Y(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Status is required."),e.\u0275\u0275elementEnd())}function W(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,Y,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("status"))||null==a.errors?null:a.errors.required)}}function H(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Rejected reason is required."),e.\u0275\u0275elementEnd())}function Q(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,H,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("rejected_reason"))||null==a.errors?null:a.errors.required)}}function X(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",58)(1,"label",73),e.\u0275\u0275text(2,"Rejected Reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"select",74)(4,"option",12),e.\u0275\u0275text(5,"Select reason"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"option",75),e.\u0275\u0275text(7,"Insufficient funds"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"option",76),e.\u0275\u0275text(9,"Credit score too low"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"option",77),e.\u0275\u0275text(11,"Unverifiable income"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,Q,2,1,"div",65),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);let a;e.\u0275\u0275advance(12),e.\u0275\u0275property("ngIf",(null==(a=t.statusFormGroup.get("rejected_reason"))?null:a.touched)&&(null==(a=t.statusFormGroup.get("rejected_reason"))?null:a.invalid))}}function Z(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Approved Loan Amount is required."),e.\u0275\u0275elementEnd())}function ee(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number."),e.\u0275\u0275elementEnd())}function te(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,Z,2,0,"small",72),e.\u0275\u0275template(2,ee,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("requested_loan_amount"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("requested_loan_amount"))||null==o.errors?null:o.errors.pattern)}}function ne(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Approved Loan Amount is required."),e.\u0275\u0275elementEnd())}function ae(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number."),e.\u0275\u0275elementEnd())}function oe(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,ne,2,0,"small",72),e.\u0275\u0275template(2,ae,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("approved_loan_amount"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("approved_loan_amount"))||null==o.errors?null:o.errors.pattern)}}function le(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Interest Rate is required."),e.\u0275\u0275elementEnd())}function re(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number (e.g. 5, 7.25)."),e.\u0275\u0275elementEnd())}function ie(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,le,2,0,"small",72),e.\u0275\u0275template(2,re,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("interest_rate"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("interest_rate"))||null==o.errors?null:o.errors.pattern)}}function se(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Start Date is required."),e.\u0275\u0275elementEnd())}function me(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,se,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("start_date"))||null==a.errors?null:a.errors.required)}}function de(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Penalty is required."),e.\u0275\u0275elementEnd())}function ce(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Enter a valid number (e.g. 2, 3.5)."),e.\u0275\u0275elementEnd())}function pe(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,de,2,0,"small",72),e.\u0275\u0275template(2,ce,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("penalty"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("penalty"))||null==o.errors?null:o.errors.pattern)}}function ue(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Indirect referral amount is required."),e.\u0275\u0275elementEnd())}function _e(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function fe(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,ue,2,0,"small",72),e.\u0275\u0275template(2,_e,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("franchise_refer_per"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("franchise_refer_per"))||null==o.errors?null:o.errors.min)}}function ge(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Indirect referral amount is required."),e.\u0275\u0275elementEnd())}function ve(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function he(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,ge,2,0,"small",72),e.\u0275\u0275template(2,ve,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("indirect_refer_per"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("indirect_refer_per"))||null==o.errors?null:o.errors.min)}}function xe(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Direct referral % is required."),e.\u0275\u0275elementEnd())}function Se(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Must be at least 0."),e.\u0275\u0275elementEnd())}function ye(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",71),e.\u0275\u0275template(1,xe,2,0,"small",72),e.\u0275\u0275template(2,Se,2,0,"small",72),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.statusFormGroup.get("direct_refer_per"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.statusFormGroup.get("direct_refer_per"))||null==o.errors?null:o.errors.min)}}function be(n,r){if(1&n&&e.\u0275\u0275element(0,"img",102),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("src",t.uploadedChequeProof,e.\u0275\u0275sanitizeUrl)}}function Ie(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",100),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(45);return e.\u0275\u0275resetView(o.click())}),e.\u0275\u0275template(1,be,1,1,"img",101),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.uploadedChequeProof)}}function Ee(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",2)(1,"div",78)(2,"label",79),e.\u0275\u0275text(3,"Requested Loan Amount (\u20b9)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",80),e.\u0275\u0275template(5,te,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",78)(7,"label",81),e.\u0275\u0275text(8,"Approved Loan Amount (\u20b9)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"input",82),e.\u0275\u0275template(10,oe,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",78)(12,"label",83),e.\u0275\u0275text(13,"Interest Rate (%)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"input",84),e.\u0275\u0275template(15,ie,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",78)(17,"label",85),e.\u0275\u0275text(18,"Start Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"input",86),e.\u0275\u0275template(20,me,2,1,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",78)(22,"label",87),e.\u0275\u0275text(23,"Penalty (\u20b9)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"input",88),e.\u0275\u0275template(25,pe,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",89)(27,"label",90),e.\u0275\u0275text(28,"Franchise Referral %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(29,"input",91),e.\u0275\u0275template(30,fe,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",89)(32,"label",92),e.\u0275\u0275text(33,"Indirect Referral %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"input",93),e.\u0275\u0275template(35,he,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",89)(37,"label",94),e.\u0275\u0275text(38,"Direct Referral %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"input",95),e.\u0275\u0275template(40,ye,3,2,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",89)(42,"label",96),e.\u0275\u0275text(43,"Cheque Proof"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"input",97,98),e.\u0275\u0275listener("change",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onFileSelected(o,"chequeProof"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(46,Ie,2,1,"div",99),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);let a,o,i,s,m,u,_,f;e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(a=t.statusFormGroup.get("requested_loan_amount"))?null:a.touched)&&(null==(a=t.statusFormGroup.get("requested_loan_amount"))?null:a.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(o=t.statusFormGroup.get("approved_loan_amount"))?null:o.touched)&&(null==(o=t.statusFormGroup.get("approved_loan_amount"))?null:o.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(i=t.statusFormGroup.get("interest_rate"))?null:i.touched)&&(null==(i=t.statusFormGroup.get("interest_rate"))?null:i.invalid)),e.\u0275\u0275advance(4),e.\u0275\u0275property("min",t.minDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(s=t.statusFormGroup.get("start_date"))?null:s.touched)&&(null==(s=t.statusFormGroup.get("start_date"))?null:s.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(m=t.statusFormGroup.get("penalty"))?null:m.touched)&&(null==(m=t.statusFormGroup.get("penalty"))?null:m.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(u=t.statusFormGroup.get("franchise_refer_per"))?null:u.touched)&&(null==(u=t.statusFormGroup.get("franchise_refer_per"))?null:u.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(_=t.statusFormGroup.get("indirect_refer_per"))?null:_.touched)&&(null==(_=t.statusFormGroup.get("indirect_refer_per"))?null:_.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(f=t.statusFormGroup.get("direct_refer_per"))?null:f.touched)&&(null==(f=t.statusFormGroup.get("direct_refer_per"))?null:f.invalid)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.uploadedChequeProof)}}function Ce(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",53)(1,"h5",54),e.\u0275\u0275text(2,"Approve/Reject Loan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",55),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",7)(5,"div",56)(6,"div",2)(7,"div",57)(8,"div",58)(9,"label"),e.\u0275\u0275text(10,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",59)(12,"div",60),e.\u0275\u0275element(13,"input",61),e.\u0275\u0275elementStart(14,"label",62),e.\u0275\u0275text(15,"Approved"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",60),e.\u0275\u0275element(17,"input",63),e.\u0275\u0275elementStart(18,"label",64),e.\u0275\u0275text(19,"Rejected"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(20,W,2,1,"div",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,X,13,1,"div",66),e.\u0275\u0275template(22,Ee,47,10,"div",67),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(23,"div",68)(24,"button",69),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.close("Close click"))}),e.\u0275\u0275text(25,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"button",70),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.submit())}),e.\u0275\u0275text(27,"Submit"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext();let a,o,i;e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.statusFormGroup),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngIf",(null==(a=t.statusFormGroup.get("status"))?null:a.touched)&&(null==(a=t.statusFormGroup.get("status"))?null:a.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Rejected"===(null==(o=t.statusFormGroup.get("status"))?null:o.value)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Rejected"!==(null==(i=t.statusFormGroup.get("status"))?null:i.value))}}function Le(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",110)(1,"div",111)(2,"small",112),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",113),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()()),2&n){const t=r.$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.label),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.value)}}const Te=function(n){return{label:"Total Days",value:n}},E=function(n){return{label:"Principal",value:n}},C=function(n){return{label:"Interest",value:n}},Fe=function(n){return{label:"Projected EMI",value:n}},L=function(n){return{label:"Projected (Penalties)",value:n}},T=function(n){return{label:"Penalty",value:n}},F=function(n){return{label:"Paid",value:n}},P=function(n){return{label:"Remaining",value:n}},w=function(n){return{label:"Fully Paid",value:n}},q=function(n){return{label:"Partially Paid",value:n}},G=function(n){return{label:"Pending",value:n}},R=function(n){return{label:"Paid Interest",value:n}},N=function(n){return{label:"Rem. Interest",value:n}},Pe=function(n,r,t,a,o,i,s,m,u,_,f,y,b){return[n,r,t,a,o,i,s,m,u,_,f,y,b]};function we(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",108),e.\u0275\u0275template(1,Le,6,2,"div",109),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunctionV(27,Pe,[e.\u0275\u0275pureFunction1(1,Te,t.LoanTotal["Total Days"]),e.\u0275\u0275pureFunction1(3,E,"\u20b9"+t.LoanTotal["Total Principal"]),e.\u0275\u0275pureFunction1(5,C,"\u20b9"+t.LoanTotal["Total Interest"]),e.\u0275\u0275pureFunction1(7,Fe,"\u20b9"+t.LoanTotal["Projected Total EMI"]),e.\u0275\u0275pureFunction1(9,L,"\u20b9"+t.LoanTotal["Projected Total (with Penalties)"]),e.\u0275\u0275pureFunction1(11,T,"\u20b9"+t.LoanTotal["Total Penalty"]),e.\u0275\u0275pureFunction1(13,F,"\u20b9"+t.LoanTotal["Total Amount Paid"]),e.\u0275\u0275pureFunction1(15,P,"\u20b9"+t.LoanTotal["Total Remaining Amount"]),e.\u0275\u0275pureFunction1(17,w,t.LoanTotal["Fully Paid Installments"]),e.\u0275\u0275pureFunction1(19,q,t.LoanTotal["Partially Paid Installments"]),e.\u0275\u0275pureFunction1(21,G,t.LoanTotal["Pending Installments"]),e.\u0275\u0275pureFunction1(23,R,"\u20b9"+t.LoanTotal["Paid Interest"]),e.\u0275\u0275pureFunction1(25,N,"\u20b9"+t.LoanTotal["Remaining Interest"])]))}}function qe(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",110)(1,"div",111)(2,"small",112),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",113),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()()),2&n){const t=r.$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.label),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.value)}}const Ge=function(n){return{label:"Loan Period",value:n}},Re=function(n){return{label:"Total",value:n}},Ne=function(n){return{label:"EMI",value:n}},ke=function(n){return{label:"Expected EMI",value:n}},Ae=function(n){return{label:"Paid Principal",value:n}},Ve=function(n){return{label:"Rem. Principal",value:n}},je=function(n,r,t,a,o,i,s,m,u,_,f,y,b,yt,bt,It,Et){return[n,r,t,a,o,i,s,m,u,_,f,y,b,yt,bt,It,Et]};function Be(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",108),e.\u0275\u0275template(1,qe,6,2,"div",109),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunctionV(35,je,[e.\u0275\u0275pureFunction1(1,Ge,t.LoanTotal["Loan Period"]),e.\u0275\u0275pureFunction1(3,E,"\u20b9"+t.LoanTotal["Principal Amount"]),e.\u0275\u0275pureFunction1(5,C,"\u20b9"+t.LoanTotal["Total Interest"]),e.\u0275\u0275pureFunction1(7,Re,"\u20b9"+t.LoanTotal["Total Amount"]),e.\u0275\u0275pureFunction1(9,Ne,"\u20b9"+t.LoanTotal["EMI Amount"]),e.\u0275\u0275pureFunction1(11,ke,"\u20b9"+t.LoanTotal["Expected Total EMI"]),e.\u0275\u0275pureFunction1(13,F,"\u20b9"+t.LoanTotal["Total Amount Paid"]),e.\u0275\u0275pureFunction1(15,L,"\u20b9"+t.LoanTotal["Projected Total (with Penalties)"]),e.\u0275\u0275pureFunction1(17,T,"\u20b9"+t.LoanTotal["Total Penalty"]),e.\u0275\u0275pureFunction1(19,P,"\u20b9"+t.LoanTotal["Total Remaining Amount"]),e.\u0275\u0275pureFunction1(21,w,t.LoanTotal["Fully Paid Installments"]),e.\u0275\u0275pureFunction1(23,q,t.LoanTotal["Partially Paid Installments"]),e.\u0275\u0275pureFunction1(25,G,t.LoanTotal["Pending Installments"]),e.\u0275\u0275pureFunction1(27,Ae,"\u20b9"+t.LoanTotal["Paid Principal"]),e.\u0275\u0275pureFunction1(29,R,"\u20b9"+t.LoanTotal["Paid Interest"]),e.\u0275\u0275pureFunction1(31,Ve,"\u20b9"+t.LoanTotal["Remaining Principal"]),e.\u0275\u0275pureFunction1(33,N,"\u20b9"+t.LoanTotal["Remaining Interest"])]))}}function Me(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td"),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=r.$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.Installment),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.Date),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t["Principal O/S"],""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.EMI,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("\u20b9",t.Penalty," (",t["Penalty Days"]," Days)"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.Interest,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.Principal,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.Balance,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.Status)}}function $e(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",53)(1,"h5",54),e.\u0275\u0275text(2,"Loan Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",55),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.dismiss("Cross click"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",56)(5,"div",2)(6,"div",103)(7,"p")(8,"strong"),e.\u0275\u0275text(9,"Loan Number:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"p")(12,"strong"),e.\u0275\u0275text(13,"User:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p")(16,"strong"),e.\u0275\u0275text(17,"Requested Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"p")(20,"strong"),e.\u0275\u0275text(21,"Approved Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"p")(24,"strong"),e.\u0275\u0275text(25,"Interest Rate:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"p")(28,"strong"),e.\u0275\u0275text(29,"Status:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",103)(32,"p")(33,"strong"),e.\u0275\u0275text(34,"Loan Type:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"p")(37,"strong"),e.\u0275\u0275text(38,"Duration:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(39),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"p")(41,"strong"),e.\u0275\u0275text(42,"EMI Type:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"p")(45,"strong"),e.\u0275\u0275text(46,"Purpose:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(47),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"p")(49,"strong"),e.\u0275\u0275text(50,"Start Date:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(51),e.\u0275\u0275pipe(52,"date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(53,"div",104)(54,"button",105),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.payloan())}),e.\u0275\u0275text(55,"Pay Loan"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(56,we,2,41,"div",106),e.\u0275\u0275template(57,Be,2,53,"div",106),e.\u0275\u0275elementStart(58,"div",34)(59,"table",107)(60,"tbody")(61,"tr")(62,"th")(63,"strong"),e.\u0275\u0275text(64,"Installment"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(65,"th")(66,"strong"),e.\u0275\u0275text(67,"Date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(68,"th")(69,"strong"),e.\u0275\u0275text(70,"Principal O/S"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(71,"th")(72,"strong"),e.\u0275\u0275text(73,"EMI"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(74,"th")(75,"strong"),e.\u0275\u0275text(76,"Penalty"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(77,"th")(78,"strong"),e.\u0275\u0275text(79,"Interest"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(80,"th")(81,"strong"),e.\u0275\u0275text(82,"Principal"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(83,"th")(84,"strong"),e.\u0275\u0275text(85,"Balance"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(86,"th")(87,"strong"),e.\u0275\u0275text(88,"Status"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(89,Me,20,10,"ng-container",36),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(90,"div",68)(91,"button",69),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.close("Close click"))}),e.\u0275\u0275text(92,"Close"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.loan_id,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2(" ",null==t.loanSelected?null:t.loanSelected.user.name," (",null==t.loanSelected?null:t.loanSelected.user.user_id,")"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" \u20b9",null==t.loanSelected?null:t.loanSelected.requested_loan_amount,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" \u20b9",null==t.loanSelected?null:t.loanSelected.approved_loan_amount,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.interest_rate,"%"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.status,""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.loan_type,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2(" ",null==t.loanSelected?null:t.loanSelected.duration," ","Daily"===(null==t.loanSelected?null:t.loanSelected.interval)?"day(s)":"month(s)"," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.interval,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.loanSelected?null:t.loanSelected.purpose,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(52,16,null==t.loanSelected?null:t.loanSelected.start_date,"dd/MM/yyyy"),""),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.LoanTotal&&"Garanteed"===t.loanType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.LoanTotal&&"Personal"===t.loanType),e.\u0275\u0275advance(32),e.\u0275\u0275property("ngForOf",t.LoanTable)}}let De=(()=>{class n{constructor(t,a,o,i){this.loanService=t,this.modalService=a,this.route=o,this.router=i,this.loanList=[],this.total=0,this.loanType="",this.page=1,this.pageSize=10,this.LoanTable=[],this.LoanTotal=null,this.queryParams="",this.status=["Pending","Approved","Rejected","Completed","Defaulted"],this.loanSelected=null,this.uploadedChequeProof="",this.route.paramMap.subscribe(s=>{this.loanType=s.get("type")||"",this.search()})}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"Requested Loan",active:!0}];const t=new Date,a=new Date;a.setDate(t.getDate()+1),this.minDate=a.toISOString().split("T")[0],this.statusFormGroup=new l.cw({_id:new l.NI(null),status:new l.NI(""),interest_rate:new l.NI(null,[l.kI.min(0),l.kI.max(100)]),requested_loan_amount:new l.NI({value:"",disabled:!0}),approved_loan_amount:new l.NI(null,[l.kI.min(0)]),start_date:new l.NI(null),penalty:new l.NI(null,[l.kI.min(0),l.kI.max(100)]),franchise_refer_per:new l.NI(null,[l.kI.min(0),l.kI.max(100)]),direct_refer_per:new l.NI(null,[l.kI.min(0),l.kI.max(100)]),indirect_refer_per:new l.NI(null,[l.kI.min(0),l.kI.max(100)]),rejected_reason:new l.NI(""),cheque_proof:new l.NI("")}),this.statusFormGroup.get("status")?.valueChanges.subscribe(o=>{"Rejected"===o?(this.statusFormGroup.get("rejected_reason")?.setValidators([l.kI.required]),["interest_rate","approved_loan_amount","start_date","franchise_refer_per","direct_refer_per","indirect_refer_per"].forEach(i=>{const s=this.statusFormGroup.get(i);if(s){const m=s.validator?[l.kI.min(0),l.kI.max(100)].filter(u=>"approved_loan_amount"!==i&&"start_date"!==i):[];s.setValidators("approved_loan_amount"===i?[l.kI.min(0)]:"start_date"===i?[]:m),s.updateValueAndValidity()}}),this.statusFormGroup.get("rejected_reason")?.updateValueAndValidity()):(this.statusFormGroup.get("rejected_reason")?.clearValidators(),this.statusFormGroup.get("interest_rate")?.setValidators([l.kI.required,l.kI.min(0),l.kI.max(100)]),this.statusFormGroup.get("approved_loan_amount")?.setValidators([l.kI.required,l.kI.min(0)]),this.statusFormGroup.get("start_date")?.setValidators([l.kI.required]),this.statusFormGroup.get("franchise_refer_per")?.setValidators([l.kI.required,l.kI.min(0),l.kI.max(100)]),this.statusFormGroup.get("direct_refer_per")?.setValidators([l.kI.required,l.kI.min(0),l.kI.max(100)]),this.statusFormGroup.get("indirect_refer_per")?.setValidators([l.kI.required,l.kI.min(0),l.kI.max(100)]),["interest_rate","approved_loan_amount","start_date","franchise_refer_per","direct_refer_per","indirect_refer_per"].forEach(i=>{this.statusFormGroup.get(i)?.updateValueAndValidity()}))}),this.searchFormGroup=new l.cw({name:new l.NI(""),loan_type:new l.NI(this.loanType),status:new l.NI("Pending"),interval:new l.NI("")}),this.search()}refresh(){this.page=1,this.searchFormGroup.reset(),this.searchFormGroup.patchValue({status:"Pending",loan_type:"",name:"",interval:""}),this.getLoanList()}openLoanModal(t,a){this.modalService.open(t,{size:"lg",backdrop:"static"}),this.uploadedChequeProof=null,this.statusFormGroup.reset(),this.statusFormGroup.patchValue({_id:a._id,requested_loan_amount:a.requested_loan_amount})}submit(){if(this.statusFormGroup.invalid)return console.log("Form is invalid:",this.statusFormGroup.errors),void Object.keys(this.statusFormGroup.controls).forEach(a=>{const o=this.statusFormGroup.get(a);o&&o.invalid&&console.log(`Control "${a}" is invalid:`,o.errors)});const t={...this.statusFormGroup.value};this.loanService.updateLoanStatus(t._id,t).subscribe({next:a=>{h().fire({title:"Success",text:`Loan status updated to ${t.status}`,icon:"success",confirmButtonText:"OK"}),this.statusFormGroup.reset(),this.selectedLoan=null,this.modalService.dismissAll(),this.getLoanList()},error:a=>{console.error("Error updating loan status:",a)}})}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getLoanList()}search(){const t=[];if(this.searchFormGroup&&this.searchFormGroup.value){const a=this.searchFormGroup.value;Object.keys(a).forEach(o=>{"loan_type"!==o&&null!==a[o]&&""!==a[o]&&t.push(`${o}=${encodeURIComponent(a[o])}`)})}this.loanType&&t.push(`loan_type=${encodeURIComponent(this.loanType)}`),t.some(a=>a.startsWith("status="))||t.push("status=Pending"),this.queryParams=t.join("&"),this.page=1,this.getLoanList()}getLoanList(){this.loanService.getLoanList(this.page,this.pageSize,this.queryParams).subscribe({next:t=>{this.loanList=t.data.loans,this.total=t.data.total},error:t=>{console.error("Error fetching loan list:",t)}})}viewGuaranteedLoan(t,a){this.selectedLoan=a,this.loanService.getLoanSchedule(a._id).subscribe({next:o=>{console.log(o),this.LoanTable=o.data.schedule,this.LoanTotal=o.data.totals,this.loanSelected=a},error:o=>{console.error("Error fetching guaranteed loan schedule:",o),h().fire({title:"Error",text:"Failed to fetch guaranteed loan schedule.",icon:"error",confirmButtonText:"OK"})}}),this.modalService.open(t,{size:"xl",backdrop:"static"})}viewPersonalLoan(t,a){this.selectedLoan=a,this.loanService.getPersonalLoanSchedule(a._id).subscribe({next:o=>{this.LoanTable=o.data.schedule,this.LoanTotal=o.data.totals,this.loanSelected=a},error:o=>{console.error("Error fetching personal loan schedule:",o),h().fire({title:"Error",text:"Failed to fetch personal loan schedule.",icon:"error",confirmButtonText:"OK"})}}),this.modalService.open(t,{size:"xl",backdrop:"static"})}payloan(){this.router.navigate(["/loan-management/pay-loan"],{queryParams:{id:this.loanSelected._id,user:this.loanSelected?.user.user_id}}),this.modalService.dismissAll()}onFileSelected(t,a){const o=t.target;if(o.files&&0!==o.files.length)return o.files[0].type.startsWith("image/")?void(o.files&&o.files.length>0&&this.openImageCropper({file:t,from:a})):(h().fire({title:"Invalid File Type",text:"Please select a valid image file.",icon:"error",confirmButtonText:"OK"}),void(o.value=""))}openImageCropper(t){const a=this.modalService.open(V.a,{centered:!0,size:"xl"});a.componentInstance.data=t,a.result.then(o=>{o&&o.image&&this.cropAndSetPhoto(o.image,o.from)}).catch(o=>{console.log("Modal dismissed:",o)})}cropAndSetPhoto(t,a="profile_image"){const o=new Image;o.onload=()=>{const i=document.createElement("canvas");i.width=.5*o.width,i.height=.5*o.height,i.getContext("2d").drawImage(o,0,0,i.width,i.height);const m=i.toDataURL("image/jpeg",.3);"chequeProof"===a&&(this.uploadedChequeProof=m,this.statusFormGroup.patchValue({cheque_proof:m})),console.log(`Selected ${a}:`)},o.src=t}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(x),e.\u0275\u0275directiveInject(v.FF),e.\u0275\u0275directiveInject(g.gz),e.\u0275\u0275directiveInject(g.F0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-loan-requested"]],decls:48,vars:6,consts:[[1,"container-fluid"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-4"],["type","search","id","searchInput","placeholder","Search for Name / User Id / Email id...","formControlName","name",1,"form-control"],[1,"col-lg-2"],["formControlName","loan_type",1,"form-control"],["value",""],["value","Personal"],["value","Garanteed"],["formControlName","interval",1,"form-control"],["value","Daily"],["value","Monthly"],["formControlName","status",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-lg-1"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],["role","document"],["loanModal",""],["loanViewGaranteedModal",""],[3,"ngValue"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["href","javascript: void(0);","class","badge font-size-11 m-1",3,"ngClass",4,"ngIf"],[1,"list-inline","font-size-20","contact-links","mb-0"],["data-bs-toggle","modal","data-bs-target","#myModal","class","list-inline-item px-2",3,"click",4,"ngIf"],["class","list-inline-item px-2",4,"ngIf"],["href","javascript: void(0);",1,"badge","font-size-11","m-1",3,"ngClass"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"list-inline-item","px-2",3,"click"],["href","javascript:void(0);","tooltip","Message"],[1,"bx","bx-check-double"],[1,"list-inline-item","px-2"],["tooltip","Profile",3,"click"],[1,"bx","bx-detail"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-md-12"],[1,"form-group","mb-3"],[1,"d-flex","align-items-center","gap-3"],[1,"form-check","form-check-inline"],["type","radio","id","status_approved","value","Approved","formControlName","status",1,"form-check-input"],["for","status_approved",1,"form-check-label"],["type","radio","id","status_rejected","value","Rejected","formControlName","status",1,"form-check-input"],["for","status_rejected",1,"form-check-label"],["class","text-danger",4,"ngIf"],["class","form-group mb-3",4,"ngIf"],["class","row",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","waves-effect",3,"click"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light",3,"click"],[1,"text-danger"],[4,"ngIf"],["for","rejected_reason"],["id","rejected_reason","formControlName","rejected_reason",1,"form-control"],["value","Insufficient funds"],["value","Credit score too low"],["value","Unverifiable income"],[1,"form-group","mb-3","col-lg-6"],["for","requested_loan_amount"],["type","number","id","requested_loan_amount","formControlName","requested_loan_amount","placeholder","Enter approved amount",1,"form-control"],["for","approved_loan_amount"],["type","number","id","approved_loan_amount","formControlName","approved_loan_amount","placeholder","Enter approved amount",1,"form-control"],["for","interest_rate"],["type","number","id","interest_rate","formControlName","interest_rate","placeholder","Enter interest rate",1,"form-control"],["for","start_date"],["type","date","id","start_date","formControlName","start_date",1,"form-control",3,"min"],["for","penalty"],["type","number","id","penalty","formControlName","penalty","placeholder","Enter penalty percentage",1,"form-control"],[1,"col-md-6","mb-3"],["for","franchiseReferral",1,"form-label"],["type","number","id","franchiseReferral","formControlName","franchise_refer_per","placeholder","Enter indirect referral",1,"form-control"],["for","indirectReferral",1,"form-label"],["type","number","id","indirectReferral","formControlName","indirect_refer_per","placeholder","Enter indirect referral",1,"form-control"],["for","directReferral",1,"form-label"],["type","number","id","directReferral","formControlName","direct_refer_per","placeholder","Enter direct referral",1,"form-control"],["for","chequeProof",1,"form-label"],["type","file","id","chequeProof","accept","image/*","formControlName","cheque_proof",1,"form-control",3,"change"],["selfPassbookInput",""],["class","passbook_box","style","cursor:pointer;",3,"click",4,"ngIf"],[1,"passbook_box",2,"cursor","pointer",3,"click"],["alt","",3,"src",4,"ngIf"],["alt","",3,"src"],[1,"col-md-6"],[1,"col-12","mt-2","d-flex","justify-content-end","mb-2"],[1,"btn","btn-sm","btn-primary",3,"click"],["class","row mb-3",4,"ngIf"],[1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[1,"row","mb-3"],["class","col-md-2",4,"ngFor","ngForOf"],[1,"col-md-2"],[1,"card","card-body","p-2","mb-2","text-center"],[1,"text-muted"],[1,"fw-bold"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",10)(12,"select",11),e.\u0275\u0275text(13," > "),e.\u0275\u0275elementStart(14,"option",12),e.\u0275\u0275text(15,"Select Loan Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"option",13),e.\u0275\u0275text(17,"Personal"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"option",14),e.\u0275\u0275text(19,"Garanteed"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"div",10)(21,"select",15),e.\u0275\u0275text(22," > "),e.\u0275\u0275elementStart(23,"option",12),e.\u0275\u0275text(24,"Select EMI Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"option",16),e.\u0275\u0275text(26,"Daily"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"option",17),e.\u0275\u0275text(28,"Monthly"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(29,"div",10)(30,"select",18)(31,"option",12),e.\u0275\u0275text(32,"Select Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(33,B,2,2,"option",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",20)(35,"button",21),e.\u0275\u0275listener("click",function(){return a.search()}),e.\u0275\u0275element(36,"i",22),e.\u0275\u0275text(37," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",20)(39,"button",23),e.\u0275\u0275listener("click",function(){return a.refresh()}),e.\u0275\u0275element(40,"i",24),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(41,"div",2),e.\u0275\u0275template(42,M,4,0,"div",25),e.\u0275\u0275template(43,K,36,7,"div",26),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(44,Ce,28,4,"ng-template",27,28,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(46,$e,93,19,"ng-template",27,29,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("title","Requested ","Personal"===a.loanType?"Personal":"Garanteed"," Loan"),e.\u0275\u0275property("breadcrumbItems",a.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",a.searchFormGroup),e.\u0275\u0275advance(26),e.\u0275\u0275property("ngForOf",a.status),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",!a.loanList||0===a.loanList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==a.loanList.length))},dependencies:[c.NgClass,c.NgForOf,c.NgIf,S.V,v.N9,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l._,l.JJ,l.JL,l.sg,l.u,c.DatePipe],styles:[".passbook_box[_ngcontent-%COMP%]{width:70%;height:120px;background-color:#f0f0f0;display:flex;justify-content:center;align-items:center;border-radius:5px;border:#000000 solid 1px}.passbook_box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;border-radius:5px}"]}),n})();function ze(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275element(1,"img",31),e.\u0275\u0275elementStart(2,"p",32),e.\u0275\u0275text(3,"No Transanction found in the current filter."),e.\u0275\u0275elementEnd()())}const Oe=function(n,r,t,a){return{"badge-soft-primary":n,"badge-soft-info":r,"badge-soft-warning":t,"badge-soft-dark":a}};function Ue(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"a",43),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction4(4,Oe,"credit"===t.transaction_type,"interest"===t.transaction_type,"debit"===t.transaction_type,"ccredit"===t.transaction_type)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,t.transaction_type)," ")}}function Je(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementStart(5,"b"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" Principal Amount : \u20b9",t.principal_component," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" Interest Amount : \u20b9",t.interest_component," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Amount : \u20b9",t.amount," ")}}function Ke(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" \u20b9",t.amount," ")}}function Ye(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,"")}}function We(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,"")}}function He(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275template(10,Ue,3,9,"a",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275template(12,Je,7,3,"div",42),e.\u0275\u0275template(13,Ke,2,1,"div",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275template(15,Ye,2,1,"span",42),e.\u0275\u0275template(16,We,2,1,"span",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"date"),e.\u0275\u0275elementEnd()()),2&n){const t=r.$implicit,a=r.index,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((o.page-1)*o.pageSize+a+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.user.name," (",t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.loan.loan_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.transaction_id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.transaction_type),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","interest"===t.transaction_type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","credit"===t.transaction_type),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","debit"===t.transaction_type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","ccredit"===t.transaction_type),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.payment_method),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(21,12,t.transaction_date,"medium"))}}function Qe(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",33)(1,"table",34)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Loan ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Transanction Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Transanction Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Credit Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Debit Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"th"),e.\u0275\u0275text(19,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"th"),e.\u0275\u0275text(21,"Date"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(22,"tbody"),e.\u0275\u0275template(23,He,22,15,"tr",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",36)(25,"div",37)(26,"div",38),e.\u0275\u0275text(27,"Showing "),e.\u0275\u0275elementStart(28,"b"),e.\u0275\u0275text(29),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",37)(32,"div",39)(33,"ngb-pagination",40),e.\u0275\u0275listener("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.page=o)})("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.pageChange(o))}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(23),e.\u0275\u0275property("ngForOf",t.transanctionList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}let Xe=(()=>{class n{constructor(t){this.loanService=t,this.transanctionList=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"User Loan Transanction",active:!0}],this.searchFormGroup=new l.cw({name:new l.NI(""),loan_id:new l.NI(""),transaction_id:new l.NI(""),transaction_type:new l.NI(""),payment_method:new l.NI(""),transaction_date:new l.NI("")}),this.getTransanctionList()}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getTransanctionList()}getTransanctionList(){const t=this.searchFormGroup.value,a=[];Object.keys(t).forEach(i=>{null!==t[i]&&""!==t[i]&&a.push(`${i}=${encodeURIComponent(t[i])}`)});const o=a.join("&");this.loanService.getUserTransaction(this.page,this.pageSize,o).subscribe(i=>{this.transanctionList=i.data.userTransaction,this.total=i.data.total})}refresh(){this.page=1,this.searchFormGroup.reset(),this.getTransanctionList()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(x))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-loan-transanction"]],decls:49,vars:4,consts:[[1,"container-fluid"],["title","Transanction History",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-2"],["type","search","id","searchInput","placeholder","Search for Name / User Id / Email id...","formControlName","name",1,"form-control"],["type","search","id","searchInput","placeholder","Search for Loan Number","formControlName","loan_id",1,"form-control"],["type","search","id","searchInput","placeholder","Search for Transanction Id..","formControlName","transaction_id",1,"form-control"],[1,"col-lg-1"],["formControlName","transaction_type",1,"form-control"],["value",""],["value","credit"],["value","debit"],["value","interest"],["formControlName","payment_method",1,"form-control"],["value","EMI"],["value","Bank Transfer"],["value","Cash"],["value","Cheque"],["type","date","id","searchInput","formControlName","transaction_date",1,"form-control"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"],["href","javascript: void(0);","class","badge font-size-11 m-1",3,"ngClass",4,"ngIf"],[4,"ngIf"],["href","javascript: void(0);",1,"badge","font-size-11","m-1",3,"ngClass"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",8),e.\u0275\u0275element(12,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",8),e.\u0275\u0275element(14,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",12)(16,"select",13)(17,"option",14),e.\u0275\u0275text(18,"Transanction Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"option",15),e.\u0275\u0275text(20,"Credit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"option",16),e.\u0275\u0275text(22,"Debit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"option",17),e.\u0275\u0275text(24,"Interest"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(25,"div",12)(26,"select",18)(27,"option",14),e.\u0275\u0275text(28,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"option",19),e.\u0275\u0275text(30,"EMI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"option",20),e.\u0275\u0275text(32,"Bank Transfer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"option",21),e.\u0275\u0275text(34,"Cash"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"option",22),e.\u0275\u0275text(36,"Cheque"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"div",8),e.\u0275\u0275element(38,"input",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",12)(40,"button",24),e.\u0275\u0275listener("click",function(){return a.getTransanctionList()}),e.\u0275\u0275element(41,"i",25),e.\u0275\u0275text(42," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"div",12)(44,"button",26),e.\u0275\u0275listener("click",function(){return a.refresh()}),e.\u0275\u0275element(45,"i",27),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(46,"div",2),e.\u0275\u0275template(47,ze,4,0,"div",28),e.\u0275\u0275template(48,Qe,34,7,"div",29),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",a.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",a.searchFormGroup),e.\u0275\u0275advance(40),e.\u0275\u0275property("ngIf",!a.transanctionList||0===a.transanctionList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==a.transanctionList.length))},dependencies:[c.NgClass,c.NgForOf,c.NgIf,S.V,v.N9,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.sg,l.u,c.TitleCasePipe,c.DatePipe]}),n})();function Ze(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",29),e.\u0275\u0275element(1,"img",30),e.\u0275\u0275elementStart(2,"p",31),e.\u0275\u0275text(3,"No Transanction found in the current filter."),e.\u0275\u0275elementEnd()())}function et(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()()),2&n){const t=r.$implicit,a=r.index,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate((o.page-1)*o.pageSize+a+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.user.name," (",t.user.user_id,") "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.loan.loan_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",t.amount,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(11,7,t.transaction_date,"medium")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.description," ")}}function tt(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Sr No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Loan ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Description"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"tbody"),e.\u0275\u0275template(17,et,14,10,"tr",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",35)(19,"div",36)(20,"div",37),e.\u0275\u0275text(21,"Showing "),e.\u0275\u0275elementStart(22,"b"),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",36)(26,"div",38)(27,"ngb-pagination",39),e.\u0275\u0275listener("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.page=o)})("pageChange",function(o){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.pageChange(o))}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(17),e.\u0275\u0275property("ngForOf",t.transanctionList),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate((t.page-1)*t.pageSize+1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" to ",t.findPageShowing()," of ",t.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",t.total)("page",t.page)("pageSize",t.pageSize)}}let nt=(()=>{class n{constructor(t){this.loanService=t,this.transanctionList=[],this.total=0,this.page=1,this.pageSize=10}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"Admin Loan Transanction",active:!0}],this.searchFormGroup=new l.cw({name:new l.NI(""),transaction_id:new l.NI(""),transaction_type:new l.NI(""),payment_method:new l.NI(""),transaction_date:new l.NI("")}),this.getTransanctionList()}findPageShowing(){return Math.min(this.page*this.pageSize,this.total)}pageChange(t){this.page=t,this.getTransanctionList()}getTransanctionList(){const t=this.searchFormGroup.value,a=[];Object.keys(t).forEach(i=>{null!==t[i]&&""!==t[i]&&a.push(`${i}=${encodeURIComponent(t[i])}`)});const o=a.join("&");this.loanService.getAdminTransaction(this.page,this.pageSize,o).subscribe(i=>{this.transanctionList=i.data.adminTransanction,this.total=i.data.total})}refresh(){this.searchFormGroup.reset(),this.page=1,this.getTransanctionList()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(x))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-admin-loan-transanction"]],decls:45,vars:4,consts:[[1,"container-fluid"],["title","Transanction History",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-body","border-bottom"],[3,"formGroup"],[1,"col-lg-4"],["type","search","id","searchInput","placeholder","Search for Name / User Id / Email id...","formControlName","name",1,"form-control"],[1,"col-lg-2"],["type","search","id","searchInput","placeholder","Search for Transanction Id..","formControlName","transaction_id",1,"form-control"],[1,"col-lg-1"],["formControlName","transaction_type",1,"form-control"],["value",""],["value","credit"],["value","debit"],["formControlName","payment_method",1,"form-control"],["value","EMI"],["value","Bank Transfer"],["value","Cash"],["value","Cheque"],["type","date","id","searchInput","formControlName","transaction_date",1,"form-control"],["type","button",1,"btn","btn-soft-secondary","w-100",3,"click"],[1,"mdi","mdi-filter-outline","align-middle"],["type","button",1,"btn","btn-light",3,"click"],[1,"mdi","mdi-refresh"],["class","d-flex flex-column justify-content-center align-items-center","style","min-height: 150px;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"min-height","150px"],["src","assets/img/not-found.png","width","300px","alt",""],[1,"text-mutes","mt-2"],[1,"table-responsive"],["id","basic-datatable",1,"table","table-bordered","dt-responsive","nowrap","datatables","no-footer","dtr-inline"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","pageChange"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",2)(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",10),e.\u0275\u0275element(12,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",12)(14,"select",13)(15,"option",14),e.\u0275\u0275text(16,"Transanction Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"option",15),e.\u0275\u0275text(18,"Credit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"option",16),e.\u0275\u0275text(20,"Debit"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"div",12)(22,"select",17)(23,"option",14),e.\u0275\u0275text(24,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"option",18),e.\u0275\u0275text(26,"EMI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"option",19),e.\u0275\u0275text(28,"Bank Transfer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"option",20),e.\u0275\u0275text(30,"Cash"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"option",21),e.\u0275\u0275text(32,"Cheque"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(33,"div",10),e.\u0275\u0275element(34,"input",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",12)(36,"button",23),e.\u0275\u0275listener("click",function(){return a.getTransanctionList()}),e.\u0275\u0275element(37,"i",24),e.\u0275\u0275text(38," Filter"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"div",12)(40,"button",25),e.\u0275\u0275listener("click",function(){return a.refresh()}),e.\u0275\u0275element(41,"i",26),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(42,"div",2),e.\u0275\u0275template(43,Ze,4,0,"div",27),e.\u0275\u0275template(44,tt,28,7,"div",28),e.\u0275\u0275elementEnd()()()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",a.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",a.searchFormGroup),e.\u0275\u0275advance(36),e.\u0275\u0275property("ngIf",!a.transanctionList||0===a.transanctionList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!==a.transanctionList.length))},dependencies:[c.NgForOf,c.NgIf,S.V,v.N9,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.sg,l.u,c.DatePipe]}),n})();var at=d(8386),ot=d(7185),k=d(139);function lt(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"User ID is required."),e.\u0275\u0275elementEnd())}function rt(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,lt,2,0,"small",22),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("id"))||null==a.errors?null:a.errors.required)}}function it(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23)(1,"small")(2,"strong"),e.\u0275\u0275text(3,"Name:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",t.userDetails.name,"")}}function st(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Loan ID is required."),e.\u0275\u0275elementEnd())}function mt(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,st,2,0,"small",22),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("loanId"))||null==a.errors?null:a.errors.required)}}function dt(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Amount is required."),e.\u0275\u0275elementEnd())}function ct(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Amount must be at least 1."),e.\u0275\u0275elementEnd())}function pt(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,dt,2,0,"small",22),e.\u0275\u0275template(2,ct,2,0,"small",22),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a,o;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("amount"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(o=t.paymentFormGroup.get("amount"))||null==o.errors?null:o.errors.min)}}function ut(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23)(1,"small")(2,"strong"),e.\u0275\u0275text(3,"Total Bill Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" \u20b9",t.totalPayableAmount,"")}}function _t(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"option",24),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=r.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function ft(n,r){1&n&&(e.\u0275\u0275elementStart(0,"small"),e.\u0275\u0275text(1,"Payment Method is required."),e.\u0275\u0275elementEnd())}function gt(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",21),e.\u0275\u0275template(1,ft,2,0,"small",22),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(a=t.paymentFormGroup.get("paymentMethod"))||null==a.errors?null:a.errors.required)}}const vt=[{path:"loans/:type",component:De},{path:"pay-loan",component:(()=>{class n{constructor(t,a,o,i){this.userService=t,this.loanService=a,this.toast=o,this.route=i,this.userDetails=null,this.loanList=[],this.paymentMethods=["Cash","Bank Transfer","Cash","Cheque"],this.totalPayableAmount=0,this.userId="",this.userDetails=null,this.loanList=[]}ngOnInit(){this.breadCrumbItems=[{label:"Loans"},{label:"Pay Loans",active:!0}],this.paymentFormGroup=new l.cw({id:new l.NI({value:"",disabled:!0},l.kI.required),loanId:new l.NI("",l.kI.required),amount:new l.NI("",[l.kI.required,l.kI.min(1)]),paymentMethod:new l.NI("",l.kI.required)}),this.route.queryParams.subscribe(t=>{t.user&&(this.paymentFormGroup.patchValue({id:t.user}),this.userId=t.user,this.getDetails()),t.id&&(this.paymentFormGroup.patchValue({loanId:t.id}),this.getTotalPaybleAmount({_id:t.id}))})}getDetails(){let t=this.paymentFormGroup.value.id;t||(t=this.userId),this.userService.getBasicUserProfile(t).subscribe({next:a=>{a.status&&(this.userDetails=a?.data?.user,this.getAllLoans(this.userDetails._id))},error:a=>{console.error("Error fetching user details:",a)}})}getTotalPaybleAmount(t){this.loanService.getTotalPaymentAmount(t._id).subscribe({next:a=>{console.log("Total Payment Amount:",a),a.status?(this.totalPayableAmount=a?.data?.outstandingAmount,this.paymentFormGroup.patchValue({amount:this.totalPayableAmount}),this.paymentFormGroup.get("amount")?.disable()):console.error("Error fetching total payment amount:",a.message)},error:a=>{console.error("Error fetching total payment amount:",a)}})}getAllLoans(t){this.loanService.getAllUserActiveLoans(t).subscribe({next:a=>{a.status?this.loanList=a?.data?.loans.map(o=>({_id:o._id,label:`${o.loan_id} Amount: ${o.approved_loan_amount} Purpose: ${o.purpose}`})):console.error("Error fetching loans:",a.message)},error:a=>{console.error("Error fetching loans:",a)}})}payLoanFees(){if(this.paymentFormGroup.invalid)return void console.error("Payment form is invalid");const t={...this.paymentFormGroup.value,amount:this.totalPayableAmount};t.amount=parseFloat(t.amount),t.amount<=0?this.toast.error("Amount must be greater than zero"):t.amount>this.totalPayableAmount?this.toast.error("Amount exceeds total payable amount"):this.loanService.recordPayment(t).subscribe({next:a=>{a.status?(this.toast.success("Payment recorded successfully"),this.paymentFormGroup.reset(),this.totalPayableAmount=0):this.toast.success("Error recording payment:")},error:a=>{this.toast.success("Error recording payment:")}})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(at.i),e.\u0275\u0275directiveInject(x),e.\u0275\u0275directiveInject(ot._W),e.\u0275\u0275directiveInject(g.gz))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-pay-loan"]],decls:33,vars:13,consts:[[1,"container-fluid"],["title","Pay Loan",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-12",3,"formGroup"],[1,"mb-3","col-lg-12"],["for","userId",1,"form-label"],["type","text","id","userId","formControlName","id","placeholder","Enter user ID",1,"form-control",3,"blur"],["class","text-danger",4,"ngIf"],["class","mt-1",4,"ngIf"],["for","cardId",1,"form-label"],["formControlName","loanId",3,"items","bindValue","bindLabel","change"],[1,"mb-3","col-lg-6"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter amount","min","1",1,"form-control"],["for","paymentMethod",1,"form-label"],["id","paymentMethod","formControlName","paymentMethod",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"text-danger"],[4,"ngIf"],[1,"mt-1"],[3,"ngValue"]],template:function(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",2)(8,"div",7)(9,"label",8),e.\u0275\u0275text(10,"User ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"input",9),e.\u0275\u0275listener("blur",function(){return a.getDetails()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,rt,2,1,"div",10),e.\u0275\u0275template(13,it,5,1,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",7)(15,"label",12),e.\u0275\u0275text(16,"Loan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"ng-select",13),e.\u0275\u0275listener("change",function(i){return a.getTotalPaybleAmount(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,mt,2,1,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",14)(20,"label",15),e.\u0275\u0275text(21,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(22,"input",16),e.\u0275\u0275template(23,pt,3,2,"div",10),e.\u0275\u0275template(24,ut,5,1,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",14)(26,"label",17),e.\u0275\u0275text(27,"Payment Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"select",18),e.\u0275\u0275template(29,_t,2,2,"option",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(30,gt,2,1,"div",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"button",20),e.\u0275\u0275listener("click",function(){return a.payLoanFees()}),e.\u0275\u0275text(32,"Submit"),e.\u0275\u0275elementEnd()()()()()()()),2&t){let o,i,s,m;e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",a.breadCrumbItems),e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",a.paymentFormGroup),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",(null==(o=a.paymentFormGroup.get("id"))?null:o.touched)&&(null==(o=a.paymentFormGroup.get("id"))?null:o.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.userDetails),e.\u0275\u0275advance(4),e.\u0275\u0275property("items",a.loanList)("bindValue","_id")("bindLabel","label"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(i=a.paymentFormGroup.get("loanId"))?null:i.touched)&&(null==(i=a.paymentFormGroup.get("loanId"))?null:i.invalid)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(s=a.paymentFormGroup.get("amount"))?null:s.touched)&&(null==(s=a.paymentFormGroup.get("amount"))?null:s.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.userDetails),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",a.paymentMethods),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(m=a.paymentFormGroup.get("paymentMethod"))?null:m.touched)&&(null==(m=a.paymentFormGroup.get("paymentMethod"))?null:m.invalid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",a.paymentFormGroup.invalid)}},dependencies:[c.NgForOf,c.NgIf,S.V,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.qQ,l.sg,l.u,k.w9]}),n})()},{path:"user-transanction",component:Xe},{path:"admin-transanction",component:nt}];let ht=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[g.Bz.forChild(vt),g.Bz]}),n})();var xt=d(9668);let St=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[c.CommonModule,xt.v,v.jF,l.UX,k.A0,ht]}),n})()}}]);
<div class="container-fluid">
    <app-page-title title="Awards & Recognition" [breadcrumbItems]="breadCrumbItems"></app-page-title>

    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-body border-bottom">
                    <div class="row mb-0">
                        <div class="col-sm-6">
                            <div class="search-box me-2 mb-2 d-inline-block">
                                <div class="position-relative">
                                    <input type="text" autocomplete="off" id="searchTableList" placeholder="Search..."
                                        class="form-control" (keydown.enter)="onSearch($event)">
                                    <i class="bx bx-search-alt search-icon"></i>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="text-sm-end">
                                <button type="button" (click)="openModal(createModal)"
                                    class="btn btn-success btn-rounded mb-2 me-2">
                                    <i class="mdi mdi-plus mr-1"></i> Add Awards
                                </button>

                            </div>
                        </div>
                    </div>
                </div>

                <div class="card-body">
                    <div class="row">

                        <div class="d-flex flex-column justify-content-center align-items-center"
                            style="min-height: 150px;" *ngIf="!awardsList || awardsList.length === 0">
                            <img src="assets/img/not-found.png" width="300px" alt="">
                            <p class="text-mutes mt-2">No Awards amd Recognition found.</p>
                        </div>
                        <div class="table-responsive" *ngIf="awardsList.length!==0">
                            <table id="basic-datatable"
                                class="table table-bordered dt-responsive nowrap datatables no-footer dtr-inline">
                                <thead>
                                    <tr>
                                        <th>S.No.</th>
                                        <th>Title</th>
                                        <th>Description</th>
                                        <th>Status</th>
                                        <th>Generated On</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <ng-container *ngFor="let career of awardsList; let i = index">
                                        <tr>

                                            <td>{{ (page - 1) * pageSize + i + 1 }}</td>
                                            <td>{{career.title}}</td>
                                            <td>{{career.description}}</td>
                                            <td>
                                                <span [ngClass]="{
                                                            'badge-soft-primary': career.status === 'Active',
                                                            'badge-soft-danger': career.status === 'Inactive'
                                                        }">{{career.status}}</span>
                                            </td>
                                            <td>{{career.created_date | date}}</td>
                                            <td>
                                                <ul class="list-unstyled hstack gap-1 mb-0">
                                                    <li data-bs-toggle="tooltip" (click)="deleteAward(career._id)"  data-bs-placement="top" title="Delete"><a  href="javascript:void(0);" data-bs-toggle="modal" class="btn btn-sm btn-soft-danger"><i class="bx bx-trash"></i></a></li>
                                                    <li data-bs-toggle="tooltip"
                                                        (click)="openEditModal(editModal, career)" data-bs-placement="top" title="Delete"><a
                                                            href="javascript:void(0);" data-bs-toggle="modal"
                                                            class="btn btn-sm btn-soft-primary"><i
                                                                class="mdi mdi-book-edit-outline"></i></a></li>
                                                </ul>
                                            </td>
                                        </tr>
                                    </ng-container>

                                </tbody>
                            </table>
                            <div class="row justify-content-md-between align-items-md-center mt-2">
                                <div class="col-sm-12 col-md-5">
                                    <div class="dataTables_info mb-2" id="tickets-table_info" role="status"
                                        aria-live="polite">Showing
                                        <b>{{ (page - 1) * pageSize + 1 }}</b> to
                                        {{ findPageShowing() }} of {{ total }}
                                        entries
                                    </div>
                                </div>
                                <div class="col-sm-12 col-md-5">
                                    <div class="text-md-right float-md-end pagination-rounded">
                                        <ngb-pagination [collectionSize]="total" [(page)]="page" [pageSize]="pageSize"
                                            (pageChange)="pageChange($event)">
                                        </ngb-pagination>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>


    <ng-template #createModal role="document" let-modal>
        <div class="modal-header">
            <h5 class="modal-title" id="myModalLabel">Create Awards</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                (click)="modal.dismiss('Cross click')"></button>
        </div>
        <form [formGroup]="createFormGroup">
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">

                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Title:</label>
                            <input type="text" class="form-control" id="recipient-name" formControlName="title"
                                placeholder="Enter Title">
                            <div *ngIf="createFormGroup.get('title')?.invalid && (createFormGroup.get('title')?.dirty || createFormGroup.get('title')?.touched)"
                                class="text-danger mt-1">
                                <small *ngIf="createFormGroup.get('title')?.errors?.['required']">Title is
                                    required.</small>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="message-text" class="col-form-label">Message:</label>
                            <textarea class="form-control" id="message-text" formControlName="description"
                                placeholder="Enter Description"></textarea>
                            <div *ngIf="createFormGroup.get('description')?.invalid && (createFormGroup.get('description')?.dirty || createFormGroup.get('description')?.touched)"
                                class="text-danger mt-1">
                                <small *ngIf="createFormGroup.get('description')?.errors?.['required']">Description is
                                    required.</small>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary waves-effect" data-bs-dismiss="modal"
                    (click)="modal.close('Close click')">Close</button>
                <button type="submit" class="btn btn-primary waves-effect waves-light"
                    [disabled]="createFormGroup.invalid" (click)="createAward()">Submit</button>
            </div>
        </form>
    </ng-template>

    <ng-template #editModal role="document" let-modal>
        <div class="modal-header">
            <h5 class="modal-title" id="myModalLabel">Edit Awards</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                (click)="modal.dismiss('Cross click')"></button>
        </div>
        <form [formGroup]="editFormGroup">
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">

                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Title:</label>
                            <input type="text" class="form-control" id="recipient-name" formControlName="title"
                                placeholder="Enter Title">
                            <div *ngIf="editFormGroup.get('title')?.invalid && (editFormGroup.get('title')?.dirty || editFormGroup.get('title')?.touched)"
                                class="text-danger mt-1">
                                <small *ngIf="editFormGroup.get('title')?.errors?.['required']">Title is
                                    required.</small>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="message-text" class="col-form-label">Message:</label>
                            <textarea class="form-control" id="message-text" formControlName="description"
                                placeholder="Enter Description"></textarea>
                            <div *ngIf="editFormGroup.get('description')?.invalid && (editFormGroup.get('description')?.dirty || editFormGroup.get('description')?.touched)"
                                class="text-danger mt-1">
                                <small *ngIf="editFormGroup.get('description')?.errors?.['required']">Description is
                                    required.</small>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="message-text" class="col-form-label">Message:</label>
                            <select formControlName="status"  class="form-select" id="message-text">
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                            </select>
                            <div *ngIf="editFormGroup.get('status')?.invalid && (editFormGroup.get('status')?.dirty || editFormGroup.get('status')?.touched)"
                                class="text-danger mt-1">
                                <small *ngIf="editFormGroup.get('status')?.errors?.['required']">Description is
                                    required.</small>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary waves-effect" data-bs-dismiss="modal"
                    (click)="modal.close('Close click')">Close</button>
                <button type="submit" class="btn btn-primary waves-effect waves-light"
                    [disabled]="editFormGroup.invalid" (click)="editAward()">Submit</button>
            </div>
        </form>
    </ng-template>
<div class="container-fluid">
  <app-page-title title="Edit Profile" [breadcrumbItems]="breadCrumbItems"></app-page-title>

  <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
        <form [formGroup]="profileFormGroup" >
            <div class="row justify-content-center">
                <div class="col-12">
                    <img src="assets/images/logo-dark.png" style="width: 100px;" alt="Logo" class="img-fluid mb-4">
                    <p>VERTEX KALYAN COOPERTIVE URBAN THRIFT & CREDIT SOCIETY LTD. REGISTERED UNDER GOVERMENT OF INDIA, REGD. NO.-
                        REGD.OFFICE- PLOT NO.-53, 3RD, FLOOR, MAIN ROAD, OPP. MOTHER DAIRY, PANDAV NAGAR, EAST DELHI- 110092, <a href="https://vertexsociety.com/">WWW.VERTEXSOCIETY.COM</a></p>
                    <hr class="line">
                </div>
                <div class="col-lg-12 mb-4 d-flex justify-content-center align-items-center text-center">
                    <div class="flex-fill"><strong>USER ID:</strong> {{user_details?.user_id}}</div>
                    <div class="flex-fill oval">Membership Details</div>
                    <div class="flex-fill"><strong>ACCOUNT NO:</strong> {{user_details?.account_number}}</div>
                </div>
                <div class="d-flex align-items-end mt-4">
                    <div class="col-lg-6 mb-1">
                        <p class="mb-2">To,</p>
                        <p class="mb-0">The Secretary/President,</p>
                        <p class="mb-0">VERTEX KALYAN COOPERTIVE URBAN THRIFT & CREDIT SOCIETY LTD.</p>
                    </div>
                    <div class="col-lg-6">
                        <div class="self-photo d-flex justify-content-center align-items-center" style="cursor:pointer; min-height: 60px;" (click)="selfPhotoInput.click()">
                            <span *ngIf="!selected_photo" class="w-100 text-center">SELF PHOTO (Upload your Photo)</span>
                            <img *ngIf="selected_photo" src="{{selected_photo}}" alt="">
                        </div>
                        <input type="file" #selfPhotoInput style="display:none" (change)="onFileSelected($event, 'profile_image')" accept="image/*" />
                        <input type="file" #aadharFrontInput style="display:none" accept="image/*"  (change)="onFileSelected($event, 'aadhar_front')" >
                        <input type="file" #aadharBackInput style="display:none" accept="image/*"  (change)="onFileSelected($event, 'aadhar_back')" >
                        <input type="file" #panImageInput style="display:none" accept="image/*"  (change)="onFileSelected($event, 'pan_image')" >
                        <input type="file" #disabilityImageInput style="display:none" accept="image/*"  (change)="onFileSelected($event, 'disability_image')" >
                    </div>
                </div>
                <div class="col-lg-12" >
                    <p class="mb-0">Dear Sir/Madam,</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp; I willingly apply for admission as a member of your society. I understand all the Rules & regulation of the Society and I follow
                        all Rules & regulation of society. Do hereby declare that all documents and information given by me below is True to the best of
                        my knowledge and belief. I understand that any false information or violation of the cooperative rules may result in cancellation
                        of my membership.</p>
                    <p class="mb-0">
                        म" आपक& सोसायट, के सद/य के 0प म1 2वेश के 5लए /वे8छा से आवेदन करता हूँ। म" सोसायट, के सभी CनयमD और FवCनयमD को समझता हूँ
                        और सोसायट, के सभी CनयमD और FवCनयमD का पालन करता हूँ। म" एतHHवारा घोषणा करता हूँ Lक मेरे Hवारा नीचे Nदए गए सभी द/तावेज़
                        और जानकार, मेरे सवRSम Tान और FवUवास के अनुसार सXय ह"। म" समझता हूँ Lक Lकसी भी गलत जानकार, या सहकार, CनयमD के उZलंघन
                        के प\रणाम/व0प मेर, सद/यता रHद हो सकती है।
                    </p>
                </div>

                <div class="col-lg-12 mt-4">
                    <div class="row mb-4">
                        <label for="name" class="col-sm-3 col-form-label">Name of Applicant, Mr./Mrs./Miss </label>
                        <div class="col-sm-2">
                            <input type="text" id="name" formControlName="name" (input)="profileFormGroup.get('name')?.setValue($event.target.value.toUpperCase())" placeholder="Enter Your Name" class="form-control">

                            <div *ngIf="profileFormGroup.get('name')?.invalid && profileFormGroup.get('name')?.touched" class="text-danger small">
                                Name must be at least 2 characters.
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                      <label for="guardian_name" class="col-sm-3 col-form-label">Guardian Name</label>
                      <div class="col-sm-2">
                        <input type="text" id="guardian_name" (input)="profileFormGroup.get('guardian_name')?.setValue($event.target.value.toUpperCase())" formControlName="guardian_name" placeholder="Enter Guardian Name" class="form-control">
                        <div *ngIf="profileFormGroup.get('guardian_name')?.invalid && profileFormGroup.get('guardian_name')?.touched" class="text-danger small">
                          Name must be at least 2 characters.
                        </div>
                      </div>
                      <label for="guardian_relation" class="col-sm-2 col-form-label">Relationship</label>
                      <div class="col-sm-3">
                        <select type="text" id="guardian_relation" formControlName="guardian_relation" placeholder="Enter Relationship" class="form-control">
                          <option value="" disabled selected>Select Relationship</option>
                          <option *ngFor="let reln of nominee_relation" value="{{reln}}">{{reln}}</option>
                        </select>
                        <div *ngIf="profileFormGroup.get('guardian_relation')?.invalid && profileFormGroup.get('guardian_relation')?.touched" class="text-danger small">
                          Relationship is required.
                        </div>
                      </div>
                    </div>


                    <div class="row mb-4">
                        <label for="mother_name" class="col-sm-3 col-form-label">Mother Name </label>
                        <div class="col-sm-2">
                            <input type="text" id="mother_name" (input)="profileFormGroup.get('mother_name')?.setValue($event.target.value.toUpperCase())" formControlName="mother_name" placeholder="Enter Your Mother Name" class="form-control">
                            <div *ngIf="profileFormGroup.get('mother_name')?.invalid && profileFormGroup.get('mother_name')?.touched" class="text-danger small">
                                Name must be at least 2 characters.
                            </div>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <label for="date_of_birth" class="col-sm-3 col-form-label">Date of birth </label>
                        <div class="col-sm-2">
                            <input type="text" id="date_of_birth" formControlName="date_of_birth" placeholder="Enter Your DOB" class="form-control">
                        </div>
                        <label for="date_of_birth" class="col-sm-3 col-form-label">(Age: {{ userAge }} years)</label>
                    </div>

                    <div class="row mb-4">
                        <label class="col-sm-3 col-form-label">Gender</label>
                        <div class="col-sm-9 d-flex align-items-center">
                            <div class="form-check me-3">
                                <input class="form-check-input" type="radio" name="gender" formControlName="gender" id="genderMale" value="Male">
                                <label class="form-check-label" for="genderMale">
                                    Male
                                </label>
                            </div>
                            <div class="form-check me-3">
                                <input class="form-check-input" type="radio" name="gender" formControlName="gender" id="genderFemale" value="Female">
                                <label class="form-check-label" for="genderFemale">
                                    Female
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="gender" formControlName="gender" id="genderOther" value="Other">
                                <label class="form-check-label" for="genderOther">
                                    Other
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <label class="col-sm-3 col-form-label">Marital Status</label>
                        <div class="col-sm-9 d-flex align-items-center">
                            <div class="form-check me-3">
                                <input class="form-check-input" type="radio" formControlName="maritial_status" name="maritial_status" id="statusSingle" value="Single" >
                                <label class="form-check-label" for="statusSingle">
                                    Single
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" formControlName="maritial_status" name="maritial_status" id="statusMarried" value="Married" >
                                <label class="form-check-label" for="statusMarried">
                                    Married
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="row mb-4" *ngIf="profileFormGroup.get('maritial_status')?.value === 'Married'">
                        <label for="spouse_name" class="col-sm-3 col-form-label">Wife/Husband Name</label>
                        <div class="col-sm-2">
                            <input type="text" id="spouse_name" formControlName="spouse_name" (input)="profileFormGroup.get('spouse_name')?.setValue($event.target.value.toUpperCase())"  placeholder="Enter Spouse Name" class="form-control">
                            <div *ngIf="profileFormGroup.get('spouse_name')?.invalid && profileFormGroup.get('spouse_name')?.touched" class="text-danger small">
                                Name must be at least 2 characters.
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <label for="aadhar" class="col-sm-3 col-form-label">Aadhar Number</label>
                        <div class="col-sm-2">
                            <input type="text" id="aadhar" formControlName="aadhar" placeholder="Enter Aadhar Number" class="form-control">
                            <div *ngIf="profileFormGroup.get('aadhar')?.invalid && profileFormGroup.get('aadhar')?.touched" class="text-danger small">
                                Enter valid 12 digit Aadhar number.
                            </div>
                        </div>
                        <label for="pan_image" *ngIf="!profileFormGroup.get('aadhar_front')?.value" class="col-sm-1 col-form-label">Aadhar Front</label>
                        <div class="col-sm-2" *ngIf="!profileFormGroup.get('aadhar_front')?.value">
                            <input type="file"  id="aadhar_front" placeholder="Aadhar Front" class="form-control" (change)="onFileSelected($event, 'aadhar_front')" accept="image/*" >
                        </div>
                        <div class="col-sm-2 d-flex flex-column gap-1" *ngIf="profileFormGroup.get('aadhar_front')?.value">
                            <button class="btn btn-sm btn-primary" (click)="viewImage(profileFormGroup.get('aadhar_front')?.value, viewImageModal)" >
                                <i class="mdi mdi-eye"></i> View Aadhar Front
                            </button>
                            <button class="btn btn-sm btn-warning" (click)="changeImage('aadhar_front')">
                                <i class="mdi mdi-pencil"></i> Change
                            </button>
                        </div>
                        <div class="col-sm-2 d-flex flex-column gap-1" *ngIf="profileFormGroup.get('aadhar_back')?.value">
                            <button class="btn btn-sm btn-primary" (click)="viewImage(profileFormGroup.get('aadhar_back')?.value, viewImageModal)" >
                                <i class="mdi mdi-eye"></i> View Aadhar Back
                            </button>
                            <button class="btn btn-sm btn-warning" (click)="changeImage('aadhar_back')">
                                <i class="mdi mdi-pencil"></i> Change
                            </button>
                        </div>
                        <label for="pan_image" *ngIf="!profileFormGroup.get('aadhar_back')?.value" class="col-sm-1 col-form-label">Aadhar Back</label>
                        <div class="col-sm-2" *ngIf="!profileFormGroup.get('aadhar_back')?.value">
                            <input type="file" id="aadhar_back" placeholder="Aadhar Back" class="form-control" (change)="onFileSelected($event, 'aadhar_back')" accept="image/*" >
                        </div>
                    </div>
                    <div class="row mb-4">
                        <label for="pan" class="col-sm-3 col-form-label">PAN Number</label>
                        <div class="col-sm-2">
                            <input type="text" id="pan" (input)="profileFormGroup.get('pan')?.setValue($event.target.value.toUpperCase())" formControlName="pan" placeholder="Enter PAN Number" class="form-control">
                            <div *ngIf="profileFormGroup.get('pan')?.invalid && profileFormGroup.get('pan')?.touched" class="text-danger small">
                                Enter valid PAN number.
                            </div>
                        </div>
                        <label for="pan_image" *ngIf="!profileFormGroup.get('pan_image')?.value" class="col-sm-1 col-form-label">PAN Image</label>
                        <div class="col-sm-2" *ngIf="!profileFormGroup.get('pan_image')?.value">
                            <input type="file" id="pan_image" placeholder="PAN Image" class="form-control"  (change)="onFileSelected($event, 'pan_image')" accept="image/*" >
                        </div>
                        <div class="col-sm-2 d-flex flex-column gap-1" *ngIf="profileFormGroup.get('pan_image')?.value">
                            <button class="btn btn-sm btn-primary" (click)="viewImage(profileFormGroup.get('pan_image')?.value, viewImageModal)">
                                <i class="mdi mdi-eye"></i> View PAN Image
                            </button>
                            <button class="btn btn-sm btn-warning" (click)="changeImage('pan_image')">
                                <i class="mdi mdi-pencil"></i> Change
                            </button>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <label for="mobile_number" class="col-sm-3 col-form-label">Mobile Number</label>
                        <label for="mobile_number" class="col-sm-1 col-form-label">Mobile 1</label>
                        <div class="col-sm-3">
                            <input type="text" id="mobile_number" formControlName="mobile_number" placeholder="Enter Mobile Number 1" class="form-control">
                            <div *ngIf="profileFormGroup.get('mobile_number')?.invalid && profileFormGroup.get('mobile_number')?.touched" class="text-danger small">
                                Enter valid 10 digit mobile number.
                            </div>
                        </div>
                        <label for="mobile_number_2" class="col-sm-1 col-form-label">Mobile 2</label>
                        <div class="col-sm-3">
                            <input type="text" id="mobile_number_2" formControlName="mobile_number_2" placeholder="Enter Mobile Number 2" class="form-control">
                            <div *ngIf="profileFormGroup.get('mobile_number_2')?.invalid && profileFormGroup.get('mobile_number_2')?.touched" class="text-danger small">
                                Enter valid 10 digit mobile number.
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <label for="state" class="col-sm-3 col-form-label">Location Details</label>
                        <div class="row col-sm-9">
                            <div class="col-sm-3 mb-1">
                                <label for="">State</label>
                                <ng-select [items]="allStates" formControlName="state" placeholder="Search for a state..." bindLabel="name" bindValue="_id" (change)="getDistricts($event)"></ng-select>
                            </div>
                            <div class="col-sm-4 mb-1">
                                <label for="">District</label>
                                <ng-select [items]="allDistricts" formControlName="district" placeholder="Search for a district..." bindLabel="name" bindValue="_id" (change)="getAreas($event)"></ng-select>
                            </div>
                            <div class="col-sm-4 mb-1">
                                <label for="">Area</label>
                                <ng-select [items]="allAreas" formControlName="area" placeholder="Search for areas..." bindLabel="name" bindValue="_id" class="custom-ng-select"></ng-select>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <label for="present_addr" class="col-sm-3 col-form-label">Present/Correspondance Address</label>
                        <div class="col-sm-8">
                            <div formArrayName="present_addresses">
                                <div *ngFor="let address of profileFormGroup.get('present_addresses')['controls']; let i = index" [formGroupName]="i" class="row mb-2">
                                    <div class="col-sm-12 mb-2">
                                        <label for="">Address</label>
                                        <input type="text" id="present_addr_{{i}}" formControlName="address" placeholder="Enter Present Address" class="form-control"
                                            (input)="address.get('address')?.setValue($event.target.value.toUpperCase())">
                                        <div *ngIf="address.get('address')?.invalid && address.get('address')?.touched" class="text-danger small">
                                            Enter valid Present Address.
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <label for="">State</label>
                                        <input type="text" id="present_state_{{i}}" formControlName="state" placeholder="State" class="form-control"
                                            (input)="address.get('state')?.setValue($event.target.value.toUpperCase())">
                                        <div *ngIf="address.get('state')?.invalid && address.get('state')?.touched" class="text-danger small">
                                            Enter valid State.
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <label for="">District</label>
                                        <input type="text" id="present_district_{{i}}" formControlName="district" placeholder="District" class="form-control">
                                        <div *ngIf="address.get('district')?.invalid && address.get('district')?.touched" class="text-danger small">
                                            Enter valid District.
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <label for="">Pincode</label>
                                        <input type="text" id="present_pincode_{{i}}" formControlName="pincode" placeholder="Pincode" class="form-control"
                                            (input)="address.get('pincode')?.setValue($event.target.value.toUpperCase())">
                                        <div *ngIf="address.get('pincode')?.invalid && address.get('pincode')?.touched" class="text-danger small">
                                            Enter valid Pincode.
                                        </div>
                                    </div>
                                    <div class="col-sm-1 d-flex align-items-center">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox"
                                                [formControlName]="'status'"
                                                disabled>
                                        </div>
                                    </div>
                                    <div class="col-sm-1 d-flex align-items-center mt-4">
                                        <button type="button" class="btn btn-danger btn-sm" (click)="removePresentAddress(i)" *ngIf="profileFormGroup.get('present_addresses')['controls'].length > 1">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="mt-1">
                                    <button type="button" class="btn btn-success btn-sm" (click)="addPresentAddress()">
                                        <i class="fa fa-plus"></i> Add Address
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <label for="permanent_addr" class="col-sm-3 col-form-label">Permanent Address</label>
                        <div class="col-sm-8">
                            <div formArrayName="permanent_addresses">
                                <div *ngFor="let address of profileFormGroup.get('permanent_addresses')['controls']; let i = index" [formGroupName]="i" class="row mb-2">
                                    <div class="col-sm-12 mb-2">
                                        <label for="">Address</label>
                                        <input type="text" id="permanent_addr_{{i}}" formControlName="address" placeholder="Enter Permanent Address" class="form-control"
                                            (input)="address.get('address')?.setValue($event.target.value.toUpperCase())">
                                        <div *ngIf="address.get('address')?.invalid && address.get('address')?.touched" class="text-danger small">
                                            Enter valid Permanent Address
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <label for="">State</label>
                                        <input type="text" id="permanent_state_{{i}}" formControlName="state" placeholder="State" class="form-control"
                                            (input)="address.get('state')?.setValue($event.target.value.toUpperCase())">
                                        <div *ngIf="address.get('state')?.invalid && address.get('state')?.touched" class="text-danger small">
                                            Enter valid State.
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <label for="">District</label>
                                        <input type="text" id="permanent_district_{{i}}" formControlName="district" placeholder="District" class="form-control"
                                            (input)="address.get('district')?.setValue($event.target.value.toUpperCase())">
                                        <div *ngIf="address.get('district')?.invalid && address.get('district')?.touched" class="text-danger small">
                                            Enter valid District.
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <label for="">Pincode</label>
                                        <input type="text" id="permanent_pincode_{{i}}" formControlName="pincode" placeholder="Pincode" class="form-control"
                                            (input)="address.get('pincode')?.setValue($event.target.value.toUpperCase())">
                                        <div *ngIf="address.get('pincode')?.invalid && address.get('pincode')?.touched" class="text-danger small">
                                            Enter valid Pincode.
                                        </div>
                                    </div>
                                    <div class="col-sm-1 d-flex align-items-center">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox"
                                                [formControlName]="'status'"
                                                disabled>
                                        </div>
                                    </div>
                                    <div class="col-sm-1 d-flex align-items-center mt-4">
                                        <button type="button" class="btn btn-danger btn-sm" (click)="removePermanentAddress(i)" *ngIf="profileFormGroup.get('permanent_addresses')['controls'].length > 1">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="mt-1">
                                    <button type="button" class="btn btn-success btn-sm" (click)="addPermanentAddress()">
                                        <i class="fa fa-plus"></i> Add Address
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <label for="email_id" class="col-sm-3 col-form-label">Email ID</label>
                        <div class="col-sm-3">
                            <input type="email" id="email_id" formControlName="email_id" placeholder="Enter Email ID" class="form-control">
                            <div *ngIf="profileFormGroup.get('email_id')?.invalid && profileFormGroup.get('email_id')?.touched" class="text-danger small">
                                Enter valid email address.
                            </div>
                        </div>
                        <label for="whatsapp_no" class="col-sm-2 col-form-label">WhatsApp No.</label>
                        <div class="col-sm-3">
                            <input type="text" id="whatsapp_no" formControlName="whatsapp_no" placeholder="Enter WhatsApp No." class="form-control">
                            <div *ngIf="profileFormGroup.get('whatsapp_no')?.invalid && profileFormGroup.get('whatsapp_no')?.touched" class="text-danger small">
                                Enter valid 10 digit WhatsApp number.
                            </div>
                        </div>
                    </div>

                    <p>Name & Address of the employed or business address</p>

                    <div class="row mb-4">
                        <label for="office_addr" class="col-sm-3 col-form-label">Office Address</label>

                        <div class="col-sm-8">
                            <div formArrayName="office_addresses">
                                <div *ngFor="let address of profileFormGroup.get('office_addresses')['controls']; let i = index" [formGroupName]="i" class="row mb-2">
                                    <div class="col-sm-12 mb-2">
                                        <label for="">Address</label>
                                        <input type="text" id="office_addr_{{i}}" formControlName="address" placeholder="Enter Office Address" class="form-control"
                                            (input)="address.get('address')?.setValue($event.target.value.toUpperCase())">
                                        <div *ngIf="address.get('address')?.invalid && address.get('address')?.touched" class="text-danger small">
                                            Enter valid Office Address.
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <label for="">State</label>
                                        <input type="text" id="office_state_{{i}}" formControlName="state" placeholder="State" class="form-control"
                                            (input)="address.get('state')?.setValue($event.target.value.toUpperCase())">
                                        <div *ngIf="address.get('state')?.invalid && address.get('state')?.touched" class="text-danger small">
                                            Enter valid State.
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <label for="">District</label>
                                        <input type="text" id="office_district_{{i}}" formControlName="district" placeholder="District" class="form-control"
                                            (input)="address.get('district')?.setValue($event.target.value.toUpperCase())">
                                        <div *ngIf="address.get('district')?.invalid && address.get('district')?.touched" class="text-danger small">
                                            Enter valid District.
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <label for="">Pincode</label>
                                        <input type="text" id="office_pincode_{{i}}" formControlName="pincode" placeholder="Pincode" class="form-control"
                                            (input)="address.get('pincode')?.setValue($event.target.value.toUpperCase())">
                                        <div *ngIf="address.get('pincode')?.invalid && address.get('pincode')?.touched" class="text-danger small">
                                            Enter valid Pincode.
                                        </div>
                                    </div>
                                    <div class="col-sm-1 d-flex align-items-center mt-4">
                                        <button type="button" class="btn btn-danger btn-sm" (click)="removeOfficeAddress(i)" *ngIf="profileFormGroup.get('office_addresses')['controls'].length > 1">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="mt-1">
                                    <button type="button" class="btn btn-success btn-sm" (click)="addOfficeAddress()">
                                        <i class="fa fa-plus"></i> Add Address
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <label class="col-sm-3 col-form-label" for="bank_details">Bank Details</label>
                        <div class="col-sm-8">
                            <div formArrayName="banks">
                                <div *ngFor="let bank of profileFormGroup.get('banks')['controls']; let i = index" [formGroupName]="i" class="row mb-2 align-items-end">
                                    <div class="col-sm-3 mb-2">
                                        <label for="">Bank Name</label>
                                        <input type="text" formControlName="bank_name" placeholder="Bank Name" class="form-control"
                                            (input)="bank.get('bank_name')?.setValue($event.target.value.toUpperCase())">
                                    </div>
                                    <div class="col-sm-3 mb-2">
                                        <label for="">Account Number</label>
                                        <input type="text" formControlName="account_number" placeholder="Account Number" class="form-control"
                                            (input)="bank.get('account_number')?.setValue($event.target.value.toUpperCase())">
                                        <div *ngIf="bank.get('account_number')?.invalid && bank.get('account_number')?.touched" class="text-danger small">
                                            Enter valid account number.
                                        </div>
                                    </div>
                                    <div class="col-sm-2 mb-2">
                                        <label for="">IFSC Code</label>
                                        <input type="text" formControlName="ifsc_code" placeholder="IFSC Code" class="form-control"
                                            (input)="bank.get('ifsc_code')?.setValue($event.target.value.toUpperCase())">
                                        <div *ngIf="bank.get('ifsc_code')?.invalid && bank.get('ifsc_code')?.touched" class="text-danger small">
                                            Enter valid IFSC code.
                                        </div>
                                    </div>
                                    <div class="col-sm-2 mb-2">
                                        <label for="">Branch Name</label>
                                        <input type="text" formControlName="branch_name" placeholder="Branch Name" class="form-control"
                                            (input)="bank.get('branch_name')?.setValue($event.target.value.toUpperCase())">
                                    </div>
                                     <div class="col-sm-1 mb-3 d-flex align-items-center">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox"
                                                [formControlName]="'status'"
                                                disabled>
                                        </div>
                                    </div>
                                    <div class="col-sm-1 mb-3 d-flex align-items-center">
                                        <button type="button" class="btn btn-danger btn-sm" (click)="removeBank(i)" *ngIf="profileFormGroup.get('banks')['controls'].length > 1">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </div>
                                   
                                </div>
                                <div class="mt-1">
                                    <button type="button" class="btn btn-success btn-sm" (click)="addBank()">
                                        <i class="fa fa-plus"></i> Add Bank
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <label class="col-sm-3 col-form-label">Passbook/Cheque</label>
                        <div class="col-sm-5 d-flex align-items-center">
                          <!-- <input type="file" id="passbook_cheque" placeholder="Passbook/Cheque" class="form-control" (change)="uploadFile($event, 'passbook_cheque')"> -->
                          <div class="passbook_box" style="cursor:pointer;" (click)="selfPassbookInput.click()">
                                <span  *ngIf="!selected_cheque">UPLOAD Passbook/Cheque</span>
                                <img *ngIf="selected_cheque" src="{{selected_cheque}}" alt="">
                            </div>
                            <input type="file" #selfPassbookInput style="display:none"  (change)="onFileSelected($event, 'passbook_cheque')" accept="image/*" >
                        </div>
                    </div>

                    <div class="row mb-4 align-items-center">
                        <label class="col-sm-3 col-form-label">Name of the Nominee</label>
                        <div class="col-sm-2">
                            <input type="text" (input)="profileFormGroup.get('nominee_name')?.setValue($event.target.value.toUpperCase())" formControlName="nominee_name" placeholder="Enter Nominee Name" class="form-control">
                            <div *ngIf="profileFormGroup.get('nominee_name')?.invalid && profileFormGroup.get('nominee_name')?.touched" class="text-danger small">
                                Name must be at least 2 characters.
                            </div>
                        </div>
                        <label class="col-sm-2 col-form-label">Relationship</label>
                        <div class="col-sm-2">
                            <select type="text" formControlName="nominee_relation" placeholder="Relationship" class="form-control">
                                <option *ngFor="let reln of nominee_relation" value="{{reln}}">{{reln}}</option>
                            </select>
                        </div>
                    </div>

                    <div class="row mb-4 align-items-center">
                        <label class="col-sm-3 col-form-label">Nominee DOB</label>
                        <div class="col-sm-2">
                            <input type="date" formControlName="nominee_dob" class="form-control">
                        </div>
                        <label class="col-sm-2 col-form-label">Nominee Mobile</label>
                        <div class="col-sm-2">
                            <input type="text" formControlName="nominee_mobile" class="form-control">
                            <div *ngIf="profileFormGroup.get('nominee_mobile')?.invalid && profileFormGroup.get('nominee_mobile')?.touched" class="text-danger small">
                                Enter valid mobile number.
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4 align-items-center">
                        <label class="col-sm-3 col-form-label">Are you disabled?</label>
                        <div class="col-sm-2">
                            <div class="form-check form-check-inline me-3">
                                <input class="form-check-input" type="radio" formControlName="is_divyang" name="is_divyang" id="disabilityYes" [value]="true">
                                <label class="form-check-label" for="disabilityYes">Yes</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" formControlName="is_divyang" name="is_divyang" id="disabilityNo" [value]="false">
                                <label class="form-check-label" for="disabilityNo">No</label>
                            </div>
                        </div>
                        <label class="col-sm-2 col-form-label" *ngIf="profileFormGroup.get('is_divyang')?.value === true && !profileFormGroup.get('disability_image')?.value">Disability Proof</label>
                        <div class="col-sm-2" *ngIf="profileFormGroup.get('is_divyang')?.value === true && !profileFormGroup.get('disability_image')?.value">
                            <input type="file" accept="image/*" id="disability_image" class="form-control" (change)="onFileSelected($event, 'disability_image')">
                        </div>
                        <div class="col-sm-3 d-flex flex-column gap-1" *ngIf="profileFormGroup.get('disability_image')?.value">
                            <button class="btn btn-sm btn-primary" (click)="viewImage(profileFormGroup.get('disability_image')?.value, viewImageModal)">
                                <i class="mdi mdi-eye"></i> View Disability Certificate
                            </button>
                            <button class="btn btn-sm btn-warning" (click)="changeImage('disability_image')">
                                <i class="mdi mdi-pencil"></i> Change
                            </button>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <label class="col-sm-3 col-form-label">Occupation</label>
                        <div class="col-sm-9 d-flex align-items-center">
                            <div class="form-check me-3">
                                <input class="form-check-input" type="radio" formControlName="occupation" id="occupationService" value="Service">
                                <label class="form-check-label" for="occupationService">
                                    Service
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" formControlName="occupation" id="occupationBusiness" value="Business">
                                <label class="form-check-label" for="occupationBusiness">
                                    Business
                                </label>
                            </div>
                        </div>
                    </div>



                    <p class="mb-0">
                        NOTE :- I apply for admission as a member of your society. I understand the Rules & By-laws of the Society and hereby agree to
                        abide by them and any subsequent modifications thereto. I also hereby declare that I am neither a member of any other Co-
                        operative Thrift & Credit Society operating or working in the State of Delhi nor taken any kind of Loan which is outstanding as on
                        date. I request that the Managing Committee may please allot me ____ Shares of Rs. 500/- each and I also agree to deposit Rs. 200/-
                        per month on account of Compulsory Deposit as well as Admission Fee of Rs. 100/- and other sums towards Building Fund,
                        Welfare Fund, Miscellaneous Receipts etc. as applicable on the date of my admission as Member. I hereby nominate the
                        following person to whom all money due to me by the society or payable by me to the society, in the event of my death, maybe
                        paid or recovered as the case may be.
                    </p>

                </div>

                <div class="col-lg-12 mt-4 mb-5">
                    <p class="mb-0">I request that the mamaging committee may please allot me one share of rs.-500/-, and i also other sums towards building fund,
                    kalyan fund, misc. ect., as applicable on the date of my admission as member. i hereby nominate the following person to whom
                    all money due to me by the society or payable by me to the society,in the event of my death, may be paid or recovered, as the
                    case may be.</p>
                </div>

                <div class="row mb-4 mt-6">
                    <label for="name" class="col-sm-1 col-form-label">Date of Joining </label>
                    <div class="col-sm-2">
                        <input type="text" id="name" placeholder="Date of Joining" formControlName="created_date" class="form-control">
                    </div>
                    <div class="col-sm-9 d-flex justify-content-end align-items-center">
                        <label for="signature" class="col-form-label me-2">Signature</label> <br>
                        <div class="col-lg-6">
                            <div class="sign_box" style="cursor:pointer;" (click)="selfSignInput.click()">
                                <span  *ngIf="!selected_signature">UPLOAD SIGN</span>
                                <img *ngIf="selected_signature" src="{{selected_signature}}" alt="">
                            </div>
                            <input type="file" #selfSignInput style="display:none"  (change)="onFileSelected($event, 'signature')" accept="image/*">
                        </div>
                    </div>
                </div>
                <div class="row mb-4">
                    <label for="name" class="col-sm-1 col-form-label">Place </label>
                    <div class="col-sm-2">
                        <input type="text" id="name" placeholder="Place" formControlName="signed_at"  class="form-control">
                    </div>
                </div>


            <div *ngIf="profileFormGroup.invalid && profileFormGroup.touched" class="alert alert-danger">
                Please correct the errors above before submitting the form.
            </div>

            <div class="d-flex justify-content-center">
                <button class="btn btn-danger ms-2" *ngIf="!isAccountApproved" (click)="approveKYC()">Approve KYC</button>
                <button class="btn btn-primary ms-2" (click)="formSubmit()">{{isAccountApproved? 'Edit Profile': 'Save Draft'}}</button>
            </div>
            </div>
        </form>

        </div>
      </div>
    </div>
</div>




<ng-template #viewImageModal role="document" let-modal>
  <div class="modal-body">
      <div class="row" >
        <div class="col-md-12">
            <div class="text-center">
                <img [src]="viewImageURL" alt="KYC Image" class="img-fluid" style="max-width: 100%; max-height: 400px;">
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary waves-effect" data-bs-dismiss="modal" (click)="modal.close('Close click')">Close</button>
      </div>
</ng-template>